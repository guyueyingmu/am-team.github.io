<!DOCTYPE html><html lang="zh-cn" class="home"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>支付宝H5开放文档</title><link rel="icon" href="https://i.alipayobjects.com/common/favicon/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="https://i.alipayobjects.com/common/favicon/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://os.alipayobjects.com/s_dev/prod/open-nebula/global-8f849f8bf543eb0d5e73a659f8f3134b.css"><link rel="stylesheet" href="https://os.alipayobjects.com/rmsportal/ijMlnBQKFrkzTED.css"><style>.manual-speaks{padding:30px 30px 50px}.manual-speaks>p{color:#999;font-size:12px;line-height:1.2}.demo-wrap .demo-actions,.demo-wrap .my-btn-copy,.demo-wrap .my-copy-status,.demo-wrap .qrcode-handle,.my-pdf-link,.my-qa-wrap{display:none}@media (min-width:992px){.my-content{padding-right:35px}}.main{padding:0}@media (min-width:768px){.main{padding:0}}pre.hljs{overflow-x:initial;overflow:auto}pre code{white-space:pre-wrap!important;word-break:break-all!important}</style></head><body><div class="manual-speaks"><h1>支付宝容器jsAPI文档手册PDF版本</h1><p>本版本为实验版本，为线下独立查看使用，受制于生成PDF程序的限制，样式问题还没有很好的解决，例如分页切图、代码高亮。<br>推荐使用在线版本，方便实时查看jsAPI运行效果。<br>如需搜索，使用阅读PDF软件自带功能即可。<br>更多细节样式调整和目录索引探索建设中。<br>生成时间: 2017-06-08 05:40:30</p></div><div class="container-fluid main"><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><p><strong>V3.0.2 更新日志</strong> 2017-06-01<br></p><li>新增 API <code>ap.startBizService()</code> 启动某项支付宝业务服务。<a href="util/service/startBizService.html">详情</a></li><li>修复 API <code>ap.onResume()</code> 事件返回值 data 字段缺失的问题。<a href="navigation/event/onResume.html">详情</a></li><li>修复 运行环境对 Promise 的检测，不支持时仍然可以使用 callback 方式。</li><li>修复 Promise 方式调用 API 时需要等待 ap.ready() resolve 的问题。</li><li>修复 调用 ap 方法时，ready 事件延时可能导致的 AlipayJSBridge 对象未初始化的报错。</li><li>修复 事件移除接口 <code>ap.offXXX()</code> 不生效的问题。</li><li>修复 API <code>ap.onBLECharacteristicValueChange()</code> 事件注册不生效的问题。</li><li>修复 API <code>ap.onBLEConnectionStateChanged()</code> 事件注册不生效的问题。</li><p><br><strong>V3.0.0 更新日志</strong> 2017-05-19</p><ul><li>新增 API <code>ap.openBluetoothAdapter()</code> 初始化本机蓝牙模块。<a href="device/bluetooth/openBluetoothAdapter.html">详情</a></li><li>新增 API <code>ap.closeBluetoothAdapter()</code> 关闭本机蓝牙模块。<a href="device/bluetooth/closeBluetoothAdapter.html">详情</a></li><li>新增 API <code>ap.getBluetoothAdapterState()</code> 获取本机蓝牙模块状态。<a href="device/bluetooth/getBluetoothAdapterState.html">详情</a></li><li>新增 API <code>ap.startBluetoothDevicesDiscovery()</code> 开始搜寻附近的蓝牙外围设备。<a href="device/bluetooth/startBluetoothDevicesDiscovery.html">详情</a></li><li>新增 API <code>ap.stopBluetoothDevicesDiscovery()</code> 停止搜寻附近的蓝牙外围设备。<a href="device/bluetooth/stopBluetoothDevicesDiscovery.html">详情</a></li><li>新增 API <code>ap.getBluetoothDevices()</code> 获取所有已发现的蓝牙设备。<a href="device/bluetooth/getBluetoothDevices.html">详情</a></li><li>新增 API <code>ap.getConnectedBluetoothDevices()</code> 根据 service 的 uuid 获取处于已连接状态的设备。<a href="device/bluetooth/getConnectedBluetoothDevices.html">详情</a></li><li>新增 API <code>ap.connectBLEDevice()</code> 连接低功耗蓝牙设备。<a href="device/bluetooth/connectBLEDevice.html">详情</a></li><li>新增 API <code>ap.disconnectBLEDevice()</code> 断开与低功耗蓝牙设备的连接。<a href="device/bluetooth/disconnectBLEDevice.html">详情</a></li><li>新增 API <code>ap.writeBLECharacteristicValue()</code> 向低功耗蓝牙设备特征值中写入数据。<a href="device/bluetooth/writeBLECharacteristicValue.html">详情</a></li><li>新增 API <code>ap.readBLECharacteristicValue()</code> 读取低功耗蓝牙设备特征值中的数据。<a href="device/bluetooth/readBLECharacteristicValue.html">详情</a></li><li>新增 API <code>ap.notifyBLECharacteristicValueChange()</code> 启用低功耗蓝牙设备特征值变化时的 notify 功能。<a href="device/bluetooth/notifyBLECharacteristicValueChange.html">详情</a></li><li>新增 API <code>ap.getBLEDeviceServices()</code> 获取蓝牙设备所有 service。<a href="device/bluetooth/getBLEDeviceServices.html">详情</a></li><li>新增 API <code>ap.getBLEDeviceCharacteristics()</code> 获取蓝牙设备所有 characteristic。<a href="device/bluetooth/getBLEDeviceCharacteristics.html">详情</a></li><li>新增 API <code>ap.onBluetoothDeviceFound()</code> 寻找到新的蓝牙设备时触发此事件。<a href="device/bluetooth/onBluetoothDeviceFound.html">详情</a></li><li>新增 API <code>ap.offBluetoothDeviceFound()</code> 移除寻找到新的蓝牙设备事件的监听。<a href="device/bluetooth/offBluetoothDeviceFound.html">详情</a></li><li>新增 API <code>ap.onBLECharacteristicValueChange()</code> 监听低功耗蓝牙设备的特征值变化事件。<a href="device/bluetooth/onBLECharacteristicValueChange.html">详情</a></li><li>新增 API <code>ap.offBLECharacteristicValueChange()</code> 移除低功耗蓝牙设备的特征值变化事件监听。<a href="device/bluetooth/offBLECharacteristicValueChange.html">详情</a></li><li>新增 API <code>ap.onBLEConnectionStateChanged()</code> 监听低功耗蓝牙连接的错误事件。<a href="device/bluetooth/onBLEConnectionStateChanged.html">详情</a></li><li>新增 API <code>ap.offBLEConnectionStateChanged()</code> 移除低功耗蓝牙连接的错误事件监听。<a href="device/bluetooth/offBLEConnectionStateChanged.html">详情</a></li><li>新增 API <code>ap.onBluetoothAdapterStateChange()</code> 监听本机蓝牙状态变化的事件。<a href="device/bluetooth/onBluetoothAdapterStateChange.html">详情</a></li><li>新增 API <code>ap.offBluetoothAdapterStateChange()</code> 移除本机蓝牙状态变化的事件监听。<a href="device/bluetooth/offBluetoothAdapterStateChange.html">详情</a></li></ul><p><br><strong>V0.3.1 更新日志</strong> 2017-05-08</p><ul><li>更新 API <code>ap.getLocation()</code>，默认入参 type 为 2，返回值新增速度和精度。<a href="location/get/getLocation.html">详情</a></li><li>修复 API <code>ap.getSystemInfo()</code>，调用出错的问题。</li></ul><p><br><strong>V0.3.0 更新日志</strong> 2017-04-28</p><ul><li>支持 Promise 语法。<a href="index.html#快速开始">详情</a></li><li>修复 API <code>ap.getStorage()</code> 获取字符串类型的数据时控制台报错的问题。</li></ul><p><br><strong>V0.2.9 更新日志</strong> 2017-04-28<br></p><li>修复 API <code>ap.getStorage()</code>，找不到对应 key 的 data 时，返回 data 为 null，并执行 success 回调。</li><li>修复 API <code>ap.onPullDownRefresh()</code>，改为默认允许下拉刷新。</li><p><br><strong>V0.2.8 更新日志</strong> 2017-04-20</p><ul><li>修复 API <code>ap.compressImage()</code>，压缩图片入参的问题。</li><li>修复 API <code>ap.getSystemInfo()</code>，获取窗口高度不正确的问题。</li></ul><p><br><strong>V0.2.7 更新日志</strong> 2017-04-19</p><ul><li>修复 API <code>ap.allowPullDownRefresh()</code> 禁用下拉刷新无效的问题。</li><li>修复 API <code>ap.makePhoneCall()</code> 拨打电话异常的问题。</li><li>更改 API <code>ap.setOptionButton()</code>，新增 onClick 入参，可以在 OptionButton 被点击时回调。<a href="ui/navigationbar/setOptionButton.html">详情</a></li><li>新增 API <code>ap.compressImage()</code>，压缩图片。<a href="media/image/compressImage.html">详情</a></li></ul><p><br><strong>V0.2.5 更新日志</strong> 2017-03-31</p><ul><li>修复 API <code>ap.setStorage()</code> 入参类型转换字符串的问题。</li><li>新增 API <code>ap.offSocketOpen()</code> 移除 WebSocket 链接打开事件监听。<a href="network/webSocket/offSocketOpen.html">详情</a></li><li>新增 API <code>ap.offSocketClose()</code> 移除 WebSocket 关闭事件监听。<a href="network/webSocket/offSocketClose.html">详情</a></li><li>新增 API <code>ap.offSocketError()</code> 移除 WebSocket 出错事件监听。<a href="network/webSocket/offSocketError.html">详情</a></li><li>新增 API <code>ap.offSocketMessage()</code> 移除 WebSocket 消息事件监听。<a href="network/webSocket/offSocketMessage.html">详情</a><br><strong>V0.2.4 更新日志</strong> 2017-03-17</li><li>更新 API <code>ap.getStorage()</code> 返回值。<a href="data/storage/getStorage.html">详情</a></li><li>新增 API <code>ap.connectSocket()</code> 创建 WebSocket 链接。<a href="network/webSocket/connectSocket.html">详情</a></li><li>新增 API <code>ap.sendSocketMessage()</code> 通过 WebSocket 连接发送数据。<a href="network/webSocket/sendSocketMessage.html">详情</a></li><li>新增 API <code>ap.closeSocket()</code> 关闭 WebSocket 链接。<a href="network/webSocket/closeSocket.html">详情</a></li><li>新增 API <code>ap.onSocketOpen()</code> WebSocket 链接打开事件。<a href="network/webSocket/onSocketOpen.html">详情</a></li><li>新增 API <code>ap.onSocketMessage()</code> 接收到 WebSocket 消息事件。<a href="network/webSocket/onSocketMessage.html">详情</a></li><li>新增 API <code>ap.onSocketError()</code> WebSocket 出错事件。<a href="network/webSocket/onSocketError.html">详情</a></li><li>新增 API <code>ap.onSocketClose()</code> WebSocket 关闭事件。<a href="network/webSocket/onSocketClose.html">详情</a></li></ul><p><br><strong>V0.2.3 更新日志</strong> 2017-03-10</p><li>新增 API <code>ap.onAppPause()</code> 监听应用压后台事件。<a href="navigation/appevent/onAppPause.html">详情</a></li><li>新增 API <code>ap.offAppPause()</code> 移除应用压后台事件监听。<a href="navigation/appevent/offAppPause.html">详情</a></li><li>新增 API <code>ap.onAppResume()</code> 监听应用唤起事件。<a href="navigation/appevent/onAppResume.html">详情</a></li><li>新增 API <code>ap.offAppResume()</code> 移除应用唤起事件监听。<a href="navigation/appevent/offAppResume.html">详情</a></li><li>新增 API <code>ap.setStorage()</code> 存储数据。<a href="data/storage/setStorage.html">详情</a></li><li>新增 API <code>ap.getStorage()</code> 获取存储数据。<a href="data/storage/getStorage.html">详情</a></li><li>新增 API <code>ap.removeStorage()</code> 删除存储数据。<a href="data/storage/removeStorage.html">详情</a></li><li>更新 API <code>ap.share()</code> 参数列表。<a href="ui/share/share.html">详情</a></li><p><br><strong>V0.2.2 更新日志</strong> 2017-03-06</p><li>修复 API <code>ap.openLocation()</code>，调用失败的问题。</li><li>新增 API <code>ap.offBack()</code> 移除 back 事件监听。<a href="navigation/event/offBack.html">详情</a></li><li>新增 API <code>ap.offPause()</code> 移除 pause 事件监听。<a href="navigation/event/offPause.html">详情</a></li><li>新增 API <code>ap.offResume()</code> 移除 resume 事件监听。<a href="navigation/event/offResume.html">详情</a></li><li>新增 API <code>ap.offTitleClick()</code> 移除标题点击事件监听。<a href="ui/navigationbar/offTitleClick.html">详情</a></li><li>新增 API <code>ap.offPullDownRefresh()</code> 移除下拉刷新事件监听。<a href="ui/pulldown/offPullDownRefresh.html">详情</a></li><li>新增 API <code>ap.offNetworkChange()</code> 移除网络状态变化事件监听。<a href="device/network/offNetworkChange.html">详情</a></li><li>新增 API <code>ap.offBackgroundAudioPlay()</code> 移除音乐播放事件监听。<a href="media/audio/offBackgroundAudioPlay.html">详情</a></li><li>新增 API <code>ap.offBackgroundAudioPause()</code> 移除音乐暂停事件监听。<a href="media/audio/offBackgroundAudioPause.html">详情</a></li><li>新增 API <code>ap.offBackgroundAudioStop()</code> 移除音乐停止事件监听。<a href="media/audio/offBackgroundAudioStop.html">详情</a></li><p><br><strong>V0.2.1 更新日志</strong> 2017-02-21<br></p><li>新增 API <code>ap.onBackgroundAudioPlay()</code> 音乐播放事件。<a href="media/audio/onBackgroundAudioPlay.html">详情</a></li><li>新增 API <code>ap.onBackgroundAudioPause()</code> 音乐暂停事件。<a href="media/audio/onBackgroundAudioPause.html">详情</a></li><li>新增 API <code>ap.onBackgroundAudioStop()</code> 音乐停止事件。<a href="media/audio/onBackgroundAudioPause.html">详情</a></li><p><br><strong>V0.2.0 更新日志</strong> 2017-02-16<br></p><li>修复 页面导航类 API 在跳转时携带的 data 中有 Boolean 类型值丢失的问题。</li><li>更新 API <code>ap.share()</code> ，增加 <code>showToolBar</code> 参数。<a href="ui/share/share.html">详情</a></li><li>新增 API <code>ap.hideToast()</code>，隐藏 toast。<a href="ui/notice/hideToast.html">详情</a></li><li>新增 API <code>ap.openInBrowser()</code>，在浏览器打开网页。<a href="navigation/window/openInBrowser.html">详情</a></li><li>新增 API <code>ap.openLocation()</code>，使用支付宝内置地图查看位置。<a href="location/open/openLocation.html">详情</a></li><li>新增 API <code>ap.showPopMenu()</code>，在右上角显示弹出的下拉菜单。<a href="ui/navigationbar/showPopMenu.html">详情</a></li><li>新增 API <code>ap.setOptionButton()</code>，设置导航栏右侧按钮。<a href="ui/navigationbar/setOptionButton.html">详情</a></li><li>新增 API <code>ap.showOptionButton()</code>，显示导航栏右侧按钮。<a href="ui/navigationbar/showOptionButton.html">详情</a></li><li>新增 API <code>ap.hideOptionButton()</code>，隐藏导航栏右侧按钮。<a href="ui/navigationbar/hideOptionButton.html">详情</a></li><li>新增 API <code>ap.showBackButton()</code>，显示导航栏左侧返回按钮。<a href="ui/navigationbar/showBackButton.html">详情</a></li><li>新增 API <code>ap.hideBackButton()</code>，隐藏导航栏左侧返回按钮。<a href="ui/navigationbar/hideBackButton.html">详情</a></li><li>新增 API <code>ap.onBack()</code>，监听导航栏左侧返回按钮。<a href="navigation/event/onBack.html">详情</a></li><li>新增 API <code>ap.allowBack()</code>，设置返回按钮及返回手势开关。<a href="ui/navigationbar/allowBack.html">详情</a></li><li>整合 API <code>ap.enablePullDownRefresh()</code> 和 <code>ap.disablePullDownRefresh()</code> 为 <code>ap.allowPullDownRefresh()</code>。<a href="ui/pulldown/allowPullDownRefresh.html">详情</a></li><li>新增 API <code>ap.makePhoneCall()</code>，拨打电话。<a href="device/call/makePhoneCall.html">详情</a></li><li>新增 API <code>ap.startRecord()</code>，开始录音。<a href="media/record/startRecord.html">详情</a></li><li>新增 API <code>ap.cancelRecord()</code>，取消录音。<a href="media/record/cancelRecord.html">详情</a></li><li>新增 API <code>ap.stopRecord()</code>，停止录音。<a href="media/record/stopRecord.html">详情</a></li><li>新增 API <code>ap.playVoice()</code>，开始播放语音。<a href="media/voice/playVoice.html">详情</a></li><li>新增 API <code>ap.pauseVoice()</code>，暂停播放语音。<a href="media/voice/pauseVoice.html">详情</a></li><li>新增 API <code>ap.stopVoice()</code>，停止播放语音。<a href="media/voice/stopVoice.html">详情</a></li><li>新增 API <code>ap.playBackgroundAudio()</code> 音乐停止事件。<a href="media/audio/playBackgroundAudio.html">详情</a></li><li>新增 API <code>ap.pauseBackgroundAudio()</code> 音乐停止事件。<a href="media/audio/pauseBackgroundAudio.html">详情</a></li><li>新增 API <code>ap.seekBackgroundAudio()</code> 音乐停止事件。<a href="media/audio/seekBackgroundAudio.html">详情</a></li><li>新增 API <code>ap.stopBackgroundAudio()</code> 音乐停止事件。<a href="media/audio/stopBackgroundAudio.html">详情</a></li><li>新增 API <code>ap.getBackgroundAudioPlayerState()</code> 音乐状态信息。<a href="media/audio/getBackgroundAudioPlayerState.html">详情</a></li><p><br><strong>V0.1.2 更新日志</strong> 2017-02-03<br></p><li>更新 API <code>ap.onPullDownRefresh()</code> 新增 refreshAvailable 返回参数。<a href="event/onPullDownRefresh.html">详情</a></li><li>修复 API <code>ap.showTabBar</code> 在 Android 上不触发回调的问题。</li><li>修复 API <code>ap.datePicker</code> 在 Android 上返回的日期最后多个空格的问题。</li><a class="my-pdf-link" target="blank" href="./changelog.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.parseQueryString( queryString )" class="title-entry">ap.parseQueryString( queryString )</h1><p>把 url 中的 queryString 解析成一个对象。</p><h2 id="参数说明" class="title-entry">参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>queryString</td><td>String</td><td>否</td><td>可不填，默认解析<code>window.location.search</code></td></tr></tbody></table></div><h2 id="返回值说明" class="title-entry">返回值说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>Object</td><td>{}</td><td>queryString 解析结果。可配合 <a href="../../navigation/window/pushWindow.html">ap.pushWindow</a> 等的 data 参数一起使用</td></tr></tbody></table></div><h2 id="代码演示" class="title-entry">代码演示</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"> <span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto} </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>parseQueryString<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> params = ap.parseQueryString();
    output.innerHTML = <span class="hljs-string">'页面 URL:\n'</span> +
                       <span class="hljs-built_in">window</span>.location.href +
                       <span class="hljs-string">'\n解析结果:\n'</span> +
                       <span class="hljs-built_in">JSON</span>.stringify( params, <span class="hljs-literal">undefined</span> , <span class="hljs-string">'  '</span> );
  });

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/data/querystring/parseQueryString-demo.html?cityName=上海&amp;adCode=310100">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/data/querystring/parseQueryString-demo.html?cityName=上海&amp;adCode=310100" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./parseQueryString.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getSessionData(OPTION | keys | key, CALLBACK)" class="title-entry">ap.getSessionData(OPTION | keys | key, CALLBACK)</h1><p>读取会话级数据。可用于页面间传递数据。<br>可直接传入一个数组作为 OPTION.keys，或直接传入一个字符串，作为 OPTION.keys 数组中的某一个 key。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>keys</td><td>String Array</td><td>是</td><td>要读取的数据的 key</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>keys 相应字段对应的数据</td></tr></tbody></table></div><h2 id="代码演示" class="title-entry">代码演示</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_get"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>读取数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_set"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>写入数据并打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnSet= <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_set'</span>);
  <span class="hljs-keyword">var</span> btnGet = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_get'</span>);
  <span class="hljs-keyword">if</span> (ap.parseQueryString().for === <span class="hljs-string">'sessionData'</span>) {
    btnGet.style.display = <span class="hljs-string">'block'</span>
  } <span class="hljs-keyword">else</span> {
    btnSet.style.display = <span class="hljs-string">'block'</span>;
  }
  btnSet.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setSessionData({
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">cities</span>: [
          {
            <span class="hljs-attr">cityName</span>: <span class="hljs-string">'杭州'</span>,
            <span class="hljs-attr">adCode</span>: <span class="hljs-string">'330100'</span>,
            <span class="hljs-attr">spell</span>: <span class="hljs-string">' hangzhou'</span>
          }
        ],
        <span class="hljs-attr">provinceName</span>: <span class="hljs-string">'浙江省'</span>,
        <span class="hljs-attr">countryName</span>: <span class="hljs-string">'中国'</span>
      }
    });
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      ap.pushWindow({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'getSessionData-demo.html'</span>,
        <span class="hljs-attr">data</span>: {
          <span class="hljs-attr">for</span>: <span class="hljs-string">'sessionData'</span>
        }
      });
    },<span class="hljs-number">100</span>);
  });
  btnGet.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getSessionData(<span class="hljs-string">'cities'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
      ap.alert(res.data.cities[<span class="hljs-number">0</span>].cityName);
    })
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/data/session/getSessionData-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/data/session/getSessionData-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getSessionData.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.setSessionData(OPTION)" class="title-entry">ap.setSessionData(OPTION)</h1><p>写入会话级数据。可直接传入一个对象作为 OPTION.data 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>是</td><td>要写入的数据，每个 key/value 的组合为一个数据项</td></tr></tbody></table></div><h2 id="代码演示" class="title-entry">代码演示</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_set"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>写入数据并打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  <span class="hljs-keyword">var</span> btnSet= document.querySelector(<span class="hljs-string">'#J_btn_set'</span>);
  btnSet.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    ap.setSessionData({
      data: {
        cities: [
          {
            cityName: <span class="hljs-string">'杭州'</span>,
            adCode: <span class="hljs-string">'330100'</span>,
            spell: <span class="hljs-string">' hangzhou'</span>
          }
        ],
        provinceName: <span class="hljs-string">'浙江省'</span>,
        countryName: <span class="hljs-string">'中国'</span>
      }
    });
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
      ap.pushWindow({
        url: <span class="hljs-string">'getSessionData-demo.html'</span>,
        data: {
          <span class="hljs-keyword">for</span>: <span class="hljs-string">'sessionData'</span>
        }
      });
    },<span class="hljs-number">100</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/data/session/setSessionData-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/data/session/setSessionData-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./setSessionData.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offAccelerometerChange(CALLBACK)" class="title-entry">ap.offAccelerometerChange(CALLBACK)</h1><p>停止监听重力感应变化</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>晃晃手机试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    output.innerHTML = <span class="hljs-string">'\nx: '</span> + res.x +
                       <span class="hljs-string">'\ny: '</span> + res.y +
                       <span class="hljs-string">'\nz: '</span> + res.z;
    ap.offAccelerometerChange(handler);
  };
  ap.onAccelerometerChange(handler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/accelerometer/offAccelerometerChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/accelerometer/offAccelerometerChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offAccelerometerChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onAccelerometerChange(CALLBACK)" class="title-entry">ap.onAccelerometerChange(CALLBACK)</h1><p>监听重力感应变化</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>x</td><td>Number</td><td>X 轴</td></tr><tr><td>y</td><td>Number</td><td>Y 轴</td></tr><tr><td>z</td><td>Number</td><td>Z 轴</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>晃晃手机试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  ap.onAccelerometerChange(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    output.innerHTML = <span class="hljs-string">'\nx: '</span> + res.x +
                       <span class="hljs-string">'\ny: '</span> + res.y +
                       <span class="hljs-string">'\nz: '</span> + res.z;
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/accelerometer/onAccelerometerChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/accelerometer/onAccelerometerChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onAccelerometerChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.closeBluetoothAdapter(OPTION, CALLBACK)" class="title-entry">ap.closeBluetoothAdapter(OPTION, CALLBACK)</h1><p>关闭本机蓝牙模块</p><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>关闭失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_open"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>初始化本机蓝牙<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭本机蓝牙<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnOpen = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_open'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);

  btnOpen.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.openBluetoothAdapter({
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        <span class="hljs-keyword">if</span>(!res.isSupportBLE) {
          ap.alert(<span class="hljs-string">'抱歉，您的手机不支持 BLE'</span>);
        }
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(res.errorMessage);
      }
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.closeBluetoothAdapter({
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(res.errorMessage);
      }
    })
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/closeBluetoothAdapter-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/closeBluetoothAdapter-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./closeBluetoothAdapter.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.connectBLEDevice(OPTION | deviceId, CALLBACK)" class="title-entry">ap.connectBLEDevice(OPTION | deviceId, CALLBACK)</h1><p>连接低功耗蓝牙设备。可直接传入一个字符串作为 OPTION.deviceId。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>链接失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>连接BLE设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//此处 deviceId 只是示例，并非真正的设备 id</span>
    ap.connectBLEDevice({
      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'123456789'</span>,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'链接成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(<span class="hljs-string">'链接失败-'</span> + res.errorMessage);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/connectBLEDevice-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/connectBLEDevice-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./connectBLEDevice.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.disconnectBLEDevice(OPTION | deviceId, CALLBACK)" class="title-entry">ap.disconnectBLEDevice(OPTION | deviceId, CALLBACK)</h1><p>断开与低功耗蓝牙设备的连接。可直接传入一个字符串作为 OPTION.deviceId。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>断开失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>断开BLE设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//此处 deviceId 只是示例，并非真正的设备 id</span>
    ap.disconnectBLEDevice({
      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'123456789'</span>,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'成功断开'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(<span class="hljs-string">'断开失败-'</span> + res.errorMessage);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/disconnectBLEDevice-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/disconnectBLEDevice-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./disconnectBLEDevice.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getBLEDeviceCharacteristics(OPTION | deviceId, CALLBACK)" class="title-entry">ap.getBLEDeviceCharacteristics(OPTION | deviceId, CALLBACK)</h1><p>获取蓝牙设备所有 characteristic（特征值）。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id，参考 device 对象</td></tr><tr><td>serviceId</td><td>String</td><td>是</td><td>蓝牙服务 uuid</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>characteristics</td><td>Array</td><td>设备特征值列表</td></tr></tbody></table></div><h3 id="characteristic 对象" class="title-entry">characteristic 对象</h3><p>蓝牙设备 characteristic （特征值）信息</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>characteristicId</td><td>String</td><td>蓝牙设备特征值的 uuid</td></tr><tr><td>serviceId</td><td>String</td><td>蓝牙设备特征值对应服务的 uuid</td></tr><tr><td>value</td><td>Hex String</td><td>蓝牙设备特征值对应的16进制值</td></tr><tr><td>properties</td><td>Object</td><td>该特征值支持的操作类型</td></tr></tbody></table></div><h3 id="properties 对象" class="title-entry">properties 对象</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>read</td><td>boolean</td><td>该特征值是否支持 read 操作</td></tr><tr><td>write</td><td>boolean</td><td>该特征值是否支持 write 操作</td></tr><tr><td>notify</td><td>boolean</td><td>该特征值是否支持 notify 操作</td></tr><tr><td>indicate</td><td>boolean</td><td>该特征值是否支持 indicate 操作</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>获取失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取设备特征值<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBLEDeviceCharacteristics({
      <span class="hljs-comment">// 这里的 deviceId 需要在 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取</span>
      deviceId: deviceId,
      <span class="hljs-comment">// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取</span>
      serviceId: serviceId,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'此服务共有'</span> + res.characteristics.length + <span class="hljs-string">'个特征值'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.toast(<span class="hljs-string">'获取失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/getBLEDeviceCharacteristics-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/getBLEDeviceCharacteristics-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getBLEDeviceCharacteristics.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getBLEDeviceServices(OPTION | deviceId, CALLBACK)" class="title-entry">ap.getBLEDeviceServices(OPTION | deviceId, CALLBACK)</h1><p>获取蓝牙设备所有 service（服务）。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id，参考 device 对象</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>services</td><td>Array</td><td>service 对象，详见下表</td></tr></tbody></table></div><h3 id="service对象" class="title-entry">service对象</h3><p>蓝牙设备service(服务)信息</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>serviceId</td><td>String</td><td>蓝牙设备服务的 uuid</td></tr><tr><td>isPrimary</td><td>Boolean</td><td>该服务是否为主服务</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>获取失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取设备服务<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBLEDeviceServices({
      <span class="hljs-comment">// 这里的 deviceId 需要在 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取</span>
      deviceId: deviceId,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'此设备共有'</span> + res.services.length + <span class="hljs-string">'个服务'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.toast(<span class="hljs-string">'获取失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/getBLEDeviceServices-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/getBLEDeviceServices-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getBLEDeviceServices.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getBluetoothAdapterState(OPTION, CALLBACK)" class="title-entry">ap.getBluetoothAdapterState(OPTION, CALLBACK)</h1><p>获取本机蓝牙模块状态</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>discovering</td><td>Boolean</td><td>是否正在搜索设备</td></tr><tr><td>available</td><td>Boolean</td><td>蓝牙模块是否可用(需支持 BLE 并且蓝牙是打开状态)</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>获取失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取本机蓝牙状态<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBluetoothAdapterState({
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        <span class="hljs-keyword">if</span>(!res.available) {
          ap.alert(<span class="hljs-string">'抱歉，您的手机蓝牙暂不可用'</span>);
        }
        <span class="hljs-keyword">if</span>(res.discovering) {
          ap.showToast(<span class="hljs-string">'正在搜索蓝牙设备'</span>);
        }
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(res.errorMessage);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/getBluetoothAdapterState-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/getBluetoothAdapterState-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getBluetoothAdapterState.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getBluetoothDevices(OPTION | services | service, CALLBACK)" class="title-entry">ap.getBluetoothDevices(OPTION | services | service, CALLBACK)</h1><p>获取所有已发现的蓝牙设备，包括已经和本机处于连接状态的设备。可直接传入一个数组作为 OPTION.services 参数。也可直接传入一个字符串作为 OPTION.services 的第一项。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>services</td><td>Array</td><td>否</td><td>蓝牙设备主 service 的 uuid 列表</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>devices</td><td>Array</td><td>service 的 uuid 对应的(如果有传入 services)设备列表</td></tr></tbody></table></div><h3 id="device对象说明" class="title-entry">device对象说明</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>deviceName</td><td>String</td><td>蓝牙设备名称，某些设备可能没有</td></tr><tr><td>localName</td><td>String</td><td>广播设备名称</td></tr><tr><td>deviceId</td><td>String</td><td>设备 Id</td></tr><tr><td>RSSI</td><td>Number</td><td>设备信号强度</td></tr><tr><td>advertisData</td><td>Hex String</td><td>设备的广播内容</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>获取失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取已发现的蓝牙设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBluetoothDevices({
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'共发现'</span> + res.devices.length + <span class="hljs-string">'个设备'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/getBluetoothDevices-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/getBluetoothDevices-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getBluetoothDevices.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getConnectedBluetoothDevices(OPTION | services | service, CALLBACK)" class="title-entry">ap.getConnectedBluetoothDevices(OPTION | services | service, CALLBACK)</h1><p>根据 service 的 uuid 获取处于已连接状态的设备。可直接传入一个数组作为 OPTION.services 参数。也可直接传入一个字符串作为 OPTION.services 的第一项。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>services</td><td>Array</td><td>否</td><td>蓝牙设备主 service 的 uuid 列表</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>devices</td><td>Array</td><td>service 的 uuid 对应的(如果有传入 services)设备列表</td></tr></tbody></table></div><h3 id="device对象说明" class="title-entry">device对象说明</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>deviceName</td><td>String</td><td>蓝牙设备名称，某些设备可能没有</td></tr><tr><td>localName</td><td>String</td><td>广播设备名称</td></tr><tr><td>deviceId</td><td>String</td><td>设备 Id</td></tr><tr><td>RSSI</td><td>Number</td><td>设备信号强度</td></tr><tr><td>advertisData</td><td>Hex String</td><td>设备的广播内容</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>获取失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取已连接的蓝牙设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getConnectedBluetoothDevices({
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'共发现'</span> + res.devices.length + <span class="hljs-string">'个设备'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/getConnectedBluetoothDevices-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/getConnectedBluetoothDevices-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getConnectedBluetoothDevices.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.notifyBLECharacteristicValueChange(OPTION, CALLBACK)" class="title-entry">ap.notifyBLECharacteristicValueChange(OPTION, CALLBACK)</h1><p>启用低功耗蓝牙设备特征值变化时的 notify 功能。注意：必须设备的特征值支持notify才可以成功调用，具体参照 characteristic 的 properties 属性 另外，必须先启用notify才能监听到设备 characteristicValueChange 事件。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id，参考 device 对象</td></tr><tr><td>serviceId</td><td>String</td><td>是</td><td>蓝牙特征值对应 service 的 uuid</td></tr><tr><td>characteristicId</td><td>String</td><td>是</td><td>蓝牙特征值的 uuid</td></tr><tr><td>descriptorId</td><td>String</td><td>否</td><td>notify 的 descriptor 的 uuid</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>启动失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>启用 notify 功能<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.notifyBLECharacteristicValueChange({
      <span class="hljs-comment">// 这里的 deviceId 需要在 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取</span>
      deviceId: deviceId,
      <span class="hljs-comment">// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取</span>
      serviceId: serviceId,
      <span class="hljs-comment">// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取</span>
      characteristicId: characteristicId,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'启动通知成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.toast(<span class="hljs-string">'启动通知失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/notifyBLECharacteristicValueChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/notifyBLECharacteristicValueChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./notifyBLECharacteristicValueChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBLECharacteristicValueChange(CALLBACK)" class="title-entry">ap.offBLECharacteristicValueChange(CALLBACK)</h1><p>移除低功耗蓝牙设备的特征值变化事件的监听。</p><a class="my-pdf-link" target="blank" href="./offBLECharacteristicValueChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBLEConnectionStateChanged(CALLBACK)" class="title-entry">ap.offBLEConnectionStateChanged(CALLBACK)</h1><p>移除低功耗蓝牙连接的错误事件的监听。</p><a class="my-pdf-link" target="blank" href="./offBLEConnectionStateChanged.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBluetoothAdapterStateChange(CALLBACK)" class="title-entry">ap.offBluetoothAdapterStateChange(CALLBACK)</h1><p>移除本机蓝牙状态变化的事件的监听。</p><a class="my-pdf-link" target="blank" href="./offBluetoothAdapterStateChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBluetoothDeviceFound(CALLBACK)" class="title-entry">ap.offBluetoothDeviceFound(CALLBACK)</h1><p>移除寻找到新的蓝牙设备事件的监听。</p><a class="my-pdf-link" target="blank" href="./offBluetoothDeviceFound.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBLECharacteristicValueChange(CALLBACK)" class="title-entry">ap.onBLECharacteristicValueChange(CALLBACK)</h1><p>监听低功耗蓝牙设备的特征值变化的事件。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>蓝牙设备 id，参考 device 对象</td></tr><tr><td>serviceId</td><td>String</td><td>特征值所属服务 uuid</td></tr><tr><td>characteristicId</td><td>String</td><td>特征值 uuid</td></tr><tr><td>value</td><td>Hex String</td><td>特征值最新的16进制值</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>启用 notify 功能<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  ap.onBLECharacteristicValueChange(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'特征值变化：'</span> + value;
    ap.showToast(msg);
  });
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.notifyBLECharacteristicValueChange({
      <span class="hljs-comment">// 这里的 deviceId 需要在 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取</span>
      deviceId: deviceId,
      <span class="hljs-comment">// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取</span>
      serviceId: serviceId,
      <span class="hljs-comment">// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取</span>
      characteristicId: characteristicId,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'启动通知成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.toast(<span class="hljs-string">'启动通知失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/onBLECharacteristicValueChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/onBLECharacteristicValueChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onBLECharacteristicValueChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBLEConnectionStateChanged(CALLBACK)" class="title-entry">ap.onBLEConnectionStateChanged(CALLBACK)</h1><p>监听低功耗蓝牙连接的错误事件，包括设备丢失，连接异常断开等等。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>蓝牙设备 id，参考 device 对象</td></tr><tr><td>connected</td><td>Boolean</td><td>连接目前的状态</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>监听蓝牙设备事件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);

  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.onBLEConnectionStateChanged(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'设备 id：'</span> + res.deviceId +
                <span class="hljs-string">'是否链接：'</span> + res.connected;
      ap.showToast(msg);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/onBLEConnectionStateChanged-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/onBLEConnectionStateChanged-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onBLEConnectionStateChanged.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBluetoothAdapterStateChange(CALLBACK)" class="title-entry">ap.onBluetoothAdapterStateChange(CALLBACK)</h1><p>监听本机蓝牙状态变化的事件。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>available</td><td>Boolean</td><td>蓝牙模块是否可用</td></tr><tr><td>discovering</td><td>Boolean</td><td>蓝牙模块是否处于搜索状态</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>监听本机蓝牙状态<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);

  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.onBluetoothAdapterStateChange(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'蓝牙是否可用：'</span> + res.available + 
                <span class="hljs-string">'是否在搜索：'</span> + discovering;
      ap.alert(msg);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/onBluetoothAdapterStateChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/onBluetoothAdapterStateChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onBluetoothAdapterStateChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBluetoothDeviceFound(CALLBACK)" class="title-entry">ap.onBluetoothDeviceFound(CALLBACK)</h1><p>寻找到新的蓝牙设备时触发此事件。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>devices</td><td>Array</td><td>新搜索到的设备列表。device 对象说明见下表</td></tr></tbody></table></div><p><strong>device 对象说明</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>deviceName</td><td>String</td><td>蓝牙设备名称，某些设备可能没有</td></tr><tr><td>localName</td><td>String</td><td>广播设备名称</td></tr><tr><td>deviceId</td><td>String</td><td>设备 Id</td></tr><tr><td>RSSI</td><td>Number</td><td>设备信号强度</td></tr><tr><td>advertisData</td><td>Hex String</td><td>设备的广播内容</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始搜索周围蓝牙设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  ap.onBluetoothDeviceFound(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    ap.showToast(<span class="hljs-string">'搜索到'</span> + res.devices.length + <span class="hljs-string">'个设备'</span>);
  });
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//此处 service 只是示例，并非真正的设备服务 id</span>
    ap.startBluetoothDevicesDiscovery(<span class="hljs-string">'0000fdd7-0000-1011-8004-00987f9b34fb'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/onBluetoothDeviceFound-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/onBluetoothDeviceFound-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onBluetoothDeviceFound.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.openBluetoothAdapter(OPTION, CALLBACK)" class="title-entry">ap.openBluetoothAdapter(OPTION, CALLBACK)</h1><p>初始化本机蓝牙模块。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>isSupportBLE</td><td>Boolean</td><td>是否支持 BLE</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>蓝牙未打开</td></tr><tr><td>13</td><td>与系统服务的链接暂时丢失</td></tr><tr><td>14</td><td>未授权支付宝使用蓝牙功能</td></tr><tr><td>15</td><td>未知错误</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>初始化本机蓝牙<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.openBluetoothAdapter({
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        <span class="hljs-keyword">if</span>(!res.isSupportBLE) {
          ap.alert(<span class="hljs-string">'抱歉，您的手机不支持 BLE'</span>);
        }
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(res.errorMessage);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/openBluetoothAdapter-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/openBluetoothAdapter-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./openBluetoothAdapter.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.readBLECharacteristicValue(OPTION, CALLBACK)" class="title-entry">ap.readBLECharacteristicValue(OPTION, CALLBACK)</h1><p>读取低功耗蓝牙设备特征值中的数据。调用后在 ap.onBLECharacteristicValueChange() 事件中接收数据返回。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id，参考 device 对象</td></tr><tr><td>serviceId</td><td>String</td><td>是</td><td>蓝牙特征值对应 service 的 uuid</td></tr><tr><td>characteristicId</td><td>String</td><td>是</td><td>蓝牙特征值的 uuid</td></tr><tr><td>descriptorId</td><td>String</td><td>否</td><td>notify 的 descriptor 的 uuid</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>characteristic</td><td>Object</td><td>设备特征值信息</td></tr></tbody></table></div><h3 id="characteristic对象" class="title-entry">characteristic对象</h3><p>蓝牙设备characteristic(特征值)信息</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>characteristicId</td><td>String</td><td>蓝牙设备特征值的 uuid</td></tr><tr><td>serviceId</td><td>String</td><td>蓝牙设备特征值对应服务的 uuid</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>读取数据失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>读取设备特征值<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.readBLECharacteristicValue({
      <span class="hljs-comment">// 这里的 deviceId 需要在 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取</span>
      deviceId: deviceId,
      <span class="hljs-comment">// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取</span>
      serviceId: serviceId,
      <span class="hljs-comment">// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取</span>
      characteristicId: characteristicId,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'正在读取，请在 ap.onBLECharacteristicValueChange 事件中接收'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.toast(<span class="hljs-string">'读取数据指令失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/readBLECharacteristicValue-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/readBLECharacteristicValue-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./readBLECharacteristicValue.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.startBluetoothDevicesDiscovery(OPTION | services | service, CALLBACK)" class="title-entry">ap.startBluetoothDevicesDiscovery(OPTION | services | service, CALLBACK)</h1><p>开始搜寻附近的蓝牙外围设备。搜索结果将在 bluetoothDeviceFound 事件中返回。可直接传入一个数组作为 OPTION.services 参数。也可直接传入一个字符串作为 OPTION.services 的第一项。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>services</td><td>Array</td><td>否</td><td>蓝牙设备主 service 的 uuid 列表</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>services</td><td>Array</td><td>扫码所得数据</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>开始搜索失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始搜索周围蓝牙设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  ap.onBluetoothDeviceFound(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    ap.showToast(<span class="hljs-string">'搜索到'</span> + res.devices.length + <span class="hljs-string">'个设备'</span>);
  });
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//此处 service 只是示例，并非真正的设备服务 id</span>
    ap.startBluetoothDevicesDiscovery({
      <span class="hljs-attr">services</span>: [<span class="hljs-string">'0000fdd7-0000-1011-8004-00987f9b34fb'</span>]
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/startBluetoothDevicesDiscovery-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/startBluetoothDevicesDiscovery-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./startBluetoothDevicesDiscovery.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.stopBluetoothDevicesDiscovery()" class="title-entry">ap.stopBluetoothDevicesDiscovery()</h1><p>停止搜寻附近的蓝牙外围设备。</p><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>停止搜索失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_start"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始搜索周围蓝牙设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_stop"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止搜索周围蓝牙设备<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnStart = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_start'</span>);
  <span class="hljs-keyword">var</span> btnStop = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_stop'</span>);
  ap.onBluetoothDeviceFound(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    ap.showToast(<span class="hljs-string">'搜索到'</span> + res.devices.length + <span class="hljs-string">'个设备'</span>);
  });
  btnStart.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//此处 service 只是示例，并非真正的设备服务 id</span>
    ap.startBluetoothDevicesDiscovery(<span class="hljs-string">'0000fdd7-0000-1011-8004-00987f9b34fb'</span>);
  });
  btnStop.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBluetoothDevicesDiscovery();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/stopBluetoothDevicesDiscovery-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/stopBluetoothDevicesDiscovery-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./stopBluetoothDevicesDiscovery.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.writeBLECharacteristicValue(OPTION, CALLBACK)" class="title-entry">ap.writeBLECharacteristicValue(OPTION, CALLBACK)</h1><p>向低功耗蓝牙设备特征值中写入数据。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>deviceId</td><td>String</td><td>是</td><td>蓝牙设备 id，参考 device 对象</td></tr><tr><td>serviceId</td><td>String</td><td>是</td><td>蓝牙特征值对应 service 的 uuid</td></tr><tr><td>characteristicId</td><td>String</td><td>是</td><td>蓝牙特征值的 uuid</td></tr><tr><td>descriptorId</td><td>String</td><td>否</td><td>notify 的 descriptor 的 uuid</td></tr><tr><td>value</td><td>Hex String</td><td>是</td><td>蓝牙设备特征值对应的值，16进制字符串</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>写入数据失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>向设备写入特征值<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.writeBLECharacteristicValue({
      <span class="hljs-comment">// 这里的 deviceId 需要在上面的 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取</span>
      deviceId: deviceId,
      <span class="hljs-comment">// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取</span>
      serviceId: serviceId,
      <span class="hljs-comment">// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取</span>
      characteristicId: characteristicId,
      <span class="hljs-comment">// 这里的value是 16 进制字符串</span>
      value: value,
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(<span class="hljs-string">'写入数据成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.toast(<span class="hljs-string">'写入数据失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/bluetooth/writeBLECharacteristicValue-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/bluetooth/writeBLECharacteristicValue-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./writeBLECharacteristicValue.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.makePhoneCall(OPTION | number)" class="title-entry">ap.makePhoneCall(OPTION | number)</h1><p>拨打电话。可直接传入一个字符串作为 OPTION.number 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>number</td><td>String</td><td>是</td><td>电话号码</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>拨打支付宝客服<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.makePhoneCall(<span class="hljs-string">'95188'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/call/makePhoneCall-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/call/makePhoneCall-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./makePhoneCall.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offCompassChange(CALLBACK)" class="title-entry">ap.offCompassChange(CALLBACK)</h1><p>停止监听罗盘数据变化</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>转转手机试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    output.innerHTML = <span class="hljs-string">'direction: '</span> + res.direction;
    ap.offCompassChange(handler);
  };
  ap.onCompassChange(handler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/compass/offCompassChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/compass/offCompassChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offCompassChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onCompassChange(CALLBACK)" class="title-entry">ap.onCompassChange(CALLBACK)</h1><p>监听罗盘数据变化</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>direction</td><td>Number</td><td>方向度数</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>转转手机试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  ap.onCompassChange(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
    output.innerHTML = <span class="hljs-string">'direction: '</span> + res.direction
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/compass/onCompassChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/compass/onCompassChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onCompassChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getNetworkType(OPTION, CALLBACK)" class="title-entry">ap.getNetworkType(OPTION, CALLBACK)</h1><p>获取当前网络状态</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>networkAvailable</td><td>Boolean</td><td>网络是否可用</td></tr><tr><td>networkType</td><td>String</td><td>网络类型值 UNKNOWN / NOTREACHABLE / WIFI / 3G / 2G / 4G / WWAN</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_network"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取当前网络类型<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnNetwork = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_network'</span>);
  btnNetwork.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getNetworkType(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'网络'</span> + (res.networkAvailable ? <span class="hljs-string">'畅通'</span> : <span class="hljs-string">'不通'</span>),
        <span class="hljs-attr">content</span>: <span class="hljs-string">'网络类型: '</span> + res.networkType
      });
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/network/getNetworkType-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/network/getNetworkType-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getNetworkType.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offNetworkChange(CALLBACK)" class="title-entry">ap.offNetworkChange(CALLBACK)</h1><p>停止监听网络环境发生变化</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>切换网络试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
    ap.alert(<span class="hljs-string">'当前网络类型：'</span> + res.networkType);
    ap.offNetworkChange(handler);
  };
  ap.onNetworkChange(handler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/network/offNetworkChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/network/offNetworkChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offNetworkChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onNetworkChange(CALLBACK)" class="title-entry">ap.onNetworkChange(CALLBACK)</h1><p>监听网络环境发生变化</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>和<code>ap.getNetworkType()</code>返回值一致</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>networkAvailable</td><td>Boolean</td><td>网络是否可用</td></tr><tr><td>networkType</td><td>String</td><td>网络类型值 UNKNOWN / NOTREACHABLE / WIFI / 3G / 2G / 4G / WWAN</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>切换网络试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  ap.onNetworkChange(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
    ap.alert(<span class="hljs-string">'当前网络类型：'</span> + res.networkType);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/network/onNetworkChange-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/network/onNetworkChange-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>3G切换到4G时系统不会发出网络切换通知。 4G切到3G时，会先从4G跳到2G，然后再从2G跳3G，因此会通知两次</li></ul><a class="my-pdf-link" target="blank" href="./onNetworkChange.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.scan(OPTION | type, CALLBACK)" class="title-entry">ap.scan(OPTION | type, CALLBACK)</h1><p>调用扫一扫功能</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>否</td><td>扫描目标类型，支持 qr / bar，相应扫码选框会不同，默认 qr</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>String</td><td>扫码所得数据</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>用户取消</td></tr><tr><td>11</td><td>操作失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_scanQR"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>扫一扫二维码<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_scanBAR"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>扫一扫条形码<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnScanQR = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_scanQR'</span>);
  <span class="hljs-keyword">var</span> btnScanBAR = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_scanBAR'</span>);
  btnScanQR.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.scan(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(res.code);
    });
  });
  btnScanBAR.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.scan({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'bar'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(res.code);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/scan/scan-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/scan/scan-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./scan.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.watchShake(OPTION, CALLBACK)" class="title-entry">ap.watchShake(OPTION, CALLBACK)</h1><p>摇一摇功能。每次调用API，在摇一摇手机后触发回调，如需再次监听需要再次调用这个API。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>摇一摇手机试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchShake</span><span class="hljs-params">()</span></span>{
    ap.watchShake(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
      ap.confirm({
        content: <span class="hljs-string">'亲，还摇不？'</span>,
        cancelButtonText: <span class="hljs-string">'不摇了'</span>,
        confirmButtonText: <span class="hljs-string">'继续摇'</span>
      }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
        <span class="hljs-keyword">if</span> (res.confirm) {
          <span class="hljs-comment">//再次调用才能继续监听摇一摇动作</span>
          watchShake();
        }
      });
    });
  })();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/shake/watchShake-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/shake/watchShake-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./watchShake.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.vibrate()" class="title-entry">ap.vibrate()</h1><p>调用震动功能</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_vibrate"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>点击感受震动<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnVibrate = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_vibrate'</span>);
  btnVibrate.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.vibrate();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/device/vibrate/vibrate-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/device/vibrate/vibrate-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./vibrate.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h2 id="关于 AlipayJSAPI" class="title-entry">关于 AlipayJSAPI</h2><p>AlipayJSAPI 提供丰富的支付宝原生 API，可以方便调用支付宝提供的能力，达到媲美原生应用的体验，如页面跳转，支付功能等。</p><h3 id="安装使用" class="title-entry">安装使用</h3><ul><li><strong>页面引入：</strong><br><code>&lt;script src=&quot;https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.min.js&quot;&gt;&lt;/script&gt;</code></li></ul><p></p><h3 id="快速开始" class="title-entry">快速开始</h3><ul><li><strong>Promise 方式：</strong></li></ul><p></p><div class="code-wrap"><pre class="hljs"><code>ap.chooseImage()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
    <span class="hljs-keyword">return</span> ap.uploadFile({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'[请使用自己服务器地址]'</span>,
      <span class="hljs-attr">fileType</span>: <span class="hljs-string">'image'</span>,
      <span class="hljs-attr">fileName</span>: <span class="hljs-string">'file'</span>,
      <span class="hljs-attr">filePath</span>: result.apFilePaths[<span class="hljs-number">0</span>]
    });
  })
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
    <span class="hljs-keyword">return</span> ap.alert(<span class="hljs-string">'上传成功'</span>);
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'上传失败'</span>);
  });
</code></pre></div><ul><li><strong>回调方式：</strong></li></ul><p></p><div class="code-wrap"><pre class="hljs"><code>ap.chooseImage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
  <span class="hljs-keyword">if</span>(res.apFilePaths &amp;&amp; res.apFilePaths.length &gt; <span class="hljs-number">0</span>) {
    ap.uploadFile({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'[请使用自己服务器地址]'</span>,
      <span class="hljs-attr">fileType</span>: <span class="hljs-string">'image'</span>,
      <span class="hljs-attr">fileName</span>: <span class="hljs-string">'file'</span>,
      <span class="hljs-attr">filePath</span>: res.apFilePaths[<span class="hljs-number">0</span>],
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        ap.alert(<span class="hljs-string">'上传成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        ap.showToast(<span class="hljs-string">'上传失败'</span>);
      }
    });
  }
});
</code></pre></div><div class="code-wrap"><pre class="hljs"><code>ap.confirm(<span class="hljs-string">'Hello AlipayJSAPI!'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
  ap.showToast(result.confirm ? <span class="hljs-string">'确定'</span> : <span class="hljs-string">'取消'</span>);
});
</code></pre></div><h2 id="其他说明" class="title-entry">其他说明</h2><h3 id="接口约定" class="title-entry">接口约定</h3><ul><li>ap.on 开头的 API 是监听某个事件发生的接口，接受一个 CALLBACK 函数作为参数。当该事件触发时，会调用 CALLBACK 函数。</li><li>ap.off 开头的 API 是移除相应事件监听函数的接口，若传入事件注册（ap.on）时的 CALLBACK 函数，即移除指定的监听函数。若不传入则移除此事件所有监听函数。</li><li>如未特殊约定，其他 API 接口都接收两个参数，一个 Object 类型的 OPTION 作为入参，OPTION 中可以指定 success / fail / complete 来接收接口调用结果；还有一个可选参数是 Function 类型的 CALLBACK，作为回调函数等同于 OPTION.complete。接口参数在文档里没有明确定义时，则无须传入。</li><li>回调函数的参数始终是 Object 类型，会返回接口调用的结果。注意，并不是每个接口都有回调函数，可在具体接口文档里查看是否定义。</li><li>有回调函数的接口均支持 Promise 风格调用。</li></ul><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>success</td><td>Function</td><td>否</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td>Function</td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>Function</td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table></div><h3 id="错误约定" class="title-entry">错误约定</h3><p>AlipayJSAPI 调用出错时 CALLBACK 回调函数的参数里会包含一个特殊的字段 error（Number 类型），作为 API 调用的错误码，示例:</p><div class="code-wrap"><pre class="hljs"><code>{
  <span class="hljs-attr">error</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">errorMessage</span>: <span class="hljs-string">'接口不存在'</span>
}
</code></pre></div><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>接口不存在</td></tr><tr><td>2</td><td>参数无效</td></tr><tr><td>3</td><td>发生未知错误</td></tr><tr><td>4</td><td>接口无权限</td></tr></tbody></table></div><p></p><a class="my-pdf-link" target="blank" href="./index.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getLocation(CALLBACK)" class="title-entry">ap.getLocation(CALLBACK)</h1><p>获取用户当前的地理位置信息</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>cacheTimeout</td><td>Number</td><td>否</td><td>钱包经纬度定位缓存过期时间，单位秒。默认 30s。使用缓存会加快定位速度，缓存过期会重新定位</td></tr><tr><td>type</td><td>Number</td><td>否</td><td>支持 0：详细逆地理编码，带周边信；1：逆地理编码到城市；2：仅获取经纬度、速度和精度。默认为 2</td></tr><tr><td>timeout</td><td>Number</td><td>否</td><td>定位超时失败回调时间，单位秒。默认10s</td></tr><tr><td>bizType</td><td>String</td><td>否</td><td>自定义业务类型</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><ul><li>当 type 为 0 时，会返回下面全部字段。</li></ul><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>longitude</td><td>String</td><td>经度</td></tr><tr><td>latitude</td><td>String</td><td>纬度</td></tr><tr><td>accuracy</td><td>Number</td><td>精度，单位米</td></tr><tr><td>speed</td><td>Number</td><td>速度，单位毫秒</td></tr><tr><td>country</td><td>String</td><td>国家名</td></tr><tr><td>countryCode</td><td>string</td><td>国家编号</td></tr><tr><td>province</td><td>String</td><td>省份名</td></tr><tr><td>city</td><td>String</td><td>城市名</td></tr><tr><td>cityCode</td><td>String</td><td>城市编码</td></tr><tr><td>adCode</td><td>String</td><td>区域编码</td></tr><tr><td>streetNumber</td><td>Object</td><td>街道门牌信息，结构是：{street, number}</td></tr><tr><td>pois</td><td>Object Array</td><td>定位点附近的 POI 信息，结构是：{name, address}</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>GPS打开，但定位失败</td></tr><tr><td>13</td><td>获取地理位置信息失</td></tr><tr><td>14</td><td>定位超时</td></tr><tr><td>15</td><td>网络错误</td></tr><tr><td>16</td><td>GPS未打开或用户未授权</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_location"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取当前位置信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnLocation = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_location'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  btnLocation.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getLocation(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/location/get/getLocation-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/location/get/getLocation-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><a class="my-pdf-link" target="blank" href="./getLocation.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.openLocation(OPTION, CALLBACK)" class="title-entry">ap.openLocation(OPTION, CALLBACK)</h1><p>使用支付宝内置地图查看位置。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>longitude</td><td>String</td><td>是</td><td>经度</td></tr><tr><td>latitude</td><td>String</td><td>是</td><td>纬度</td></tr><tr><td>name</td><td>String</td><td>否</td><td>位置名称</td></tr><tr><td>address</td><td>String</td><td>否</td><td>地址的详细说明</td></tr><tr><td>scale</td><td>Number</td><td>否</td><td>缩放比例，范围3~19，默认为15</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>openLocation<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.openLocation({
      <span class="hljs-attr">longitude</span>: <span class="hljs-string">'121.549697'</span>,
      <span class="hljs-attr">latitude</span>: <span class="hljs-string">'31.227250'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'支付宝'</span>,
      <span class="hljs-attr">address</span>: <span class="hljs-string">'杨高路地铁站'</span>
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/location/open/openLocation-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/location/open/openLocation-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./openLocation.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getBackgroundAudioPlayerState(CALLBACK)" class="title-entry">ap.getBackgroundAudioPlayerState(CALLBACK)</h1><p>使用后台播放器播放音乐。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>status</td><td>Number</td><td>音乐播放状态（2：没有音乐在播放，1：播放中，0：暂停中）</td></tr><tr><td>duration</td><td>Number</td><td>音乐总时长，单位秒</td></tr><tr><td>currentPosition</td><td>Number</td><td>当前播放位置，单位秒</td></tr><tr><td>downloadPercent</td><td>Number</td><td>缓冲百分比</td></tr><tr><td>url</td><td>String</td><td>音乐链接地址</td></tr></tbody></table></div><h2 id="错误码描述" class="title-entry">错误码描述</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>失败时会有对应描述</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/getBackgroundAudioPlayerState-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/getBackgroundAudioPlayerState-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口1 0.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./getBackgroundAudioPlayerState.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBackgroundAudioPause(CALLBACK)" class="title-entry">ap.offBackgroundAudioPause(CALLBACK)</h1><p>停止监听音乐暂停事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnOn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开启事件监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnOff"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭事件监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> btnOn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnOn'</span>);
  <span class="hljs-keyword">var</span> btnOff = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnOff'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  <span class="hljs-keyword">var</span> handlerPlay = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'开始播放'</span>)
  };
  <span class="hljs-keyword">var</span> handlerPause = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'暂停播放'</span>)
  };
  <span class="hljs-keyword">var</span> handlerStop = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'停止播放'</span>)
  };

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">logo</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/SKMiZgNnNTQNdJWzQfdI.JPEG'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
  btnOn.addEventListener(<span class="hljs-string">'click'</span>, onEvents);
  btnOff.addEventListener(<span class="hljs-string">'click'</span>, offEvents);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onEvents</span>(<span class="hljs-params"></span>) </span>{
    ap.onBackgroundAudioPlay(handlerPlay);
    ap.onBackgroundAudioPause(handlerPause);
    ap.onBackgroundAudioStop(handlerStop);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">offEvents</span>(<span class="hljs-params"></span>) </span>{
    ap.offBackgroundAudioPlay(handlerPlay);
    ap.offBackgroundAudioPause(handlerPause);
    ap.offBackgroundAudioStop(handlerStop);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/offBackgroundAudioPause-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/offBackgroundAudioPause-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口10.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./offBackgroundAudioPause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBackgroundAudioPlay(CALLBACK)" class="title-entry">ap.offBackgroundAudioPlay(CALLBACK)</h1><p>停止监听音乐播放事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnOn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开启事件监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnOff"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭事件监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> btnOn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnOn'</span>);
  <span class="hljs-keyword">var</span> btnOff = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnOff'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  <span class="hljs-keyword">var</span> handlerPlay = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'开始播放'</span>)
  };
  <span class="hljs-keyword">var</span> handlerPause = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'暂停播放'</span>)
  };
  <span class="hljs-keyword">var</span> handlerStop = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'停止播放'</span>)
  };

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">logo</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/SKMiZgNnNTQNdJWzQfdI.JPEG'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
  btnOn.addEventListener(<span class="hljs-string">'click'</span>, onEvents);
  btnOff.addEventListener(<span class="hljs-string">'click'</span>, offEvents);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onEvents</span>(<span class="hljs-params"></span>) </span>{
    ap.onBackgroundAudioPlay(handlerPlay);
    ap.onBackgroundAudioPause(handlerPause);
    ap.onBackgroundAudioStop(handlerStop);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">offEvents</span>(<span class="hljs-params"></span>) </span>{
    ap.offBackgroundAudioPlay(handlerPlay);
    ap.offBackgroundAudioPause(handlerPause);
    ap.offBackgroundAudioStop(handlerStop);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/offBackgroundAudioPlay-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/offBackgroundAudioPlay-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口10.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./offBackgroundAudioPlay.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offBackgroundAudioStop(CALLBACK)" class="title-entry">ap.offBackgroundAudioStop(CALLBACK)</h1><p>停止监听音乐停止事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnOn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开启事件监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnOff"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭事件监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> btnOn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnOn'</span>);
  <span class="hljs-keyword">var</span> btnOff = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnOff'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  <span class="hljs-keyword">var</span> handlerPlay = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'开始播放'</span>)
  };
  <span class="hljs-keyword">var</span> handlerPause = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'暂停播放'</span>)
  };
  <span class="hljs-keyword">var</span> handlerStop = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'停止播放'</span>)
  };

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">logo</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/SKMiZgNnNTQNdJWzQfdI.JPEG'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
  btnOn.addEventListener(<span class="hljs-string">'click'</span>, onEvents);
  btnOff.addEventListener(<span class="hljs-string">'click'</span>, offEvents);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onEvents</span>(<span class="hljs-params"></span>) </span>{
    ap.onBackgroundAudioPlay(handlerPlay);
    ap.onBackgroundAudioPause(handlerPause);
    ap.onBackgroundAudioStop(handlerStop);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">offEvents</span>(<span class="hljs-params"></span>) </span>{
    ap.offBackgroundAudioPlay(handlerPlay);
    ap.offBackgroundAudioPause(handlerPause);
    ap.offBackgroundAudioStop(handlerStop);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/offBackgroundAudioStop-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/offBackgroundAudioStop-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口10.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./offBackgroundAudioStop.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBackgroundAudioPause(CALLBACK)" class="title-entry">ap.onBackgroundAudioPause(CALLBACK)</h1><p>暂停播放音乐时触发此事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">logo</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/SKMiZgNnNTQNdJWzQfdI.JPEG'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
  ap.onBackgroundAudioPlay(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'开始播放'</span>)
  });
  ap.onBackgroundAudioPause(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'暂停播放'</span>)
  });
  ap.onBackgroundAudioStop(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'停止播放'</span>)
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/onBackgroundAudioPause-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/onBackgroundAudioPause-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口 10.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./onBackgroundAudioPause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBackgroundAudioPlay(CALLBACK)" class="title-entry">ap.onBackgroundAudioPlay(CALLBACK)</h1><p>开始播放音乐时触发此事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">logo</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/SKMiZgNnNTQNdJWzQfdI.JPEG'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
  ap.onBackgroundAudioPlay(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'开始播放'</span>)
  });
  ap.onBackgroundAudioPause(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'暂停播放'</span>)
  });
  ap.onBackgroundAudioStop(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'停止播放'</span>)
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/onBackgroundAudioPlay-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/onBackgroundAudioPlay-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口 10.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./onBackgroundAudioPlay.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onBackgroundAudioStop(CALLBACK)" class="title-entry">ap.onBackgroundAudioStop(CALLBACK)</h1><p>停止播放音乐时触发此事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">logo</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/SKMiZgNnNTQNdJWzQfdI.JPEG'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
  ap.onBackgroundAudioPlay(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'开始播放'</span>)
  });
  ap.onBackgroundAudioPause(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'暂停播放'</span>)
  });
  ap.onBackgroundAudioStop(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'停止播放'</span>)
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/onBackgroundAudioStop-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/onBackgroundAudioStop-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口 10.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./onBackgroundAudioStop.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.pauseBackgroundAudio(CALLBACK)" class="title-entry">ap.pauseBackgroundAudio(CALLBACK)</h1><p>暂停播放音乐。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/pauseBackgroundAudio-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/pauseBackgroundAudio-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口1 0.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./pauseBackgroundAudio.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.playBackgroundAudio(OPTION, CALLBACK)" class="title-entry">ap.playBackgroundAudio(OPTION, CALLBACK)</h1><p>使用后台播放器播放音乐。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>音乐链接地址</td></tr><tr><td>title</td><td>String</td><td>否</td><td>音乐标题</td></tr><tr><td>singer</td><td>String</td><td>否</td><td>演唱者</td></tr><tr><td>describe</td><td>String</td><td>否</td><td>音乐描述</td></tr><tr><td>logo</td><td>String</td><td>否</td><td>logo URL</td></tr><tr><td>cover</td><td>String</td><td>否</td><td>封面 URL</td></tr></tbody></table></div><h2 id="错误码描述" class="title-entry">错误码描述</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>失败时会有对应描述</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/playBackgroundAudio-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/playBackgroundAudio-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><p><a class="my-pdf-link" target="blank" href="./playBackgroundAudio.html.pdf">查看PDF版本</a></p></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.seekBackgroundAudio(OPTION | position, CALLBACK)" class="title-entry">ap.seekBackgroundAudio(OPTION | position, CALLBACK)</h1><p>控制音乐播放进度。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>position</td><td>Number</td><td>是</td><td>音乐位置，单位秒</td></tr></tbody></table></div><h2 id="错误码描述" class="title-entry">错误码描述</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>失败时会有对应描述</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/seekBackgroundAudio-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/seekBackgroundAudio-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口1 0.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./seekBackgroundAudio.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.stopBackgroundAudio(CALLBACK)" class="title-entry">ap.stopBackgroundAudio(CALLBACK)</h1><p>停止播放音乐。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPlayBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnPauseBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnStopBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnSeekBackgroundAudio"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>从0开始播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGetState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取播放状态信息<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPlayBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPlayBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnPauseBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnPauseBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnStopBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnStopBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnSeekBackgroundAudio = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnSeekBackgroundAudio'</span>);
  <span class="hljs-keyword">var</span> btnGetState = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGetState'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);

  btnPlayBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.playBackgroundAudio({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://os.alipayobjects.com/rmsportal/FOjtUAVjVsfldZgjBdxE.mp3'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'舒缓轻音乐'</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/VRrMXbgUSdsibQjwZpyT.png'</span>
    });
  });
  btnPauseBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pauseBackgroundAudio();
  });
  btnStopBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.stopBackgroundAudio();
  });
  btnSeekBackgroundAudio.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.seekBackgroundAudio(<span class="hljs-number">0</span>);
  });
  btnGetState.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getBackgroundAudioPlayerState(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/audio/stopBackgroundAudio-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/audio/stopBackgroundAudio-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口1 0.0.3 以上才支持</li></ul><a class="my-pdf-link" target="blank" href="./stopBackgroundAudio.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.downloadFile(OPTION, CALLBACK)" class="title-entry">ap.downloadFile(OPTION, CALLBACK)</h1><p>上传本地资源到开发者服务器。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>下载文件地址</td></tr><tr><td>headers</td><td>Object</td><td>否</td><td>HTTP 请求 Header</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>apFilePath</td><td>String</td><td>文件临时存放的位置</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>12</td><td>下载失败</td></tr><tr><td>13</td><td>没有权限</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>下载图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_img"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"img"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  <span class="hljs-keyword">var</span> img = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_img'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showLoading(<span class="hljs-string">'下载中···'</span>);
    ap.downloadFile({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/MMpnSrfxpnMhBKlECDDv.jpg'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      ap.hideLoading();
      img.src = result.apFilePath;
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/file/downloadFile-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/file/downloadFile-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./downloadFile.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.uploadFile(OPTION, CALLBACK)" class="title-entry">ap.uploadFile(OPTION, CALLBACK)</h1><p>上传本地资源到开发者服务器。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>开发者服务器地址</td></tr><tr><td>filePath</td><td>String</td><td>是</td><td>要上传文件资源的本地定位符</td></tr><tr><td>fileName</td><td>String</td><td>是</td><td>文件名，即对应的 key , 开发者在服务器端通过这个 key 可以获取到文件二进制内容</td></tr><tr><td>fileType</td><td>String</td><td>是</td><td>文件类型，image/video</td></tr><tr><td>headers</td><td>Object</td><td>否</td><td>HTTP 请求 Header</td></tr><tr><td>formData</td><td>Object</td><td>否</td><td>HTTP 请求中其他额外的 form 数据</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>String</td><td>服务器返回的数据</td></tr><tr><td>statusCode</td><td>String</td><td>HTTP 状态码</td></tr><tr><td>headers</td><td>Object</td><td>服务器返回的 header</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>11</td><td>文件不存在</td></tr><tr><td>12</td><td>上传文件失败</td></tr><tr><td>13</td><td>没有权限</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_image"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择图片并上传<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_video"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择视频并上传<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnImage = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_image'</span>);
  <span class="hljs-keyword">var</span> btnVideo = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_video'</span>);
  btnImage.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseImage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-keyword">if</span>(res.apFilePaths &amp;&amp; res.apFilePaths.length &gt; <span class="hljs-number">0</span>) {
        ap.uploadFile({
          <span class="hljs-attr">url</span>: <span class="hljs-string">'请使用自己服务器地址'</span>,
          <span class="hljs-attr">fileType</span>: <span class="hljs-string">'image'</span>,
          <span class="hljs-attr">fileName</span>: <span class="hljs-string">'file'</span>,
          <span class="hljs-attr">filePath</span>: res.apFilePaths[<span class="hljs-number">0</span>]
        }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
          <span class="hljs-keyword">if</span> (!res.hasOwnProperty(<span class="hljs-string">'error'</span>)) {
            ap.alert(<span class="hljs-string">'上传成功'</span>);
          }
        });
      }
    });
  });
  btnVideo.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseVideo(<span class="hljs-number">3</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-keyword">if</span>(res.apFilePath) {
        ap.uploadFile({
          <span class="hljs-attr">url</span>: <span class="hljs-string">'请使用自己服务器地址'</span>,
          <span class="hljs-attr">fileType</span>: <span class="hljs-string">'video'</span>,
          <span class="hljs-attr">fileName</span>: <span class="hljs-string">'file'</span>,
          <span class="hljs-attr">filePath</span>: res.apFilePath
        }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
          <span class="hljs-keyword">if</span> (!res.hasOwnProperty(<span class="hljs-string">'error'</span>)) {
            ap.alert(<span class="hljs-string">'上传成功'</span>);
          }
        });
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/file/uploadFile-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/file/uploadFile-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./uploadFile.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.chooseImage(OPTION | count, CALLBACK)" class="title-entry">ap.chooseImage(OPTION | count, CALLBACK)</h1><p>拍照或从手机相册中选择图片。可直接传入一个数字作为 OPTION.count 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>count</td><td>Number</td><td>否</td><td>最大可选照片数，默认1张，上限9张</td></tr><tr><td>sourceType</td><td>String Array</td><td>否</td><td>相册选取或者拍照，默认 <code>[&#39;camera&#39;,&#39;album&#39;]</code></td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>apFilePaths</td><td>String Array</td><td>图片文件路径</td></tr></tbody></table></div><h2 id="错误码描述" class="title-entry">错误码描述</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>用户取消操作</td></tr><tr><td>11</td><td>操作失败（权限不够）</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_img"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"img"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  <span class="hljs-keyword">var</span> img = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_img'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseImage(<span class="hljs-number">2</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(<span class="hljs-built_in">JSON</span>.stringify(res));
      img.src = res.apFilePaths[<span class="hljs-number">0</span>];
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/image/chooseImage-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/image/chooseImage-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>支付宝从 10.0.3 开始支持 apFilePath。</li></ul><a class="my-pdf-link" target="blank" href="./chooseImage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.compressImage(OPTION | apFilePaths, CALLBACK)" class="title-entry">ap.compressImage(OPTION | apFilePaths, CALLBACK)</h1><p>压缩图片。可直接传入一个数组作为 OPTION. apFilePaths 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>apFilePaths</td><td>String Array</td><td>是</td><td>要压缩的图片文件路径数组</td></tr><tr><td>level</td><td>Number</td><td>否</td><td>压缩级别，支持 0 ~ 4 的整数，默认 4。详见「level 说明表」</td></tr></tbody></table></div><p><strong>level 说明</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>level</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>低质量</td></tr><tr><td>1</td><td>中等质量</td></tr><tr><td>2</td><td>高质量</td></tr><tr><td>3</td><td>不压缩</td></tr><tr><td>4</td><td>根据网络适应</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>apFilePaths</td><td>String Array</td><td>压缩后的图片文件路径</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_img"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"img"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  <span class="hljs-keyword">var</span> img = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_img'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseImage(<span class="hljs-number">2</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.compressImage({
        <span class="hljs-attr">apFilePaths</span>: res.apFilePaths,
        <span class="hljs-attr">level</span>: <span class="hljs-number">0</span>
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
        img.src = result.apFilePaths[<span class="hljs-number">0</span>]
      });
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/image/compressImage-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/image/compressImage-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>支付宝 10.0.12 开始支持此接口。</li></ul><a class="my-pdf-link" target="blank" href="./compressImage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.previewImage(OPTION | urls, CALLBACK)" class="title-entry">ap.previewImage(OPTION | urls, CALLBACK)</h1><p>预览图片。可直接传入一个图片链接数组作为 OPTION.urls 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>urls</td><td>Arrary</td><td>是</td><td>要预览的图片链接列表</td></tr><tr><td>current</td><td>Number</td><td>否</td><td>当前显示图片索引，默认 0</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_preview"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>预览图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPreview = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_preview'</span>);
  btnPreview.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.previewImage({
      <span class="hljs-attr">current</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">urls</span>: [
        <span class="hljs-string">'https://img.alicdn.com/tps/TB1sXGYIFXXXXc5XpXXXXXXXXXX.jpg'</span>,
        <span class="hljs-string">'https://img.alicdn.com/tps/TB1pfG4IFXXXXc6XXXXXXXXXXXX.jpg'</span>,
        <span class="hljs-string">'https://img.alicdn.com/tps/TB1h9xxIFXXXXbKXXXXXXXXXXXX.jpg'</span>
      ]
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/image/previewImage-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/image/previewImage-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./previewImage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.saveImage(OPTION | url, CALLBACK)" class="title-entry">ap.saveImage(OPTION | url, CALLBACK)</h1><p>保存在线图片到手机相册。可直接传入一个图片链接地址作为 OPTION.url 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>要保存的图片链接</td></tr><tr><td>showActionSheet</td><td>Boolean</td><td>否</td><td>是否显示图片操作菜单，默认 true</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p><strong>注意：</strong> 如果接口在调用时传了回调函数，那么保存结果交给此回调处理，接口默认不再弹 toast 提示用户。</p><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>2</td><td>参数无效，没有传 url 参数</td></tr><tr><td>15</td><td>没有开启相册权限(ios only)</td></tr><tr><td>16</td><td>手机相册存储空间不足(ios only)</td></tr><tr><td>17</td><td>保存图片过程中的其他错误</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_save"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>保存图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnSave = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_save'</span>);
  btnSave.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.saveImage(<span class="hljs-string">'https://img.alicdn.com/tps/TB1sXGYIFXXXXc5XpXXXXXXXXXX.jpg'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/image/saveImage-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/image/saveImage-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./saveImage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.chooseVideo(OPTION | maxDuration, CALLBACK)" class="title-entry">ap.chooseVideo(OPTION | maxDuration, CALLBACK)</h1><p>录制或从手机相册中选择视频。可直接传入一个数字作为 OPTION.maxDuration 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>maxDuration</td><td>Number</td><td>否</td><td>最大录制时长，单位秒，默认60s</td></tr><tr><td>sourceType</td><td>String Array</td><td>否</td><td>相册选取或者拍照，默认 <code>[&#39;camera&#39;,&#39;album&#39;]</code></td></tr><tr><td>camera</td><td>String Array</td><td>否</td><td>前置或者后置摄像头，默认前后都有，即：[‘front’, ‘back’]</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>apFilePath</td><td>String</td><td>图片文件路径</td></tr><tr><td>duration</td><td>Number</td><td>选定视频的时间长度，单位秒</td></tr><tr><td>size</td><td>Number</td><td>选定视频的数据量大小</td></tr><tr><td>width</td><td>Number</td><td>选定视频的宽</td></tr><tr><td>height</td><td>Number</td><td>选定视频的高</td></tr></tbody></table></div><h2 id="错误码描述" class="title-entry">错误码描述</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>用户取消操作</td></tr><tr><td>11</td><td>操作失败（权限不够）</td></tr><tr><td>12</td><td>数据处理失败</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择视频<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseVideo(<span class="hljs-number">3</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(<span class="hljs-built_in">JSON</span>.stringify(res));
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/media/video/chooseVideo-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/media/video/chooseVideo-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./chooseVideo.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offAppPause(CALLBACK)" class="title-entry">ap.offAppPause(CALLBACK)</h1><p>停止监听应用压后台事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>点击 Home 键回到手机桌面<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  <span class="hljs-keyword">var</span> appPauseHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now();
    ap.offAppPause(appPauseHandler);
  };
  <span class="hljs-keyword">var</span> appResumeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now() - time;
    ap.alert(<span class="hljs-string">'应用在后台运行了'</span> + time/<span class="hljs-number">1000</span> + <span class="hljs-string">'s'</span>);
    ap.offAppPause(appResumeHandler);
  };
  <span class="hljs-keyword">var</span> time;

  ap.onAppPause(appPauseHandler);
  ap.onAppResume(appResumeHandler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/appevent/offAppPause-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/appevent/offAppPause-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offAppPause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offAppResume(CALLBACK)" class="title-entry">ap.offAppResume(CALLBACK)</h1><p>停止监听应用压后台事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>点击 Home 键回到手机桌面<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  <span class="hljs-keyword">var</span> appPauseHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now();
    ap.offAppPause(appPauseHandler);
  };
  <span class="hljs-keyword">var</span> appResumeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now() - time;
    ap.alert(<span class="hljs-string">'应用在后台运行了'</span> + time/<span class="hljs-number">1000</span> + <span class="hljs-string">'s'</span>);
    ap.offAppResume(appResumeHandler);
  };
  <span class="hljs-keyword">var</span> time;

  ap.onAppPause(appPauseHandler);
  ap.onAppResume(appResumeHandler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/appevent/offAppResume-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/appevent/offAppResume-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offAppResume.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onAppPause(CALLBACK)" class="title-entry">ap.onAppPause(CALLBACK)</h1><p>当应用压后台时触发。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>点击 Home 键回到手机桌面<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  <span class="hljs-keyword">var</span> time;
  ap.onAppPause(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now();
  });
  ap.onAppResume(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now() - time;
    ap.alert(<span class="hljs-string">'应用在后台运行了'</span> + time/<span class="hljs-number">1000</span> + <span class="hljs-string">'s'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/appevent/onAppPause-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/appevent/onAppPause-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onAppPause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onAppResume(CALLBACK)" class="title-entry">ap.onAppResume(CALLBACK)</h1><p>当应用从后台唤起时触发。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>点击 Home 键回到手机桌面<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  <span class="hljs-keyword">var</span> time;
  ap.onAppPause(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now();
  });
  ap.onAppResume(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    time = <span class="hljs-built_in">Date</span>.now() - time;
    ap.alert(<span class="hljs-string">'应用在后台运行'</span> + time/<span class="hljs-number">1000</span> + <span class="hljs-string">'s'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/appevent/onAppResume-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/appevent/onAppResume-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onAppResume.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offPause(CALLBACK)" class="title-entry">ap.offPause(CALLBACK)</h1><p>停止监听 pause 事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_push"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPush = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_push'</span>);
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.alert(<span class="hljs-string">'亲，前面那个页面 pause 了!'</span>);
    ap.offBack(handler);
  };
  btnPush.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pushWindow(<span class="hljs-string">'onResume-demo.html?for=resume'</span>);
  });

  ap.onPause(handler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/event/offPause-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/event/offPause-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offPause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offResume(CALLBACK)" class="title-entry">ap.offResume(CALLBACK)</h1><p>停止监听 resume 事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_push"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  <span class="hljs-keyword">var</span> btnPush = document.querySelector(<span class="hljs-string">'#J_btn_push'</span>);
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
    ap.alert(<span class="hljs-string">'欢迎加来'</span>);
    ap.offResume(handler);
  };
  ap.onResume(handler);
  btnPush.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    ap.pushWindow({
      url: <span class="hljs-string">'onResume-demo.html'</span>,
      data: {
        <span class="hljs-keyword">for</span>: <span class="hljs-string">'resume'</span>
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/event/offResume-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/event/offResume-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offResume.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onPause(CALLBACK)" class="title-entry">ap.onPause(CALLBACK)</h1><p>当一个页面不可见时(被压入后台、锁屏、pushWindow 到下个页面)，会触发此事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_push"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPush = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_push'</span>);
  btnPush.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pushWindow(<span class="hljs-string">'onResume-demo.html?for=resume'</span>);
  });
  ap.onPause(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.alert(<span class="hljs-string">'亲，前面那个页面 pause 了!'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/event/onPause-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/event/onPause-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onPause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onResume(CALLBACK)" class="title-entry">ap.onResume(CALLBACK)</h1><p>当一个页面重新回到栈顶时(从后台被唤起、锁屏界面恢复、从下个页面回退)，会触发此事件。<br>如果这个页面是通过 popWindow/popTo 到达，且传递了 data 参数，此页可以获取到 data。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>通过 popWindow/popTo 传递的 data 参数</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_pop"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>退出页面(带数据)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_push"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPush = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_push'</span>);
  <span class="hljs-keyword">var</span> btnPop = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_pop'</span>);
  <span class="hljs-keyword">if</span> (ap.parseQueryString().for === <span class="hljs-string">'resume'</span>) {
    btnPop.style.display = <span class="hljs-string">'block'</span>
  } <span class="hljs-keyword">else</span> {
    btnPush.style.display = <span class="hljs-string">'block'</span>;

    ap.onResume(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(<span class="hljs-string">'城市：'</span> + res.data.city);
    });
  }
  btnPush.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pushWindow({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'onResume-demo.html'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">for</span>: <span class="hljs-string">'resume'</span>
      }
    });
  });
  btnPop.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.popWindow({
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">city</span>: <span class="hljs-string">'上海'</span>,
        <span class="hljs-attr">adCode</span>: <span class="hljs-string">'310100'</span>
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/event/onResume-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/event/onResume-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onResume.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.popTo(OPTION | urlPattern | index, CALLBACK)" class="title-entry">ap.popTo(OPTION | urlPattern | index, CALLBACK)</h1><p>popTo 可以一次回退多级页面。可直接传入一个字符串作为 OPTION.urlPattern 参数，或直接传入一个整数作为 OPTION.index 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>否</td><td>目标页面的完整 URL</td></tr><tr><td>urlPattern</td><td>String</td><td>否</td><td>目标页面的 URL 匹配表达式（ URL 如果包含 urlPattern，匹配成功）</td></tr><tr><td>index</td><td>Number</td><td>否</td><td>目标页面在会话页面栈中的索引；如果小于零，则将与当前页面的 index 相加</td></tr><tr><td>data</td><td>Object</td><td>否</td><td>传递的 data 对象将会被即将露出的页面通过 onResume 事件接收</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_pop"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>退出页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPop = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_pop'</span>);
  btnPop.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.popTo(<span class="hljs-number">-1</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/window/popTo-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/window/popTo-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>一般情况下，<code>popTo</code>用于分多步才能完成的场景，比如三级地址选择后返回等。</li><li>如果通过 url 或者 urlPattern 来返回，<code>popTo</code>会返回到离当前页面最远的页面，也就是栈底。同时不会去检测当前页面的 url 是否符合。</li><li><code>popTo</code>时所带的 data 如何被接收？ 请查看<a href="../event/onResume.html">onResume</a></li></ul><a class="my-pdf-link" target="blank" href="./popTo.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.popWindow(OPTION | data)" class="title-entry">ap.popWindow(OPTION | data)</h1><p>关闭当前页面。可直接传入一个对象作为 OPTION.data 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>否</td><td>传递的 data 对象将会被即将露出的页面通过 onResume 事件接收</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_pop"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>退出页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPop = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_pop'</span>);
  btnPop.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.popWindow();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/window/popWindow-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/window/popWindow-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li><code>popWindow</code>时所带的data如何被接收？ 请查看<a href="../event/onResume.html">onResume</a></li></ul><a class="my-pdf-link" target="blank" href="./popWindow.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.pushWindow(OPTION | url)" class="title-entry">ap.pushWindow(OPTION | url)</h1><p>pushWindow用来打开一个新的页面，自带转场动画。可直接传入一个字符串作为 OPTION.url 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>要打开的页面url</td></tr><tr><td>data</td><td>Object</td><td>否</td><td>url的参数，会以 query string 跟在 url 后面。在打开的新页面里可以用 <a href="../../data/querystring/parseQueryStringSync.html">ap.parseQueryString()</a> 来获取</td></tr><tr><td></td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_url"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开淘宝首页<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_withData"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开高德地图搜索页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnUrl = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_url'</span>);
  <span class="hljs-keyword">var</span> btnWithData = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_withData'</span>);
  btnUrl.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pushWindow(<span class="hljs-string">'https://m.taobao.com/#index'</span>);
  });
  btnWithData.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.pushWindow({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'http://uri.amap.com/search'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">keyword</span>: <span class="hljs-string">'美食'</span>,
        <span class="hljs-attr">city</span>: <span class="hljs-string">'310100'</span>,
        <span class="hljs-attr">view</span>: <span class="hljs-string">'map'</span>
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/window/pushWindow-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/window/pushWindow-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li><code>ap.pushWindow</code> 与 location.href 有所区别，类同于PC浏览器的新开标签页，每个window都是一个新的标签页，因此原页面仅仅是被压到后台，状态始终保持，JS 也会继续运行。</li></ul><a class="my-pdf-link" target="blank" href="./pushWindow.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.redirectTo(OPTION | url)" class="title-entry">ap.redirectTo(OPTION | url)</h1><p>替换当前页面，并且不会产生历史记录。可直接传入一个字符串作为 OPTION.url 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>要打开的页面url</td></tr><tr><td>data</td><td>Object</td><td>否</td><td>url的参数，会以 query string 跟在 url 后面。在打开的新页面里可以用 <a href="../data/parseQueryString.html">ap.parseQueryString()</a> 来获取</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_url"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开天猫首页<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_withData"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开高德地图搜索页面<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnUrl = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_url'</span>);
  <span class="hljs-keyword">var</span> btnWithData = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_withData'</span>);
  btnUrl.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.redirectTo(<span class="hljs-string">'https://m.tmall.com'</span>);
  });
  btnWithData.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.redirectTo({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'http://uri.amap.com/search'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">keyword</span>: <span class="hljs-string">'支付宝'</span>,
        <span class="hljs-attr">city</span>: <span class="hljs-string">'310100'</span>,
        <span class="hljs-attr">view</span>: <span class="hljs-string">'map'</span>
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/navigation/window/redirectTo-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/navigation/window/redirectTo-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./redirectTo.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.closeSocket()" class="title-entry">ap.closeSocket()</h1><p>关闭WebSocket连接。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/closeSocket-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/closeSocket-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./closeSocket.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.connectSocket(OPTION | url, CALLBACK)" class="title-entry">ap.connectSocket(OPTION | url, CALLBACK)</h1><p>向指定服务器发起 WebSocket 请求。可直接传入一个字符串作为 OPTION.url 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>是</td><td>目标服务器 url</td></tr><tr><td>data</td><td>Object</td><td>否</td><td>请求的参数</td></tr><tr><td>headers</td><td>Object</td><td>否</td><td>设置请求的头部信息</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>Error Unknown.</td></tr><tr><td>2</td><td>Connect when already connected.</td></tr><tr><td>3</td><td>Empty URL.</td></tr><tr><td>4</td><td>Illegal URL format.</td></tr><tr><td>5</td><td>URL scheme not ws or wss</td></tr><tr><td>6</td><td>Timed out connecting to server.</td></tr><tr><td>7</td><td>Invalid server certificate.</td></tr><tr><td>8</td><td>Invalid Sec-WebSocket-Accept response.</td></tr><tr><td>9</td><td>Server specified Sec-WebSocket-Protocol that wasn’t requested.</td></tr><tr><td>10</td><td>Invalid State: Cannot send until connection is open.</td></tr><tr><td>11</td><td>Error writing to stream.</td></tr><tr><td>12</td><td>Unable to allocate memory to read from socket.</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/connectSocket-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/connectSocket-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./connectSocket.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offSocketClose()" class="title-entry">ap.offSocketClose()</h1><p>移除 WebSocket 关闭事件监听。</p><a class="my-pdf-link" target="blank" href="./offSocketClose.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offSocketError()" class="title-entry">ap.offSocketError()</h1><p>移除 WebSocket 报错事件监听。</p><a class="my-pdf-link" target="blank" href="./offSocketError.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offSocketMessage()" class="title-entry">ap.offSocketMessage()</h1><p>移除 WebSocket 消息事件监听。</p><a class="my-pdf-link" target="blank" href="./offSocketMessage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offSocketOpen()" class="title-entry">ap.offSocketOpen()</h1><p>移除 WebSocket 打开事件监听。</p><a class="my-pdf-link" target="blank" href="./offSocketOpen.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onSocketClose(CALLBACK)" class="title-entry">ap.onSocketClose(CALLBACK)</h1><p>监听 WebSocket 关闭事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/onSocketClose-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/onSocketClose-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onSocketClose.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onSocketError(CALLBACK)" class="title-entry">ap.onSocketError(CALLBACK)</h1><p>监听 WebSocket 错误事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/onSocketError-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/onSocketError-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onSocketError.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onSocketMessage(CALLBACK)" class="title-entry">ap.onSocketMessage(CALLBACK)</h1><p>监听 WebSocket 接受到服务器的消息事件。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>String/ArrayBuffer</td><td>服务器返回的消息</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/onSocketMessage-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/onSocketMessage-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onSocketMessage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onSocketOpen(CALLBACK)" class="title-entry">ap.onSocketOpen(CALLBACK)</h1><p>监听 WebSocket 连接打开事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/onSocketOpen-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/onSocketOpen-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onSocketOpen.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.sendSocketMessage(OPTION, CALLBACK)" class="title-entry">ap.sendSocketMessage(OPTION, CALLBACK)</h1><p>通过 WebSocket 连接发送数据，需要先 ap.connectSocket，并在 ap.onSocketOpen 回调之后才能发送。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必选</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>String/ArrayBuffer</td><td>否</td><td>请求的参数</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}
<span class="hljs-selector-class">.img</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_connect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>建立链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_send"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>发送数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_close"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>关闭链接<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnConnect = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_connect'</span>);
  <span class="hljs-keyword">var</span> btnSend = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_send'</span>);
  <span class="hljs-keyword">var</span> btnClose = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_close'</span>);
  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
  ap.onSocketOpen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已开启'</span>);
  });
  ap.onSocketError(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 出错'</span>);
  });
  ap.onSocketClose(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'socket 已关闭'</span>);
  });
  ap.onSocketMessage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    ap.showToast(<span class="hljs-string">'收到服务器内容：'</span> + res.data)
  })
  btnConnect.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.connectSocket({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'ws://127.0.0.1:8088'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-string">'1234567890'</span>,
        <span class="hljs-attr">c</span>: <span class="hljs-number">9999</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'0987654321'</span>
      }
    });
  });
  btnSend.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.sendSocketMessage({
      <span class="hljs-attr">data</span>: counter+<span class="hljs-string">''</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-built_in">console</span>.warn(res);
    });
  });
  btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    counter ++;
    ap.closeSocket();
  });


</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/network/webSocket/sendSocketMessage-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/network/webSocket/sendSocketMessage-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./sendSocketMessage.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.chooseCity(OPTION, CALLBACK)" class="title-entry">ap.chooseCity(OPTION, CALLBACK)</h1><p>打开城市选择列表。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>showLocatedCity</td><td>Boolean</td><td>否</td><td>是否显示当前定位城市，默认 false</td></tr><tr><td>showHotCities</td><td>Boolean</td><td>否</td><td>是否显示热门城市，默认 true</td></tr><tr><td>cities</td><td>Object Array</td><td>否</td><td>自定义城市列表，列表内对象字段见下表</td></tr><tr><td>hotCities</td><td>Object array</td><td>否</td><td>自定义热门城市列表，列表内对象字段见下表</td></tr></tbody></table></div><p><strong>城市列表对象字段说明：</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>city</td><td>String</td><td>是</td><td>城市名</td></tr><tr><td>adCode</td><td>String</td><td>是</td><td>行政区划代码</td></tr><tr><td>spell</td><td>String</td><td>否</td><td>城市名对应拼音拼写，方便用户搜索</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>city</td><td>String</td><td>城市名</td></tr><tr><td>adCode</td><td>String</td><td>行政区划代码</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnGPS"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择城市（带定位）<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnCustom"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择城市（自定义）<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnGPS = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnGPS'</span>);
  <span class="hljs-keyword">var</span> btnCustom = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnCustom'</span>);
  btnGPS.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseCity({
      <span class="hljs-attr">showLocatedCity</span>: <span class="hljs-literal">true</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
      ap.alert(res.city + <span class="hljs-string">':'</span> + res.adCode);
    });
  });
  btnCustom.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseCity({
      <span class="hljs-attr">cities</span>: [
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'朝阳区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110105'</span>,
          <span class="hljs-attr">spell</span>: <span class="hljs-string">'chaoyang'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'海淀区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110108'</span>,
          <span class="hljs-attr">spell</span>: <span class="hljs-string">'haidian'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'丰台区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110106'</span>,
          <span class="hljs-attr">spell</span>: <span class="hljs-string">'fengtai'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'东城区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110101'</span>,
          <span class="hljs-attr">spell</span>: <span class="hljs-string">'dongcheng'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'西城区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110102'</span>,
          <span class="hljs-attr">spell</span>: <span class="hljs-string">'xicheng'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'房山区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110111'</span>,
          <span class="hljs-attr">spell</span>: <span class="hljs-string">'fangshan'</span>
        }
      ],
      <span class="hljs-attr">hotCities</span>: [
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'朝阳区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110105'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'海淀区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110108'</span>
        },
        {
          <span class="hljs-attr">city</span>: <span class="hljs-string">'丰台区'</span>,
          <span class="hljs-attr">adCode</span>: <span class="hljs-string">'110106'</span>
        }
      ]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(res.city + <span class="hljs-string">':'</span> + res.adCode);
    });
  })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/city/chooseCity-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/city/chooseCity-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>如果用户没有选择任何城市直接点击了返回，将不会触发回调函数。</li><li><a href="http://www.stats.gov.cn/tjsj/tjbz/xzqhdm/">最新县及县以上行政区划代码</a></li></ul><a class="my-pdf-link" target="blank" href="./chooseCity.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.chooseAlipayContact(OPTION | count, CALLBACK)" class="title-entry">ap.chooseAlipayContact(OPTION | count, CALLBACK)</h1><p>唤起支付宝通讯录，选择一个或者多个支付宝联系人。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>count</td><td>Number</td><td>否</td><td>单次最多选择联系人个数，默认 1，最大 10</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><strong>contacts</strong></td><td>Object Array</td><td>选中的支付宝联系人数组，数组内部对象字段见下表</td></tr></tbody></table></div><p><strong>contacts 返回字段说明</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>realName</td><td>String</td><td>账号的真实姓名</td></tr><tr><td>mobile</td><td>String</td><td>账号对应的手机号码</td></tr><tr><td>email</td><td>String</td><td>账号的邮箱</td></tr><tr><td>avatar</td><td>String</td><td>账号的头像链接</td></tr><tr><td>userId</td><td>String</td><td>支付宝账号 userId</td></tr></tbody></table></div><h2 id="错误说明" class="title-entry">错误说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>没有权限</td></tr><tr><td>11</td><td>用户取消操作</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-class">.output</span>{ <span class="hljs-attribute">display</span>:block; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">overflow</span>: auto}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择支付宝联系人<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_output"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  <span class="hljs-keyword">var</span> output = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_output'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.chooseAlipayContact(<span class="hljs-number">2</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      output.innerHTML = <span class="hljs-built_in">JSON</span>.stringify(res, <span class="hljs-literal">undefined</span>, <span class="hljs-string">'  '</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/contact/chooseAlipayContact-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/contact/chooseAlipayContact-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>返回的<code>mobile</code>和<code>email</code>字段不一定全有值，取决于所选取联系人的支付宝账号类型是手机号还是邮箱。</li></ul><a class="my-pdf-link" target="blank" href="./chooseAlipayContact.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.choosePhoneContact(CALLBACK)" class="title-entry">ap.choosePhoneContact(CALLBACK)</h1><p>选择本地系统通信录中某个联系人的电话。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>选中的联系人姓名</td></tr><tr><td>mobile</td><td>String</td><td>选中的联系人手机号</td></tr></tbody></table></div><h2 id="错误说明" class="title-entry">错误说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>没有权限;</td></tr><tr><td>11</td><td>用户取消操作(或设备未授权使用通讯录)</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择联系人电话<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.choosePhoneContact(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(<span class="hljs-string">'姓名：'</span> + res.name + <span class="hljs-string">'\n号码：'</span> + res.mobile);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/contact/choosePhoneContact-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/contact/choosePhoneContact-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./choosePhoneContact.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.datePicker(OPTION | formate, CALLBACK)" class="title-entry">ap.datePicker(OPTION | formate, CALLBACK)</h1><p>设置导航栏文字及样式。可直接传入一个字符串作为 OPTION.title 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>formate</td><td>String</td><td>否</td><td>返回的日期格式，默认 yyyy-MM-dd。支持 HH:mm:ss, yyyy-MM-dd, yyyy-MM-dd HH:mm:ss 三种格式</td></tr><tr><td>currentDate</td><td>String</td><td>否</td><td>初始选择的日期时间，默认当前时间</td></tr><tr><td>startDate</td><td>String</td><td>否</td><td>最小日期时间</td></tr><tr><td>endDate</td><td>String</td><td>否</td><td>最大日期时间</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>date</td><td>String</td><td>选择的日期时间</td></tr></tbody></table></div><h2 id="错误码说明" class="title-entry">错误码说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>11</td><td>用户取消操作</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnDate"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择日期<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnTime"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择时间<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btnDateTime"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>选择日期时间<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnDate = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnDate'</span>);
  <span class="hljs-keyword">var</span> btnTime = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnTime'</span>);
  <span class="hljs-keyword">var</span> btnDateTime = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btnDateTime'</span>);
  btnDate.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.datePicker({
      <span class="hljs-attr">formate</span>: <span class="hljs-string">'yyyy-MM-dd'</span>,
      <span class="hljs-attr">currentDate</span>: <span class="hljs-string">'2012-12-12'</span>,
      <span class="hljs-attr">startDate</span>: <span class="hljs-string">'2012-12-10'</span>,
      <span class="hljs-attr">endDate</span>: <span class="hljs-string">'2012-12-15'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
      ap.alert(res.date);
    });
  });
  btnTime.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.datePicker({
      <span class="hljs-attr">formate</span>: <span class="hljs-string">'HH:mm:ss'</span>,
      <span class="hljs-attr">currentDate</span>: <span class="hljs-string">'12:12:12'</span>,
      <span class="hljs-attr">startDate</span>: <span class="hljs-string">'11:11:11'</span>,
      <span class="hljs-attr">endDate</span>: <span class="hljs-string">'13:13:13'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
      ap.alert(res.date);
    });
  });
  btnDateTime.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.datePicker({
      <span class="hljs-attr">formate</span>: <span class="hljs-string">'yyyy-MM-dd HH:mm:ss'</span>,
      <span class="hljs-attr">currentDate</span>: <span class="hljs-string">'2012-01-09 11:11:11'</span>,
      <span class="hljs-attr">startDate</span>: <span class="hljs-string">'2012-01-01 11:11:11'</span>,
      <span class="hljs-attr">endDate</span>: <span class="hljs-string">'2012-01-10 11:11:11'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
      ap.alert(res.date);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/date/datePicker-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/date/datePicker-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./datePicker.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.hideNavigationBarLoading()" class="title-entry">ap.hideNavigationBarLoading()</h1><p>隐藏导航栏 loading。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_show"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>showNavigationBarLoading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_hide"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>hideNavigationBarLoading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnShow = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_show'</span>);
  <span class="hljs-keyword">var</span> btnHide = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_hide'</span>);
  btnShow.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showNavigationBarLoading();
  });
  btnHide.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.hideNavigationBarLoading();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/hideNavigationBarLoading-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/hideNavigationBarLoading-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./hideNavigationBarLoading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offTitleClick(CALLBACK)" class="title-entry">ap.offTitleClick(CALLBACK)</h1><p>停止监听 titleClick事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>点击导航栏文字<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    ap.alert(<span class="hljs-string">'title 只能点一次'</span>);
    ap.offTitleClick(handler);
  };
  ap.onTitleClick(handler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/offTitleClick-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/offTitleClick-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offTitleClick.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onTitleClick(CALLBACK)" class="title-entry">ap.onTitleClick(CALLBACK)</h1><p>点击导航栏文字时触发回调</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>点击导航栏文字<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  ap.onTitleClick(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    ap.alert(<span class="hljs-string">'亲!'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/onTitleClick-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/onTitleClick-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li><code>onTitleClick</code> 在点击文字时才触发，点击导航栏其他空白地方不会触发</li></ul><a class="my-pdf-link" target="blank" href="./onTitleClick.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.setNavigationBar(OPTION | title, CALLBACK)" class="title-entry">ap.setNavigationBar(OPTION | title, CALLBACK)</h1><p>设置导航栏文字及样式。可直接传入一个字符串作为 OPTION.title 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>否</td><td>导航栏标题</td></tr><tr><td>image</td><td>String</td><td>否</td><td>图片链接地址，必须 https，请使用一张3x高清图。若设置了 image，则 title 参数失效</td></tr><tr><td>backgroundColor</td><td>String</td><td>否</td><td>导航栏背景色，支持16进制颜色值</td></tr><tr><td>borderBottomColor</td><td>String</td><td>否</td><td>导航栏底部边框颜色，支持16进制颜色值。若设置了 backgroundColor，borderBottomColor 会不生效，默认会和 backgroundColor 颜色一样。</td></tr><tr><td>reset</td><td>Boolean</td><td>否</td><td>是否重置导航栏为支付宝默认配色，默认 false。</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>设置后调用</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_title"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置标题文字<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_image"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置标题图片(url)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_bgColor"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置导航栏背景色<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_borderColor"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置导航栏颜底边框色<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_reset"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>重置导航栏样式<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnTitle = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_title'</span>);
  <span class="hljs-keyword">var</span> btnImage = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_image'</span>);
  <span class="hljs-keyword">var</span> btnBgColor = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_bgColor'</span>);
  <span class="hljs-keyword">var</span> btnBorderColor = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_borderColor'</span>);
  <span class="hljs-keyword">var</span> btnReset = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_reset'</span>);

  btnTitle.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setNavigationBar(<span class="hljs-string">'支付宝-AlipayJSAPI'</span>);
  });
  btnImage.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setNavigationBar({
      <span class="hljs-attr">image</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/jFCQxeOXeKTQUfhrQFOo.png'</span>
    });
  });
  btnBgColor.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setNavigationBar({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'设置导航栏背景色'</span>,
      <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#ED4A4D'</span>
    });
  });
  btnBorderColor.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setNavigationBar({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'设置导航栏底部边框色'</span>,
      <span class="hljs-attr">borderBottomColor</span>: <span class="hljs-string">'#108ee9'</span>
    });
  });
  btnReset.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setNavigationBar({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'重置导航栏样式'</span>,
      <span class="hljs-attr">reset</span>: <span class="hljs-literal">true</span>
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/setNavigationBar-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/setNavigationBar-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./setNavigationBar.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.setOptionButton(OPTION, CALLBACK)" class="title-entry">ap.setOptionButton(OPTION, CALLBACK)</h1><p>设置导航栏右侧按钮。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td><strong>items</strong></td><td>Object Array</td><td>否</td><td>按钮数组，数组中每个项是一个对象。item 的具体配置字段见下表</td></tr><tr><td>onClick</td><td>Function</td><td>否</td><td>监听 optionButton 点击事件</td></tr><tr><td>reset</td><td>Boolean</td><td>否</td><td>重置到系统默认按钮，默认为 false。当为 true 时，忽略其他参数</td></tr><tr><td>preventDefault</td><td>Boolean</td><td>否</td><td>是否阻止默认的分享功能，指定 iconType 的情况下点击时，会弹分享面板，<code>preventDefault: true</code> 会阻止默认分享面板弹出</td></tr></tbody></table></div><p><strong>items 配置项参数说明：</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>是</td><td>按钮标题</td></tr><tr><td>color</td><td>String</td><td>否</td><td>按钮标题文字颜色</td></tr><tr><td>icon</td><td>String</td><td>否</td><td>按钮图标，支持 base64</td></tr><tr><td>type</td><td>String</td><td>否</td><td>按钮图标类型，与 title、icon 三选一。支持 user / filter / search / add / settings / scan / info / help / locate / more</td></tr><tr><td>badge</td><td>String</td><td>否</td><td>按钮红色气泡，默认 -1。其中 0 表示小红点，-1 表示不显示，其他值展示出来</td></tr></tbody></table></div><p><strong>onClick 返回值说明：</strong><br>点击按钮时调用</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>index</td><td>Number</td><td>被点击的菜单项的索引，从0开始，从左到右</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_title"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置文字「完成」<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_color"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置文字「颜色」<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_type"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置内置类型图标<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_icon"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>设置自定义图标<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_reset"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>重置<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnTitle = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_title'</span>);
  <span class="hljs-keyword">var</span> btnColor = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_color'</span>);
  <span class="hljs-keyword">var</span> btnIcon = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_icon'</span>);
  <span class="hljs-keyword">var</span> btnType = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_type'</span>);
  <span class="hljs-keyword">var</span> btnReset = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_reset'</span>);

  btnTitle.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setOptionButton({
      <span class="hljs-attr">items</span>: [{
        <span class="hljs-attr">title</span>: <span class="hljs-string">'完成'</span>
      }],
      <span class="hljs-attr">onClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
        ap.alert(<span class="hljs-string">'你点击了「完成」，它是第'</span> + data.index + <span class="hljs-string">'个 optionButton'</span>);
      },
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(<span class="hljs-string">'设置成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(<span class="hljs-string">'设置失败'</span>);
      }
    });
  });
  btnColor.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setOptionButton({
      <span class="hljs-attr">items</span>: [{
        <span class="hljs-attr">title</span>: <span class="hljs-string">'颜色'</span>,
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#ED4A4D'</span>
      }],
      <span class="hljs-attr">onClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
        ap.alert(<span class="hljs-string">'你点击了「颜色」，它是第'</span> + data.index + <span class="hljs-string">'个 optionButton'</span>);
      },
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(<span class="hljs-string">'设置成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        ap.showToast(<span class="hljs-string">'设置失败'</span>);
      }
    });
  });

  btnType.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> items = [
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'user'</span>  
      },
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'settings'</span>  
      }
    ];
    ap.setOptionButton({
      <span class="hljs-attr">items</span>: items,
      <span class="hljs-attr">onClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
        ap.alert(<span class="hljs-string">'你点击了 '</span> + items[data.index].type);
      },
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(<span class="hljs-string">'设置成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(<span class="hljs-string">'设置失败'</span>);
      }
    });
  });

  btnReset.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setOptionButton({<span class="hljs-attr">reset</span>: <span class="hljs-literal">true</span>});
  });

  btnIcon.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.setOptionButton({
      <span class="hljs-attr">items</span>: [
        {
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/QJeWMNUFFiDCQawMLPTr.png'</span>,
          <span class="hljs-attr">badge</span>: <span class="hljs-number">0</span>
        },
        {
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAQlBMVEUAAAC/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7++vr6/v78Ycp3SAAAAFXRSTlMAEPAwwCDQYEDgsIBwkJ+gf1CPb09zkeEOAAAFLUlEQVR42rzZ25KrIBAF0M0dFWM02f//qyeTmgpliaj05KzXaGgutjTikIGAg5iaIRAjpOIAgSQPIE0QGAdIDRYCdoSU1RDQFlKkQTNDQiiSAc0CGSGTSMEqnMgEmZ7s0Kwje8iQgkVg+AKRmRSM4sCXGRITXzwaeb5MEFCaPxyaOP7QEAh8G9Fk5FtAO0tJJzTfLJo5/poFw0c6QRL41TUmAeEQRH6klhz6EdFEeX5o1fAAfXRK2j7pDS4x67sbInCeKzrigqi50hlco27c6N3p4Htu3BzOMzfNklvECfHGEn0zOEUFz13dw6HKPTru8kHhgAs9D/iH22/d80AfKj2Ii+cp3fLcdEU9l46n+HssxP5cLC/xSzD4ZcLieYldng7Z3LOJnRWgZssm/QxkJvX62u0p4iOmnlfoPhhsmXR2DYwRG3E8uwaSwS6X/HHru/eb4xh8cjjgUuVfdG59LwZdiT23Xhen+rKp20slU8R5rhDC5GR3S9+GBhcYzRXvBPuB3H5zBL5tR9Kt22+PoFOSquBtaKzLhJWBlXRBafGuGFHUhZA3xc18fU/s4uN+f0RXHwIvrw0nFKiHz3uUYoSTvDZUfDOFX+6azPS9EIKpDJ/sfCBv++uFQ5eHTzQHY+Uhz/Rcrs8DIJ0Dc9i+t8VkZfii/v6UTHmu9ApQI6nVF07JhsIkTlzpP1nLFq4cIBO3pbnjmstZK25L9Pj3Z8U91/KV9IWzYinLcm7I1KexbbDaQ2q05eyYhXwiwvT33wvSVJuBvFdwuvTiG4e//2ZkubE846KLB3pphpQKm2e7ZvvVTCxijVXb74ZyghH4CssKje/rWWHxfYEVCd+nWGEgIZ8Dj//BcVeEkAv/irWzXUlBIACgxV6AoN331v//6nQnMzEGLFAkcx59EOICtZA9EVmduYreeuMTFC5rS0Qy/Cg4g/5YTVNs0liSBurUZol2HvkCb7uyqSTVqO7KazC9N5VFjZmNiksm1+/LBLp8mZvPC8rh6YRU1TyufwoiHjOjKNjhS1IUKcTVKSx2r73Vh2elIoO4PAUwuMS4oGEePsOwi9tYy0Nlals7l3f+r+T/O54oNri27ExzLaVejnkDDPv+RajComfBC2yUxZM6b18/iD/bV9CSrvKNT2C+PQH9T7A2AU9T+fYEAk2UiidQfgPR0SxS6fpCQAfqJWkKrxY6OBREdxqUpAmsEPJ44SzZWUAkepqMAOEshIzlVq0sPUobgBcdxb1zWlsjF0mPka9aLIvnu2EuWk9Dkiiri8cSpq1vVCZJGrRHa4FLo9LZVimipyH+XwyR2ZgMmc16Dy9GGuS5kUZ4Lm42S7g1umNDHl+0uLjIXbhwf/Ry/LIRZ9q5g3Brb38+vUS7pmGK9lTJlSfdY7DE0CF+Bz/KPZm0o5o31Bh8xZj0QYwR6+0zoanG9VXfrIFBKKnG99aepIMhb6pzUPDMNnIXeqrzl8pvm4BbTOBykpJn19PLzHa1moZ0TrJP4XJ2jFCViJN/oZdwmjiJqX5x/FtBh99MPC+YHh2nKPOVcNPUhHAqUQcZNoeidpZAU4/En1vpJfXHe/vIWmtL3bxonH2ZTCpgKZpMQYOjqRw0LTTRAh1WmmaFLokmSQN9qenvf/7fKNXVs3zjRk70iZUetQq4ynl6jHfQxPYkxvPjgaBuWDBwH1oaZBHGODs0vINxapV0i1wVPIQPMvn+yrg75SKZDDxOLZq66KhgFoyrJoZdIwqYTeESo/6gv/RHigsquO4PrWwzz9ROC40AAAAASUVORK5CYII='</span>
        }
      ],
      <span class="hljs-attr">onClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
        ap.showToast(<span class="hljs-string">'你点击了第 '</span> + data.index + <span class="hljs-string">' 个 optionButton'</span>);
      },
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(<span class="hljs-string">'设置成功'</span>);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.showToast(<span class="hljs-string">'设置失败'</span>);
      }
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/setOptionButton-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/setOptionButton-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./setOptionButton.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.showNavigationBarLoading()" class="title-entry">ap.showNavigationBarLoading()</h1><p>显示导航栏 loading。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_show"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>showNavigationBarLoading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_hide"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>hideNavigationBarLoading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnShow = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_show'</span>);
  <span class="hljs-keyword">var</span> btnHide = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_hide'</span>);
  btnShow.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showNavigationBarLoading();
  });
  btnHide.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.hideNavigationBarLoading();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/showNavigationBarLoading-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/showNavigationBarLoading-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./showNavigationBarLoading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.showOptionButton()" class="title-entry">ap.showOptionButton()</h1><p>显示导航栏右侧按钮。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_show"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>显示 optionButton<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_hide"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>隐藏 optionButton<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnShow = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_show'</span>);
  <span class="hljs-keyword">var</span> btnHide = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_hide'</span>);

  btnShow.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showOptionButton();
  });
  btnHide.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.hideOptionButton();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/showOptionButton-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/showOptionButton-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./showOptionButton.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.showPopMenu(OPTION | items, CALLBACK)" class="title-entry">ap.showPopMenu(OPTION | items, CALLBACK)</h1><p>显示界面右上角弹出的下拉菜单。可直接传入一个数组作为 OPTION.items 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td><strong>items</strong></td><td>Object Array</td><td>是</td><td>菜单数组，数组中每个项是一个对象(也可以是一个字符串，如果是字符串，会当作 item.title 参数)。item 的具体配置字段见下表</td></tr></tbody></table></div><p><strong>items 配置项参数说明：</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>是</td><td>菜单标题，可直接作为 items 数组元素。</td></tr><tr><td>icon</td><td>String</td><td>是</td><td>菜单图标，支持 base64</td></tr><tr><td>badge</td><td>String</td><td>否</td><td>菜单红色气泡，默认 -1。其中 0 表示小红点，-1 表示不显示，其他值展示出来</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>点击弹出菜单项时调用</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>index</td><td>Number</td><td>被点击的菜单项的索引，从0开始</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_popMenu"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>显示 popMenu<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn_popMenuIcon"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>显示带图标的 popMenu<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btnPopMenu = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_popMenu'</span>);
  <span class="hljs-keyword">var</span> btnPopMenuIcon = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn_popMenuIcon'</span>);

  btnPopMenu.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showPopMenu([<span class="hljs-string">'菜单一'</span>, <span class="hljs-string">'菜单二'</span>, <span class="hljs-string">'菜单三'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.showToast(<span class="hljs-string">'你点击了第 '</span> + res.index + <span class="hljs-string">' 个菜单'</span>);
    });
  });
  btnPopMenuIcon.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showPopMenu({
      <span class="hljs-attr">items</span>: [
        {
          <span class="hljs-attr">title</span>: <span class="hljs-string">'周边美食'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/mzorSIxVEdkTuxumzzau.png'</span>
        },
        {
          <span class="hljs-attr">title</span>: <span class="hljs-string">'购物攻略'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/UoBNIZJosEXNQtAxCEUg.png'</span>
        },
        {
          <span class="hljs-attr">title</span>: <span class="hljs-string">'摄影技巧'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/QJeWMNUFFiDCQawMLPTr.png'</span>
        },
        {
          <span class="hljs-attr">title</span>: <span class="hljs-string">'搞笑段子'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAQlBMVEUAAAC/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7++vr6/v78Ycp3SAAAAFXRSTlMAEPAwwCDQYEDgsIBwkJ+gf1CPb09zkeEOAAAFLUlEQVR42rzZ25KrIBAF0M0dFWM02f//qyeTmgpliaj05KzXaGgutjTikIGAg5iaIRAjpOIAgSQPIE0QGAdIDRYCdoSU1RDQFlKkQTNDQiiSAc0CGSGTSMEqnMgEmZ7s0Kwje8iQgkVg+AKRmRSM4sCXGRITXzwaeb5MEFCaPxyaOP7QEAh8G9Fk5FtAO0tJJzTfLJo5/poFw0c6QRL41TUmAeEQRH6klhz6EdFEeX5o1fAAfXRK2j7pDS4x67sbInCeKzrigqi50hlco27c6N3p4Htu3BzOMzfNklvECfHGEn0zOEUFz13dw6HKPTru8kHhgAs9D/iH22/d80AfKj2Ii+cp3fLcdEU9l46n+HssxP5cLC/xSzD4ZcLieYldng7Z3LOJnRWgZssm/QxkJvX62u0p4iOmnlfoPhhsmXR2DYwRG3E8uwaSwS6X/HHru/eb4xh8cjjgUuVfdG59LwZdiT23Xhen+rKp20slU8R5rhDC5GR3S9+GBhcYzRXvBPuB3H5zBL5tR9Kt22+PoFOSquBtaKzLhJWBlXRBafGuGFHUhZA3xc18fU/s4uN+f0RXHwIvrw0nFKiHz3uUYoSTvDZUfDOFX+6azPS9EIKpDJ/sfCBv++uFQ5eHTzQHY+Uhz/Rcrs8DIJ0Dc9i+t8VkZfii/v6UTHmu9ApQI6nVF07JhsIkTlzpP1nLFq4cIBO3pbnjmstZK25L9Pj3Z8U91/KV9IWzYinLcm7I1KexbbDaQ2q05eyYhXwiwvT33wvSVJuBvFdwuvTiG4e//2ZkubE846KLB3pphpQKm2e7ZvvVTCxijVXb74ZyghH4CssKje/rWWHxfYEVCd+nWGEgIZ8Dj//BcVeEkAv/irWzXUlBIACgxV6AoN331v//6nQnMzEGLFAkcx59EOICtZA9EVmduYreeuMTFC5rS0Qy/Cg4g/5YTVNs0liSBurUZol2HvkCb7uyqSTVqO7KazC9N5VFjZmNiksm1+/LBLp8mZvPC8rh6YRU1TyufwoiHjOjKNjhS1IUKcTVKSx2r73Vh2elIoO4PAUwuMS4oGEePsOwi9tYy0Nlals7l3f+r+T/O54oNri27ExzLaVejnkDDPv+RajComfBC2yUxZM6b18/iD/bV9CSrvKNT2C+PQH9T7A2AU9T+fYEAk2UiidQfgPR0SxS6fpCQAfqJWkKrxY6OBREdxqUpAmsEPJ44SzZWUAkepqMAOEshIzlVq0sPUobgBcdxb1zWlsjF0mPka9aLIvnu2EuWk9Dkiiri8cSpq1vVCZJGrRHa4FLo9LZVimipyH+XwyR2ZgMmc16Dy9GGuS5kUZ4Lm42S7g1umNDHl+0uLjIXbhwf/Ry/LIRZ9q5g3Brb38+vUS7pmGK9lTJlSfdY7DE0CF+Bz/KPZm0o5o31Bh8xZj0QYwR6+0zoanG9VXfrIFBKKnG99aepIMhb6pzUPDMNnIXeqrzl8pvm4BbTOBykpJn19PLzHa1moZ0TrJP4XJ2jFCViJN/oZdwmjiJqX5x/FtBh99MPC+YHh2nKPOVcNPUhHAqUQcZNoeidpZAU4/En1vpJfXHe/vIWmtL3bxonH2ZTCpgKZpMQYOjqRw0LTTRAh1WmmaFLokmSQN9qenvf/7fKNXVs3zjRk70iZUetQq4ynl6jHfQxPYkxvPjgaBuWDBwH1oaZBHGODs0vINxapV0i1wVPIQPMvn+yrg75SKZDDxOLZq66KhgFoyrJoZdIwqYTeESo/6gv/RHigsquO4PrWwzz9ROC40AAAAASUVORK5CYII='</span>,
          <span class="hljs-attr">badge</span>: <span class="hljs-string">'0'</span>
        }
      ]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.showToast(<span class="hljs-string">'你点击了第 '</span> + res.index + <span class="hljs-string">' 个菜单'</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/navigationbar/showPopMenu-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/navigationbar/showPopMenu-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>如果设置了 icon 那么每一个菜单项都要求有 icon，否则都没有 icon。</li></ul><a class="my-pdf-link" target="blank" href="./showPopMenu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.alert(OPTION | content, CALLBACK)" class="title-entry">ap.alert(OPTION | content, CALLBACK)</h1><p>alert 警告框。可直接传入一个字符串作为 OPTION.content 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>否</td><td>alert框的标题</td></tr><tr><td>content</td><td>String</td><td>否</td><td>alert框的内容</td></tr><tr><td>buttonText</td><td>String</td><td>否</td><td>按钮文字，默认’确定’</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>点击按钮后调用</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>alert<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.alert({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'您有新的快递消息'</span>,
      <span class="hljs-attr">buttonText</span>: <span class="hljs-string">'我知道了'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-comment">//可直接传入一个字符串当作 OPTION.content 参数</span>
      ap.alert(<span class="hljs-string">'用户点击了「我知道了」'</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/alert-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/alert-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li><code>ap.alert</code>不像window.alert，会不阻塞 JS 代码执行，即先后弹2个的话，最后看到的是后弹的那个。</li></ul><a class="my-pdf-link" target="blank" href="./alert.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.confirm(OPTION | content, CALLBACK)" class="title-entry">ap.confirm(OPTION | content, CALLBACK)</h1><p>confirm 确认框。可直接传入一个字符串作为 OPTION.content 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>否</td><td>confirm 框的标题</td></tr><tr><td>content</td><td>String</td><td>否</td><td>confirm 框的内容</td></tr><tr><td>confirmButtonText</td><td>String</td><td>否</td><td>确定按钮文字，默认’确定’</td></tr><tr><td>cancelButtonText</td><td>String</td><td>否</td><td>取消按钮文字，默认’取消’</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>点击相应按钮后调用</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>confirm</td><td>Boolean</td><td>用户选择结果。点击 confirmButton 为 true，点击cancelButton 为 false</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>confirm<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.confirm({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'温馨提示'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'您是否想查询快递单号：\n1234567890'</span>,
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'马上查询'</span>,
      <span class="hljs-attr">cancelButtonText</span>: <span class="hljs-string">'暂不需要'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      ap.alert(result.confirm);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/confirm-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/confirm-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li><code>ap.confirm</code>和<code>ap.alert</code>一样，它也不是阻塞式的，即先后弹2个的话，最后看到的是后弹的那个。</li></ul><a class="my-pdf-link" target="blank" href="./confirm.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.hideLoading()" class="title-entry">ap.hideLoading()</h1><p>隐藏加载提示。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>showLoading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showLoading({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'2秒后消失'</span>,
      <span class="hljs-attr">delay</span>: <span class="hljs-number">1000</span>
    });
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      ap.hideLoading();
    }, <span class="hljs-number">3000</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/hideLoading-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/hideLoading-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>显示 loading 后，会覆盖整个h5页面，页面元素不能交互。</li></ul><a class="my-pdf-link" target="blank" href="./hideLoading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.hideToast()" class="title-entry">ap.hideToast()</h1><p>隐藏弱提示。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>点击以下按钮查看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_showToast"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>显示 toast<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_hideToast"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>隐藏 toast<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> showBtn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_showToast'</span>);
  <span class="hljs-keyword">var</span> hideBtn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_hideToast'</span>);
  showBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast(<span class="hljs-string">'显示中...'</span>);
  });
  hideBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.hideToast();
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/hideToast-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/hideToast-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./hideToast.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.showActionSheet(OPTION, CALLBACK)" class="title-entry">ap.showActionSheet(OPTION, CALLBACK)</h1><p>显示操作菜单。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>否</td><td>菜单标题</td></tr><tr><td>items</td><td>String Array</td><td>是</td><td>菜单按钮的文字数组</td></tr><tr><td>cancelButtonText</td><td>String</td><td>否</td><td>取消按钮文案，默认为「取消」</td></tr></tbody></table></div><p></p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>点击菜单按钮时调用</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>index</td><td>Number</td><td>被点击的按钮的索引，从0开始。点击取消或蒙层时返回 -1</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>显示 ActionSheet<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showActionSheet({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'支付宝-ActionSheet'</span>,
      <span class="hljs-attr">items</span>: [<span class="hljs-string">'菜单一'</span>, <span class="hljs-string">'菜单二'</span>, <span class="hljs-string">'菜单三'</span>]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      <span class="hljs-keyword">var</span> btn = res.index === <span class="hljs-number">-1</span> ? <span class="hljs-string">'取消'</span> : <span class="hljs-string">'第'</span> + res.index + <span class="hljs-string">'个'</span>;
      ap.showToast(<span class="hljs-string">'你点了'</span> + btn + <span class="hljs-string">'按钮'</span> );
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/showActionSheet-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/showActionSheet-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./showActionSheet.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.showLoading(OPTION | content)" class="title-entry">ap.showLoading(OPTION | content)</h1><p>显示加载提示。可直接传入一个字符串作为 OPTION.content 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>content</td><td>String</td><td>否</td><td>loading 的文字提示</td></tr><tr><td>delay</td><td>Number</td><td>否</td><td>延迟显示，单位 ms，默认 0。如果在此时间之前调用了 ap.hideLoading 则不会显示</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>showLoading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showLoading({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'2秒后消失'</span>,
      <span class="hljs-attr">delay</span>: <span class="hljs-number">1000</span>
    });
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      ap.hideLoading();
    }, <span class="hljs-number">3000</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/showLoading-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/showLoading-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>显示 loading 后，会覆盖整个h5页面，页面元素不能交互。</li></ul><a class="my-pdf-link" target="blank" href="./showLoading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.showToast(OPTION | content, CALLBACK)" class="title-entry">ap.showToast(OPTION | content, CALLBACK)</h1><p>显示一个弱提示，可选择多少秒之后消失。可直接传入一个字符串作为 OPTION.content 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>content</td><td>String</td><td>是</td><td>文字内容</td></tr><tr><td>type</td><td>String</td><td>否</td><td>toast 类型，展示相应图标，默认 none，支持 success / fail / exception / none’。其中 exception 类型必须传文字信息</td></tr><tr><td>duration</td><td>Number</td><td>否</td><td>显示时长，单位为 ms，默认 2000</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p>toast消失后调用</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>点击以下按钮查看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toast-btn btn btn-default"</span>&gt;</span>success<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toast-btn btn btn-default"</span>&gt;</span>fail<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toast-btn btn btn-default"</span>&gt;</span>exception<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toast-btn btn btn-default"</span>&gt;</span>none<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>展示3秒并执行回调<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btns = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'.toast-btn'</span>);
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  <span class="hljs-keyword">var</span> contents = {
    <span class="hljs-attr">success</span>: <span class="hljs-string">'操作成功'</span>,
    <span class="hljs-attr">fail</span>: <span class="hljs-string">'系统繁忙'</span>,
    <span class="hljs-attr">exception</span>: <span class="hljs-string">'网络异常'</span>,
    <span class="hljs-attr">none</span>: <span class="hljs-string">'忙不过来了，客官请稍候'</span>
  };
  [].forEach.call(btns, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">btn</span>)</span>{
    btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">var</span> type = <span class="hljs-keyword">this</span>.innerHTML;
      ap.showToast({
        <span class="hljs-attr">content</span>: contents[type],
        <span class="hljs-attr">type</span>: type
      });
    });
  });
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.showToast({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'请稍候···'</span>,
      <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      ap.alert(<span class="hljs-string">'toast消失了'</span>);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/notice/showToast-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/notice/showToast-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>安卓需要注意，如果系统通知关闭，则此弹框不会出现。</li></ul><a class="my-pdf-link" target="blank" href="./showToast.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.allowPullDownRefresh(OPTION | allow)" class="title-entry">ap.allowPullDownRefresh(OPTION | allow)</h1><p>下拉刷新开关。可直接传入一个布尔值作为 OPTION.allow 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>allow</td><td>Boolean</td><td>否</td><td>是否允许下拉刷新，默认 true</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>下拉试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  ap.allowPullDownRefresh(<span class="hljs-literal">false</span>);
  ap.onPullDownRefresh(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
    <span class="hljs-keyword">if</span>(!res.refreshAvailable){
      ap.alert({
        content: <span class="hljs-string">'刷新已禁止'</span>,
        buttonText: <span class="hljs-string">'恢复'</span>
      }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        ap.allowPullDownRefresh(<span class="hljs-literal">true</span>);
        ap.showToast(<span class="hljs-string">'刷新已恢复'</span>)
      });
    }
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/pulldown/allowPullDownRefresh-demo.html?__webview_options__=pullRefresh%3DYES">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/pulldown/allowPullDownRefresh-demo.html?__webview_options__=pullRefresh%3DYES" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./allowPullDownRefresh.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.offPullDownRefresh(CALLBACK)" class="title-entry">ap.offPullDownRefresh(CALLBACK)</h1><p>停止监听页面下拉刷新事件。</p><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>下拉试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  <span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
    <span class="hljs-keyword">if</span>(!res.refreshAvailable){
      ap.alert(<span class="hljs-string">'刷新已禁止'</span>);
    }
    ap.offPullDownRefresh(handler);
  };
  ap.allowPullDownRefresh(<span class="hljs-literal">false</span>);
  ap.offPullDownRefresh(handler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/pulldown/offPullDownRefresh-demo.html?__webview_options__=pullRefresh%3DYES">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/pulldown/offPullDownRefresh-demo.html?__webview_options__=pullRefresh%3DYES" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./offPullDownRefresh.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.onPullDownRefresh(CALLBACK)" class="title-entry">ap.onPullDownRefresh(CALLBACK)</h1><p>当页面下拉准备刷新时触发。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>refreshAvailable</td><td>Boolean</td><td>是否可刷新。可通过<a href="../ui/allowPullDownRefresh.html">ap.allowPullDownRefresh()</a>设置此返回值</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"am-ft-center"</span>&gt;</span>下拉试试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
  ap.allowPullDownRefresh(<span class="hljs-literal">false</span>);
  ap.onPullDownRefresh(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(res)</span></span>{
    <span class="hljs-keyword">if</span>(!res.refreshAvailable){
      ap.alert({
        content: <span class="hljs-string">'刷新已禁止'</span>,
        buttonText: <span class="hljs-string">'恢复'</span>
      }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        ap.allowPullDownRefresh(<span class="hljs-literal">true</span>);
        ap.showToast(<span class="hljs-string">'刷新已恢复'</span>)
      });
    }
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/pulldown/onPullDownRefresh-demo.html?__webview_options__=pullRefresh%3DYES">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/pulldown/onPullDownRefresh-demo.html?__webview_options__=pullRefresh%3DYES" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./onPullDownRefresh.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.share(OPTION, CALLBACK)" class="title-entry">ap.share(OPTION, CALLBACK)</h1><p>分享内容。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>是</td><td>分享标题</td></tr><tr><td>content</td><td>String</td><td>是</td><td>分享内容</td></tr><tr><td>url</td><td>String</td><td>是</td><td>分享链接</td></tr><tr><td>image</td><td>String</td><td>否</td><td>分享图片链接</td></tr><tr><td>captureScreen</td><td>Boolean</td><td>否</td><td>是否截屏，默认 false</td></tr><tr><td>showToolBar</td><td>Boolean</td><td>否</td><td>是否显示分享面板第二行的工具按钮，默认 true</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>shareResult</td><td>Boolean</td><td>分享的结果</td></tr><tr><td>channelName</td><td>String</td><td>分享渠道</td></tr></tbody></table></div><h2 id="错误码描述" class="title-entry">错误码描述</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>分享失败或取消</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>打开分享面板<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.share(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      ap.alert(result.shareResult);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/ui/share/share-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/ui/share/share-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./share.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getAuthCode(OPTION | scopes, CALLBACK)" class="title-entry">ap.getAuthCode(OPTION | scopes, CALLBACK)</h1><p>获取授权码，具体请参考<a href="../../../fe/auth.html">用户授权接入</a>。可直接传入一个字符串作为 OPTION.scopes 参数的第一个元素。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>scopes</td><td>String/Array</td><td>否</td><td>授权类型，默认 auth_base。支持 auth_base(静默授权)/auth_user(主动授权)</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>authCode</td><td>String</td><td>授权码</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>getAuthCode<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getAuthCode(<span class="hljs-string">'auth_user'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(res.authCode);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/util/auth/getAuthCode-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/util/auth/getAuthCode-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getAuthCode.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getAuthUserInfo(CALLBACK)" class="title-entry">ap.getAuthUserInfo(CALLBACK)</h1><p>获取授权用户信息，具体请参考<a href="../../../fe/auth.html">用户授权接入</a>。</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>nickName</td><td>String</td><td>用户昵称</td></tr><tr><td>avatar</td><td>String</td><td>用户头像链接</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>getAuthUserInfo<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getAuthCode(<span class="hljs-string">'auth_user'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.getAuthUserInfo(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
        ap.alert(res.nickName);
      });
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/util/auth/getAuthUserInfo-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/util/auth/getAuthUserInfo-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getAuthUserInfo.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.getServerTime(CALLBACK)" class="title-entry">ap.getServerTime(CALLBACK)</h1><p>获取当前服务器时间的毫秒数</p><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>time</td><td>Number</td><td>服务器时间的毫秒数</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>获取服务器时间<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.getServerTime(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(res.time)
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/util/server/getServerTime-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/util/server/getServerTime-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./getServerTime.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="ap.startBizService(OPTION | name, CALLBACK)" class="title-entry">ap.startBizService(OPTION | name, CALLBACK)</h1><p>启动某项支付宝业务服务。可直接传入一个字符串作为 OPTION.name 参数。</p><h2 id="OPTION 参数说明" class="title-entry">OPTION 参数说明</h2><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>是</td><td>业务服务名称</td></tr><tr><td>params</td><td>Object</td><td>否</td><td>业务服务参数</td></tr></tbody></table></div><h2 id="CALLBACK 参数说明" class="title-entry">CALLBACK 参数说明</h2><p><strong>其他字段业务服务自行定义</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>resultStatus</td><td>String</td><td>结果状态码，详见下表</td></tr></tbody></table></div><p><strong>resultStatus 状态码</strong></p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>resultStatus</th><th>描述</th></tr></thead><tbody><tr><td>6001</td><td>用户取消了业务流程</td></tr><tr><td>6002</td><td>网络异常</td></tr></tbody></table></div><h2 id="代码示例" class="title-entry">代码示例</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://a.alipayobjects.com/g/h5-lib/alipayjsapi/3.0.2/alipayjsapi.inc.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>启动芝麻信用借还服务<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_btn'</span>);
  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ap.startBizService(<span class="hljs-string">'zm-borrow'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
      ap.alert(res.resultStatus);
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/alipayjsapi/util/service/startBizService-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/alipayjsapi/util/service/startBizService-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="其他说明" class="title-entry">其他说明</h2><ul><li>此接口支付宝 10.0.15 及以上支持</li></ul><a class="my-pdf-link" target="blank" href="./startBizService.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h2 id="常用资源内置" class="title-entry">常用资源内置</h2><p>这些常用组件已经包含在容器中，使用<code>&lt;script src=&quot;{{src}}&quot;&gt;&lt;/script&gt;</code>不会产生网络流量。</p><p>如需要其他资源，可以自己打包内置在应用里。</p><ul><li>AntUI 10.0.0版本: <code>https://a.alipayobjects.com/g/antui/antui/10.0.0/rem/antui.css</code></li><li>zepto: <code>https://a.alipayobjects.com/amui/zepto/1.1.3/zepto.js</code></li><li>fastclick: <code>https://a.alipayobjects.com/static/fastclick/1.0.6/fastclick.min.js</code></li><li>antbridge.js 1.1.4版本：<code>https://a.alipayobjects.com/g/component/antbridge/1.1.4/antbridge.min.js</code></li><li>Anima-yocto 1.1.10版本：<code>https://a.alipayobjects.com/anima-yocto/1.1.10/index.js</code></li><li>swiper 3.2.7版本：<code>https://as.alipayobjects.com/g/component/swiper/3.2.7/swiper.min.js</code>, <code>https://as.alipayobjects.com/g/component/swiper/3.2.7/swiper.min.css</code></li><li>react: <code>https://as.alipayobjects.com/g/component/react/15.3.2/react.min.js</code>, <code>https://as.alipayobjects.com/g/component/react/15.3.2/react-dom.min.js</code></li><li>vuejs 1.0.26: <code>https://as.alipayobjects.com/g/h5-lib/vue/1.0.26/vue.min.js</code></li><li>vuejs 2.1.6: <code>https://a.alipayobjects.com/g/h5-lib/vue/2.1.6/vue.min.js</code></li><li>seedjs 3.1.0: <code>https://a.alipayobjects.com/g/animajs/mtracker/3.1.0/seed.js</code></li><li>es6: <code>https://as.alipayobjects.com/g/component/es6-promise/3.2.2/es6-promise.min.js</code>, <code>https://as.alipayobjects.com/g/component/fetch/1.0.0/fetch.min.js</code></li></ul><p>通用错误图片：</p><ul><li><p>加载出错：<a href="https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/error.png">https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/error.png</a></p></li><li><p>系统繁忙：<a href="https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/system_busy.png">https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/system_busy.png</a></p></li><li><p>网络错误：<a href="https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/no_network.png">https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/no_network.png</a></p></li><li><p>空白页面：<a href="https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/blank_page.png">https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/blank_page.png</a></p></li><li><p>404页面：<a href="https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/404.png">https://a.alipayobjects.com/g/antui/antui-img/1.0.0/page-result/404.png</a></p></li></ul><a class="my-pdf-link" target="blank" href="./preset-assets.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="其他参考资料" class="title-entry">其他参考资料</h1><h2 id="开发库" class="title-entry">开发库</h2><ul><li><a href="https://mobile.ant.design/">Ant Design Mobile （React 推荐首选）</a></li><li><a href="http://am-team.github.io/antui/nav.html">AntUI</a></li><li><a href="https://doc.open.alipay.com/">支付宝开放平台文档中心</a></li></ul><h2 id="Javascript" class="title-entry">Javascript</h2><ul><li><a href="http://bonsaiden.github.io/JavaScript-Garden/">Javascript Garden</a></li><li><a href="http://davidwalsh.name/es6-generators">The Basics Of ES6 Generators</a></li><li><a href="https://leanpub.com/understandinges6/read">Understanding ECMAScript 6</a></li><li><a href="http://jsbooks.revolunet.com/">Javascript online free books</a></li><li><a href="http://es6.ruanyifeng.com/">阮一峰ES6之书</a></li></ul><a class="my-pdf-link" target="blank" href="./ref.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="exitApp" class="title-entry">exitApp</h1><p>exitApp用于退出当前应用所有的页面</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'exitApp'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="退出当前的页面" class="title-entry">退出当前的页面</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击退出当前页面<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'exitApp'</span>);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/exit-app-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/exit-app-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="页面跳转完整实例" class="title-entry">页面跳转完整实例</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击下面按钮来进行页面间跳转<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"new"</span>&gt;</span>新开当前页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"back"</span>&gt;</span>返回一级<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"popTo"</span>&gt;</span>通过popTo退2级<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"exit"</span>&gt;</span>关闭所有页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getQuery</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> match;
  <span class="hljs-keyword">const</span> urlParams = {};
  <span class="hljs-keyword">const</span> pl = <span class="hljs-regexp">/\+/g</span>;  <span class="hljs-comment">// Regex for replacing addition symbol with a space</span>
  <span class="hljs-keyword">const</span> search = <span class="hljs-regexp">/([^&amp;=]+)=?([^&amp;]*)/g</span>;
  <span class="hljs-keyword">const</span> decode = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(s.replace(pl, <span class="hljs-string">' '</span>));
  };
  <span class="hljs-keyword">const</span> query = <span class="hljs-built_in">decodeURI</span>(<span class="hljs-built_in">window</span>.location.search.substring(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">while</span> (match = search.exec(query)) {
    urlParams[decode(match[<span class="hljs-number">1</span>])] = decode(match[<span class="hljs-number">2</span>]);
  }

  <span class="hljs-keyword">return</span> urlParams;
};

<span class="hljs-keyword">var</span> query = getQuery();
<span class="hljs-keyword">var</span> depth = (+query.depth) || <span class="hljs-number">0</span>;

<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'h3'</span>).innerHTML = <span class="hljs-string">'当前页面深度: '</span> + depth;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.new'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
      <span class="hljs-attr">url</span>: location.pathname + <span class="hljs-string">'?depth='</span> + (<span class="hljs-number">1</span>+depth),
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.back'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'popWindow'</span>, {
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'popWindow'</span>,
        <span class="hljs-attr">depth</span>: depth,
      }
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.popTo'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'popTo'</span>, {
      <span class="hljs-attr">index</span>: <span class="hljs-number">-2</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'popTo'</span>,
        <span class="hljs-attr">depth</span>: depth,
      }
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      <span class="hljs-keyword">if</span>(e.error) {
        alert(<span class="hljs-string">'发生错误: '</span> + <span class="hljs-built_in">JSON</span>.stringify(e));
      }
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.exit'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'exitApp'</span>);
  });
});

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'resume'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
  alert(<span class="hljs-string">'页面回退时带过来的内容： '</span> + <span class="hljs-built_in">JSON</span>.stringify(event.data));
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/exit-app-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/exit-app-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>对于没有申请过appId的页面，都是以20000067这个appId运行，因此，任何页面内调用<code>exitApp</code>，所有页面都会关闭。</li></ul><a class="my-pdf-link" target="blank" href="./exit-app.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="popTo" class="title-entry">popTo</h1><p>popTo可以一次回退多级页面</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">// 关闭当前打开的页面</span>
AlipayJSBridge.call(<span class="hljs-string">'popTo'</span>, {
  <span class="hljs-attr">index</span>: <span class="hljs-number">-1</span>
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="关闭当前页面并且传递数据" class="title-entry">关闭当前页面并且传递数据</h3><div class="demo-wrap"><pre class="hljs"><code>

<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>第二步，点击执行关闭当前页面并返回数据<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// 传递的data对象将会被即将露出的页面通过resume事件接收</span>
    AlipayJSBridge.call(<span class="hljs-string">'popTo'</span>, {
      <span class="hljs-attr">index</span>: <span class="hljs-number">-1</span>, <span class="hljs-comment">// 回退到上一个页面，假如这个时候没有上一个页面，就会报错</span>
      data: { <span class="hljs-comment">//特别强调：data是字典，不是数组</span>
        <span class="hljs-keyword">from</span>: location.href,
        <span class="hljs-attr">info</span>: <span class="hljs-string">'xxxx'</span>
      }
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ <span class="hljs-comment">// 添加回调，因为popTo不一定会成功（当前页面是唯一打开的页面的时候，会报错）</span>
      alert(<span class="hljs-built_in">JSON</span>.stringify(e));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/pop-to-data.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/pop-to-data.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="通过url返回到指定的页面" class="title-entry">通过url返回到指定的页面</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>返回到指定的url<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_new_window"</span>&gt;</span>新窗口打开当前页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>返回2级<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> query = getQuery();
<span class="hljs-keyword">var</span> depth = (+query.depth) || <span class="hljs-number">0</span>;

<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'h3'</span>).innerHTML = <span class="hljs-string">'当前页面深度: '</span> + depth;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.J_demo'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// 返回2级</span>
    <span class="hljs-keyword">var</span> queryString = depth <span class="hljs-number">-2</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'?depth='</span> + (depth <span class="hljs-number">-2</span>) : <span class="hljs-string">''</span>;
     AlipayJSBridge.call(<span class="hljs-string">'popTo'</span>, {
       <span class="hljs-attr">url</span>: location.pathname + queryString,
     }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
       alert(<span class="hljs-built_in">JSON</span>.stringify(e));
     });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.J_new_window'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
     AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
       <span class="hljs-attr">url</span>: location.pathname + <span class="hljs-string">'?depth='</span> + (<span class="hljs-number">1</span>+depth),
     });
  });
});

<span class="hljs-comment">// 返回当前queryString的对象： {query: 1}</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getQuery</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> match;
  <span class="hljs-keyword">var</span> urlParams = {};
  <span class="hljs-keyword">var</span> pl = <span class="hljs-regexp">/\+/g</span>;  <span class="hljs-comment">// Regex for replacing addition symbol with a space</span>
  <span class="hljs-keyword">var</span> search = <span class="hljs-regexp">/([^&amp;=]+)=?([^&amp;]*)/g</span>;
  <span class="hljs-keyword">var</span> decode = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(s.replace(pl, <span class="hljs-string">' '</span>));
  };
  <span class="hljs-keyword">var</span> query = <span class="hljs-built_in">decodeURI</span>(<span class="hljs-built_in">window</span>.location.search.substring(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">while</span> (match = search.exec(query)) {
    urlParams[decode(match[<span class="hljs-number">1</span>])] = decode(match[<span class="hljs-number">2</span>]);
  }

  <span class="hljs-keyword">return</span> urlParams;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/pop-to-url.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/pop-to-url.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="通过urlPattern返回到符合正则匹配的页面" class="title-entry">通过urlPattern返回到符合正则匹配的页面</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>返回到符合某个规则的url<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_new_window"</span>&gt;</span>新窗口打开当前页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>返回<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> query = getQuery();
<span class="hljs-keyword">var</span> depth = (+query.depth) || <span class="hljs-number">0</span>;

<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'h3'</span>).innerHTML = <span class="hljs-string">'当前页面深度: '</span> + depth;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.J_demo'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
     AlipayJSBridge.call(<span class="hljs-string">'popTo'</span>, {
       <span class="hljs-attr">urlPattern</span>: <span class="hljs-string">'pop-to-url-pattern.html'</span>,
     }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
       alert(<span class="hljs-built_in">JSON</span>.stringify(e));
     });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.J_new_window'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
     AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
       <span class="hljs-attr">url</span>: location.pathname + <span class="hljs-string">'?depth='</span> + (<span class="hljs-number">1</span>+depth),
     });
  });
});

<span class="hljs-comment">// 返回当前queryString的对象： {query: 1}</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getQuery</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> match;
  <span class="hljs-keyword">var</span> urlParams = {};
  <span class="hljs-keyword">var</span> pl = <span class="hljs-regexp">/\+/g</span>;  <span class="hljs-comment">// Regex for replacing addition symbol with a space</span>
  <span class="hljs-keyword">var</span> search = <span class="hljs-regexp">/([^&amp;=]+)=?([^&amp;]*)/g</span>;
  <span class="hljs-keyword">var</span> decode = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(s.replace(pl, <span class="hljs-string">' '</span>));
  };
  <span class="hljs-keyword">var</span> query = <span class="hljs-built_in">decodeURI</span>(<span class="hljs-built_in">window</span>.location.search.substring(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">while</span> (match = search.exec(query)) {
    urlParams[decode(match[<span class="hljs-number">1</span>])] = decode(match[<span class="hljs-number">2</span>]);
  }

  <span class="hljs-keyword">return</span> urlParams;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/pop-to-url-pattern.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/pop-to-url-pattern.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'popTo'</span>,{
  index, url, urlPattern
}, fn)
</code></pre></div><p>index, url, urlPattern 这是3种查询模式，不应该被同时使用。</p><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>index</td><td>int</td><td>目标界面在会话界面栈中的索引；如果小于零，则将与当前界面的index相加</td><td>Y</td><td></td><td></td></tr><tr><td>url</td><td>string</td><td>目标界面的完整URL</td><td>Y</td><td></td><td></td></tr><tr><td>urlPattern</td><td>string</td><td>目标界面的URL匹配表达式（URL如果包含urlPattern，匹配成功） Y</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>操作成功时，回调可能不被调用；操作失败时，回调函数执行</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>result</td><td>undefined</td><td>操作成功时，回调可能不被调用；result不应被使用</td></tr></tbody></table></div><h3 id="错误" class="title-entry">错误</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>未配置参数；<br>无效的index;<br>未匹配url;<br>未匹配urlPattern;</td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>一般情况下，<code>popTo</code>用于分多步才能完成的场景，比如用户信息完善时回退，三级地址选择后返回等。</li><li>如果通过url或者urlPattern来返回，<code>popTo</code>会返回到离当前页面最远的页面，也就是栈底。同时不会去检测当前页面的url是否符合。</li><li><code>popTo</code>时所带的data如何被接收？ 请查看<a href="../events/resume.html">resume事件</a></li></ul><a class="my-pdf-link" target="blank" href="./pop-to.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="popWindow" class="title-entry">popWindow</h1><p>popWindow用来关闭当前页面</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">// 关闭当前打开的页面</span>
AlipayJSBridge.call(<span class="hljs-string">'popWindow'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="关闭当前页面" class="title-entry">关闭当前页面</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>关闭当前页面<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'popWindow'</span>);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/pop-window-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/pop-window-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="关闭当前页面并且传递数据" class="title-entry">关闭当前页面并且传递数据</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>关闭当前页面并返回数据<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// 传递的data对象将会被即将露出的页面通过resume事件接收</span>
    AlipayJSBridge.call(<span class="hljs-string">'popWindow'</span>, {
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">from</span>: location.href,
        <span class="hljs-attr">info</span>: <span class="hljs-string">'xxxx'</span>
      }
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/pop-window-data.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/pop-window-data.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'popWindow'</span>,{
  data
})
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>data</td><td>object</td><td>传递给即将露出页面的内容</td><td>N</td><td></td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>closeWebview</code>是<code>popWindow</code>的别名，使用方式是<code>AlipayJSBridge.call(&#39;closeWebview&#39;)</code></li><li><code>popWindow</code>时所带的data如何被接收？ 请查看<a href="../jsapi/events/resume.html">resume事件</a></li></ul><a class="my-pdf-link" target="blank" href="./pop-window.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="pushWindow" class="title-entry">pushWindow</h1><p>pushWindow用来打开一个新的页面，自带转场动画。</p><p>与location.href的区别，类同于PC浏览器的新开标签页，每个window都是一个新的标签页，因此原页面仅仅是被压到后台，状态始终保持，JS也会继续运行。</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">// 打开淘宝首页，自动读取title，并且去除右边菜单</span>
AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
  <span class="hljs-attr">url</span>: <span class="hljs-string">'https://m.taobao.com/'</span>,
  <span class="hljs-attr">param</span>: {
    <span class="hljs-attr">readTitle</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">showOptionMenu</span>: <span class="hljs-literal">false</span>
  }
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="打开淘宝首页，去除右边菜单" class="title-entry">打开淘宝首页，去除右边菜单</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>打开淘宝首页<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// 打开淘宝首页，自动读取title，并且去除右边菜单</span>
    AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://m.taobao.com/'</span>,
      <span class="hljs-attr">param</span>: {
        <span class="hljs-attr">readTitle</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">showOptionMenu</span>: <span class="hljs-literal">false</span>
      }
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/push-window-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/push-window-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="用schema的方式打开页面" class="title-entry">用schema的方式打开页面</h3><p>9.9.5开始支持，此前使用该方式会导致先打开一个空白页面。</p><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>打开指定app<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlpayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'alipays://platformapi/startapp?appId=20000981'</span>,
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/push-window-schema.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/push-window-schema.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="打开时设置透明标题栏" class="title-entry">打开时设置透明标题栏</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>打开淘宝首页<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>执行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://m.taobao.com'</span>,
      <span class="hljs-attr">param</span>: {
        <span class="hljs-attr">transparentTitle</span>: <span class="hljs-string">'auto'</span>
      }
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/context/push-window-transparent-title.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/context/push-window-transparent-title.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
  url, param
})
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>url</td><td>string</td><td>要打开的url</td><td>Y</td><td></td><td></td></tr><tr><td>param</td><td>dictionary</td><td>支持的key/value对下面的表格</td><td>N</td><td>{}</td><td></td></tr></tbody></table></div><h3 id="param参数详解" class="title-entry">param参数详解</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>defaultTitle</td><td>string</td><td>默认标题, 在页面第一次加载之前显示在标题栏上</td><td>‘’</td><td></td></tr><tr><td>showLoading</td><td>bool</td><td>是否在页面加载前显示全局菊花</td><td>false</td><td></td></tr><tr><td>readTitle</td><td>bool</td><td>是否读取网页标题显示在titleBar上</td><td>true</td><td></td></tr><tr><td>pullRefresh</td><td>bool</td><td>是否支持下拉刷新<br>只有集团域/本地文件允许设置为true</td><td>false</td><td>since 8.2</td></tr><tr><td>toolbarMenu</td><td>string</td><td>JSON字符串，更多的菜单项列表（放在分享、字号、复制链接后面）<br>例：{“menus”:[{“name”:”恭喜”,”icon”:”H5Service.bundle/h5_popovermenu_share”,”action”:”hello”},{“name”:”发财”,”icon”:”H5Service.bundle/h5_popovermenu_abuse”,”action”:”world”}]}</td><td>‘’</td><td>since 8.2</td></tr><tr><td>canPullDown</td><td>bool</td><td>页面是否支持下拉（显示出黑色背景或者域名）<br>只有<em>.alipay.com/</em>.alipay.net/本地文件允许设置为false<br>9.9.5废弃， 使用’allowsBounceVertical’替代</td><td>true</td><td>android since 8.3<br>ios since 8.4，</td></tr><tr><td>allowsBounceVertical</td><td>bool</td><td>页面是否支持纵向拽拉超出实际内容，android只支持下拉（显示出背景或者域名）<br>只有<em>.alipay.com/</em>.alipay.net/本地文件允许设置为false</td><td>true</td><td>since 9.9.3</td></tr><tr><td>bounceTopColor</td><td>int</td><td>下拉超出时，顶部间缝颜色（十进制，例如：bc=16775138）</td><td>不设置时与9.9.3之前显示一致</td><td>since 9.9.3</td></tr><tr><td>bounceBottomColor</td><td>int</td><td>上拉超出时，底部间缝颜色（十进制，例如：bc=16775138）</td><td>不设置时与9.9.3之前显示一致</td><td>since 9.9.3(only IOS)</td></tr><tr><td>showTitleLoading</td><td>bool</td><td>是否在TitleBar的标题左边显示小菊花</td><td>false</td><td>since 8.6</td></tr><tr><td>preRpc</td><td>string</td><td>在页面启动参数里配置rpc请求的参数preRpc（需要使用utf-8编码），在打开页面的同时请求rpc。详细使用参考RPC接口介绍</td><td></td><td>since 9.3</td></tr><tr><td>delayRender</td><td>bool</td><td>是否启动延迟渲染功能<br>注：本功能目前由线上开关控制，若线上开关打开，且指定启动参数为YES或TRUE则生效</td><td>false</td><td>since 9.3.1(only Android)</td></tr><tr><td>transparentTitle</td><td>bool</td><td>(不能与titleBarColor同时使用)<br>always/auto 如果transparentTitle为字符串always，则当前页面上下滚动时，titlebar一直全透明；<br>当transparentTitle值为auto，当页面往下滚动时，透明度不断增加，直到scrollTop等于80pt时变成完全不透明，此时页面再往上滚动则反之，透明度不断减小直到回到顶部时变成完全不透明。<br>如果个页面不需要透明效果，则需要用pushWindow的param参数重新指定transparentTitle为”none”</td><td>‘’</td><td>since 9.5.1</td></tr><tr><td>titleBarColor</td><td>int</td><td>(9.9版本以下不能与transparentTitle同时使用)自定义titlebar的背景色，（十进制，例如：bc=16775138）</td><td></td><td></td></tr><tr><td>scrollDistance</td><td>int</td><td>在 transparentTitle auto的情况下，滑动到透明度为0.96的距离</td><td>iOS(80)</td><td>since 9.9</td></tr><tr><td>startMultApp</td><td>bool</td><td>是否启动相同appID的应用</td><td>false</td><td>since 9.9</td></tr><tr><td>titleImage</td><td>string</td><td>所要使用的title图片地址，请上传一张3X PNG 图，只影响当前的VC，pushWindow不会自动传递此参数，为了更好的体验可以把图放在全局运营资源包中</td><td>‘’</td><td>since 9.9.5</td></tr><tr><td>closeCurrentWindow</td><td>bool</td><td>打开窗口的同时，关闭当前window。<strong>警告：iOS上发现有缺陷:被打开的新页面会导致无法再通过exitApp或startApp+closeCurrentApp来关闭，这种使用场景请勿使用pushWindow+closeCurrentWindow</strong></td><td>false</td><td>since 9.9.2</td></tr></tbody></table></div><p></p><h3 id="pushWindow参数默认继承" class="title-entry">pushWindow参数默认继承</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>继承</th><th>备注</th></tr></thead><tbody><tr><td>url</td><td>Y</td><td></td></tr><tr><td>defaultTitle</td><td>Y</td><td></td></tr><tr><td>backBehavior</td><td>Y</td><td>优先用户指定,否则pop</td></tr><tr><td>showLoading</td><td>Y</td><td></td></tr><tr><td>readTitle</td><td>Y</td><td></td></tr><tr><td>pullRefresh</td><td>Y</td><td></td></tr><tr><td>toolbarMenu</td><td>Y</td><td></td></tr><tr><td>showProgress</td><td>Y</td><td></td></tr><tr><td>defaultSubtitle</td><td>Y</td><td></td></tr><tr><td>backgroundColor</td><td>Y</td><td></td></tr><tr><td>canPullDown</td><td>Y</td><td></td></tr><tr><td>showOptionMenu</td><td>Y</td><td></td></tr><tr><td>showTitleLoading</td><td>Y</td><td></td></tr><tr><td>showDomain</td><td>Y</td><td></td></tr></tbody></table></div><h2 id="如何正确理解pushWindow与location.href" class="title-entry">如何正确理解pushWindow与location.href</h2><blockquote><p>许多新手都会不太理解pushWindow和location.href的区别，同时也会疑惑为什么resume没有被触发之类的问题。 本篇话题只需要几分钟就能把这几个功能解释清楚。</p></blockquote><ul><li>首先把Nebula容器理解为一个PC浏览器。</li><li>「Window」可以理解为「标签页」；location.href就是正常的a标签跳转。</li><li>pushWindow实际上就是新开了一个「标签页」，并且把之前那一页压到下面，push出来的这页放在顶层展现。此时被压到下面的上一页所有状态均保留。</li><li>location.href就是依然停留在这个「标签页」，直接做页面跳转</li><li>当pushWindow出来的「标签页」被关闭(pop)时，如果之前还有window存在，那么之前那个window就会恢复显示，并触发resume</li></ul><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>pushWindow</code>打开url页面的时候不会关闭已经存在的页面，注意打开个数，不要开太多影响性能。<strong>建议同一个应用<code>pushWindow</code>层级不要超过5层，否则会影响用户体验以及有可能导致应用crash</strong>。</li><li><code>pushWindow</code>打开schema页面的时候会关闭这个appId已经存在的所有页面，然后打开一个新的。 比如已经打开了200000981，然后再使用<code>pushWindow</code>打开这个appId，那么当前的20000981页面会被关闭</li><li>使用schema的时候，假如参数不生效，请不要担心，因为每个app有配置会覆盖传入的参数。 比如上述的20000981，传入<code>transparentTitle: &#39;auto&#39;</code>是没有效果的。</li><li>9.9.2版本开始，可以使用<code>closeCurrentWindow</code>参数来替代<code>window.location.href</code>跳转,而且有动画效果支持，这样可以实现关闭当前window的同时打开一个新页面。但在iOS发现有缺陷，被打开的新页面会导致无法再通过exitApp或startApp+closeCurrentApp来关闭自身，这种使用场景请勿使用pushWindow+closeCurrentWindow。</li></ul><a class="my-pdf-link" target="blank" href="./push-window.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="AlipayJSBridgeReady" class="title-entry">AlipayJSBridgeReady</h1><p>window.onload以后，容器会初始化，产生一个全局变量AlipayJSBridge, 然后触发此事件</p><p>AlipayJSBridge注入是一个异步过程，因此尽可能先监听该事件后再call接口。</p><p>强烈建议换用antBridge.js来简化JSAPI调用。</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="bridge入口标准写法" class="title-entry">bridge入口标准写法</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>bridge使用方法<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}

ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  alert(<span class="hljs-string">'bridge ready'</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/alipay-js-bridge-ready-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/alipay-js-bridge-ready-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><p><a class="my-pdf-link" target="blank" href="./alipay-js-bridge-ready.html.pdf">查看PDF版本</a></p></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.6</span></div><h1 id="h5NetworkChange" class="title-entry">h5NetworkChange</h1><p>网络环境发生变化时，会触发这个事件，如需详细网络环境信息，请使用<code>getNetworkType</code>来获取</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'h5NetworkChange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">"网络环境发生变化，可调用getNetworkType接口获取详细信息"</span>);
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请切换手机网络模式，比如wifi和4g<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'h5NetworkChange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  <span class="hljs-comment">// **注意安卓下addEventListener里的e不能用JSON.stringify，这里的e在UC下不是一个有效的可序列化对象**</span>

  alert(<span class="hljs-string">"我收到网络变化了"</span>);
  <span class="hljs-comment">//网络环境发生变化，可调用getNetworkType接口获取详细信息</span>
  AlipayJSBridge.call(<span class="hljs-string">'getNetworkType'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
    alert(<span class="hljs-built_in">JSON</span>.stringify(result));
  });
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/h5-network-changed-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/h5-network-changed-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>3G切换到4G时系统不会发出网络切换通知。 4G切到3G时，会先从4G跳到2G，然后再从2G跳3G，因此会通知两次</li><li>安卓下回调函数内部不能对e进行JSON.stringify操作，这个e对象不是可被序列化的。</li></ul><a class="my-pdf-link" target="blank" href="./h5-network-changed.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="optionMenu" class="title-entry">optionMenu</h1><p>当调用setOptionMenu接口，自定义了导航栏右上角按钮以后，点击按钮时触发该事件</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'optionMenu'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">"option menu clicked"</span>);
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能演示" class="title-entry">基本功能演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击右上角菜单查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
    <span class="hljs-attr">title</span> : <span class="hljs-string">'按钮'</span>,
    <span class="hljs-attr">redDot</span> : <span class="hljs-string">'5'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
    color : <span class="hljs-string">'#ff00ff00'</span>, <span class="hljs-comment">// 必须以＃开始ARGB颜色值</span>
  });
});

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'optionMenu'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">"optionMenu clicked!"</span>);
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/option-menu-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/option-menu-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="多个optionMenu情况的事件" class="title-entry">多个optionMenu情况的事件</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击右上角每个菜单查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
    <span class="hljs-comment">// 显示的时候是从后往前显示的</span>
    menus: [{
      <span class="hljs-attr">icontype</span>: <span class="hljs-string">'scan'</span>,
      <span class="hljs-attr">redDot</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
    }, {
      <span class="hljs-attr">icontype</span>: <span class="hljs-string">'user'</span>,
      <span class="hljs-attr">redDot</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
    }],
    <span class="hljs-attr">override</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">//在需要设置多个option的情况下，是否保留默认的optionMenu</span>
  });

  <span class="hljs-comment">// 必须强制调用一把刷新界面</span>
  AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
});

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'optionMenu'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(e));
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/option-menu-multi.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/option-menu-multi.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>假如没有设置过optionMenu，那么这个事件是无法被触发的，也就是说点击默认的…是无法触发optionMenu事件的。</li></ul><a class="my-pdf-link" target="blank" href="./option-menu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.1</span></div><h1 id="pause" class="title-entry">pause</h1><p>当一个webview界面不可见时(被压入后台、锁屏、pushwindow到下个页面)，会触发此事件.</p><p>备注：10.0.15客户端以上，容器新增了pagePause和appPause事件，用于业务区分是哪种情况触发的pause。<br>注意： 由于Android原生的resume和pause事件不能区分是压后台导致还是页面切换导致，所以pageResume和pagePause事件是通过jsapi调用记录去回调的，所以仅适用于同一个session内window之间的互相切换。对于startApp和其他客户端直接切换页面方式（比如chooseImage)不生效。</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'pause'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">"pause"</span>);
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="离开当前页面后弹出alert" class="title-entry">离开当前页面后弹出alert</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击按钮打开一个新窗口<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_new_window"</span>&gt;</span>新窗口打开当前页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.J_new_window'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
      <span class="hljs-attr">url</span>: location.pathname,
    });
  });
});

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'pause'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">'paused'</span>);
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/pause-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/pause-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./pause.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.9</span></div><h1 id="popMenuClick" class="title-entry">popMenuClick</h1><p>标题栏右边popMenu点击后触发的事件</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'popMenuClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  <span class="hljs-comment">//得到name属性值</span>
  <span class="hljs-built_in">console</span>.log(e.data.title); <span class="hljs-comment">// 这里不是name，是title</span>
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能演示" class="title-entry">基本功能演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击右上角弹出的菜单<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  AlipayJSBridge.call(<span class="hljs-string">'showPopMenu'</span>,{
    <span class="hljs-attr">menus</span>:[
      {<span class="hljs-attr">name</span>:<span class="hljs-string">"字体"</span>, <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>},
      {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项2"</span>,  <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>},
      {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项3"</span>,  <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>}
    ]
  }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-built_in">console</span>.log(e);
  });
});

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'popMenuClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(e.data));
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/pop-menu-click-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/pop-menu-click-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./pop-menu-click.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="resume" class="title-entry">resume</h1><p>当一个webview界面重新回到栈顶时(从后台被唤起、锁屏界面恢复、从下个页面回退)，会触发此事件。<br>如果这个界面是通过popWindow/popTo到达，且传递了data参数，此页可以获取到data。<br>如果在界面的resume之前先发生了app的resume, 则event还会有一个resumeParams, 包含app resume时接收到的参数</p><p>备注：10.0.15客户端以上，容器新增了pageResume和appResume事件，用于业务区分是哪种情况触发的resume。<br>注意： 由于Android原生的resume和pause事件不能区分是压后台导致还是页面切换导致，所以pageResume和pagePause事件是通过jsapi调用记录去回调的，所以仅适用于同一个session内window之间的互相切换。对于startApp和其他客户端直接切换页面方式（比如chooseImage)不生效。</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'resume'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"resumed"</span>);
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="返回的时候有数据带过来" class="title-entry">返回的时候有数据带过来</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>首先打开一个页面，新页面返回时带数据回这个页面<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'pushWindow'</span>, {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/jsapi/context/pop-window-data.html'</span>
    });
  });
});

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'resume'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
  alert(<span class="hljs-string">'页面回退时带过来的内容： '</span> + <span class="hljs-built_in">JSON</span>.stringify(event.data));
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/resume-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/resume-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><h3 id="出参" class="title-entry">出参</h3><p>事件处理函数的event会有2个属性</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>object</td><td>popTo或者popWindow带过来的内容</td></tr><tr><td>resumeParams</td><td>object</td><td>包含app resume时接收到的参数</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./resume.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="subtitleClick" class="title-entry">subtitleClick</h1><p>点击导航栏副标题触发回调</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'subtitleClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">'subtitle clicked'</span>)
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能演示" class="title-entry">基本功能演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击副标题查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'subtitleClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">'subtitle clicked'</span>)
}, <span class="hljs-literal">false</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'标题'</span>,
    <span class="hljs-attr">subtitle</span>: <span class="hljs-string">'副标题'</span>
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/subtitle-click-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/subtitle-click-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./subtitle-click.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="titleClick" class="title-entry">titleClick</h1><p>点击导航栏标题触发回调</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'titleClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">'title clicked'</span>)
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能演示" class="title-entry">基本功能演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击标题查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'titleClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">'title clicked'</span>)
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/events/title-click-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/events/title-click-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./title-click.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="应用简述" class="title-entry">应用简述</h1><h2 id="接口通用调用示例" class="title-entry">接口通用调用示例</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">// 由于机制问题，JSAPI注入是异步过程，时序无法保证。</span>
<span class="hljs-comment">// 如果使用原生AlipayJSBridge接口，需要先监听AlipayJSBridgeReady事件后再调用原生JSAPI接口。</span>
<span class="hljs-comment">// 建议使用antBridge.js来调用JSAPI，无需考虑时序问题。</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  AlipayJSBridge.call(<span class="hljs-string">'toast'</span>, {
    <span class="hljs-attr">content</span>: <span class="hljs-string">'HELLO'</span>
  });
});
</code></pre></div><h2 id="使用AlipayJSAPI" class="title-entry">使用AlipayJSAPI</h2><ul><li><a href="../alipayjsapi/">alipayjsapi</a></li></ul><h2 id="错误处理约定" class="title-entry">错误处理约定</h2><p>jsAPI的回调函数的参数是一个<strong>dictionary</strong>, 里面可能包含一个特殊的字段error，作为api调用的错误码，示例</p><div class="code-wrap"><pre class="hljs"><code>{
  <span class="hljs-attr">error</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">errorMessage</span>: <span class="hljs-string">'接口不存在'</span>
}
</code></pre></div><p>小于10为通用错误码，具体api对应使用。定义以下通用错误码:</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>含义</th></tr></thead><tbody><tr><td>1</td><td>接口不存在</td></tr><tr><td>2</td><td>参数无效</td></tr><tr><td>3</td><td>发生未知错误</td></tr><tr><td>4</td><td>接口无权限</td></tr></tbody></table></div><h2 id="界面名词简介" class="title-entry">界面名词简介</h2><ul><li>图片中加红框的部分，均是<strong>native</strong>界面，可由<strong>AlipayJSBridge</strong>的<strong>api</strong>控制显示方式</li><li>Native界面部分不占用window窗口高度，css中无需预留高度</li></ul><h3 id="标题栏" class="title-entry">标题栏</h3><p><img src="https://zos.alipayobjects.com/rmsportal/TqWaeKtepTswdHi.jpg" alt="interface"></p><p></p><h2 id="环境变量" class="title-entry">环境变量</h2><h3 id="navigator.userAgent" class="title-entry">navigator.userAgent</h3><p>包含钱包版本信息，如</p><div class="code-wrap"><pre class="hljs"><code>"Mozilla/5.0......AlipayDefined(nt:WIFI,ws:320|504|2.0) AliApp(AP/9.6.0.000001) AlipayClient/9.6.0.000001 Language/zh-Hans ProductType/dev"
</code></pre></div><h3 id="AlipayJSBridge.startupParams" class="title-entry">AlipayJSBridge.startupParams</h3><p>可通过该环境变量获取当前app的启动参数，如</p><div class="code-wrap"><pre class="hljs"><code>{<span class="hljs-attr">"appId"</span>:<span class="hljs-string">"xxxxxxxx"</span>,<span class="hljs-attr">"st"</span>: <span class="hljs-string">"YES"</span>, <span class="hljs-attr">"sb"</span>: <span class="hljs-string">"NO"</span>, <span class="hljs-attr">"url"</span>: <span class="hljs-string">"https://m.taobao.com/"</span>}
</code></pre></div><p><strong>警告：由于iOS容器的某个缓存机制兼容性问题，极端场景下通过startupParams环境变量可能会获取到上一次打开相同页面的值，因此切勿通过启动参数机制来传递重要的自定义业务参数。</strong></p><a class="my-pdf-link" target="blank" href="./index.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="chooseImage" class="title-entry">chooseImage</h1><p>拍照或从手机相册中选图接口</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'chooseImage'</span>, {
  <span class="hljs-attr">sourceType</span>: [<span class="hljs-string">'camera'</span>, <span class="hljs-string">'album'</span>],
  <span class="hljs-attr">count</span>: <span class="hljs-number">9</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本使用" class="title-entry">基本使用</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮选择图片<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_chooseImage"</span>&gt;</span>选择图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'J_chooseImage'</span>);

  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    AlipayJSBridge.call(
      <span class="hljs-string">'chooseImage'</span>,
      {
        <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>
      },
      <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
        alert(<span class="hljs-string">'chooseImage: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
        <span class="hljs-keyword">var</span> uploadParams = {
          <span class="hljs-attr">url</span>: <span class="hljs-string">'http://h5test.inc.alipay.net:3000/upload'</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'h5test'</span>
        };
        <span class="hljs-keyword">if</span>(result.localIds &amp;&amp; result.localIds.length &gt; <span class="hljs-number">0</span>){
          uploadParams.localId = result.localIds[<span class="hljs-number">0</span>];
          uploadParams.type = <span class="hljs-string">'image'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.tempFilePaths &amp;&amp; result.tempFilePaths.length &gt; <span class="hljs-number">0</span>){
          uploadParams.filePath = result.tempFilePaths[<span class="hljs-number">0</span>].replace(<span class="hljs-string">'file://'</span>, <span class="hljs-string">''</span>);
        }
        AlipayJSBridge.call(<span class="hljs-string">'uploadFile'</span>, uploadParams, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
          alert(<span class="hljs-string">'uploadFile: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
        });
      }
    );
  }, <span class="hljs-literal">false</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/multimedia/choose-image-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/multimedia/choose-image-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'chooseImage'</span>, {
  <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'camera'</span>,
  <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>
}, fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>count</td><td>number</td><td>最大可选照片数</td><td>N</td><td>默认9张</td><td>9.9.7</td></tr><tr><td>sourceType</td><td>array</td><td>相册选取或者拍照</td><td>N</td><td>[‘camera’,’album’]</td><td>9.9.7</td></tr><tr><td>publicDomain</td><td>bool</td><td>是否准备上传到公有域，上传到公有域的图片在访问的时候不需要鉴权</td><td>N</td><td>false</td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {error }</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>localIds</td><td>array</td><td>图片多媒体LocalId iOS使用</td></tr><tr><td>tempFilePath</td><td>jsonString</td><td>图片文件路径 Android使用</td></tr><tr><td>success</td><td>bool</td><td>是否返回成功</td></tr><tr><td>errorCode</td><td>string</td><td>错误码</td></tr></tbody></table></div><h3 id="错误" class="title-entry">错误</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>errorCode</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>用户取消</td></tr><tr><td>11</td><td>操作失败（权限不够）</td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>获取localID后，如果使用uploadImage接口上传，此处publicDomain参数的值应和uploadImage接口的publicDomain参数值的保持一致。</li></ul><a class="my-pdf-link" target="blank" href="./choose-image.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="compressImage" class="title-entry">compressImage</h1><p>压缩图片接口(安卓10.0.12版本支持，ios 10.0.15版本支持)</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'compressImage'</span>, {
    <span class="hljs-attr">apFilePaths</span>:[<span class="hljs-string">"https://resource/apmlcc0ed184daffc5a0d8da86b2f518cf7b.image"</span>], 
    <span class="hljs-attr">compressLevel</span>:<span class="hljs-number">4</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本使用" class="title-entry">基本使用</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮选择图片<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_chooseImage"</span>&gt;</span>选择图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'J_chooseImage'</span>);

  btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    AlipayJSBridge.call(
      <span class="hljs-string">'chooseImage'</span>,
      {
        <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>
      },
      <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
        alert(<span class="hljs-string">'chooseImage: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
        <span class="hljs-keyword">var</span> uploadParams = {
          <span class="hljs-attr">url</span>: <span class="hljs-string">'http://h5test.inc.alipay.net:3000/upload'</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'h5test'</span>
        };
        <span class="hljs-keyword">if</span>(result.localIds &amp;&amp; result.localIds.length &gt; <span class="hljs-number">0</span>){
          uploadParams.localId = result.localIds[<span class="hljs-number">0</span>];
          uploadParams.type = <span class="hljs-string">'image'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.tempFilePaths &amp;&amp; result.tempFilePaths.length &gt; <span class="hljs-number">0</span>){
          uploadParams.filePath = result.tempFilePaths[<span class="hljs-number">0</span>].replace(<span class="hljs-string">'file://'</span>, <span class="hljs-string">''</span>);
        }
        AlipayJSBridge.call(<span class="hljs-string">'uploadFile'</span>, uploadParams, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
          alert(<span class="hljs-string">'uploadFile: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
        });
      }
    );
  }, <span class="hljs-literal">false</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/multimedia/compress_image-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/multimedia/compress_image-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'compressImage'</span>, {
    <span class="hljs-attr">apFilePaths</span>:[filePaths], 
    <span class="hljs-attr">compressLevel</span>:int
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>apFilePaths</td><td>array</td><td>filePaths</td><td>Y</td><td></td><td>10.0.12</td></tr><tr><td>compressLevel</td><td>int</td><td>压缩质量</td><td>Y</td><td>[4]</td><td>10.0.12</td></tr></tbody></table></div><h3 id="压缩质量" class="title-entry">压缩质量</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>compressLevel</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>低质量</td></tr><tr><td>1</td><td>中等质量</td></tr><tr><td>2</td><td>高质量</td></tr><tr><td>3</td><td>不压缩</td></tr><tr><td>4</td><td>根据网络适应</td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {error }</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>apFilePaths</td><td>array</td><td>压缩后的filePath</td></tr></tbody></table></div><h3 id="错误" class="title-entry">错误</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>errorCode</th><th>描述</th></tr></thead><tbody><tr><td>2</td><td>参数为空或无效</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./compress_image.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="startAudioRecord" class="title-entry">startAudioRecord</h1><p>录制语音文件</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'startAudioRecord'</span>, {
  <span class="hljs-attr">maxRecordTime</span>: <span class="hljs-number">60</span>, <span class="hljs-comment">//  最大录音时长，默认60s</span>
  minRecordTime: <span class="hljs-number">1</span>, <span class="hljs-comment">// 最小录音时长，默认1s</span>
  business: <span class="hljs-string">'apm-h5'</span>, <span class="hljs-comment">// 业务标识</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本使用" class="title-entry">基本使用</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮开始录音<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_recordStart"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>开始录音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_recordStop"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>停止录音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_recordPlay"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>播放录音<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

      <span class="hljs-keyword">var</span> btnStart = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'J_recordStart'</span>);
      <span class="hljs-keyword">var</span> btnStop = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'J_recordStop'</span>);
      <span class="hljs-keyword">var</span> btnPlay = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'J_recordPlay'</span>);
      <span class="hljs-keyword">var</span> localId;

      btnStart.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        alert(<span class="hljs-string">'开始录音'</span>);
        AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
          <span class="hljs-attr">subtitle</span>: <span class="hljs-string">'正在录音...'</span>
        });
        AlipayJSBridge.call(<span class="hljs-string">'startAudioRecord'</span>, {
          <span class="hljs-attr">maxRecordTime</span>: <span class="hljs-number">60</span>, <span class="hljs-comment">//  最大录音时长，默认60s</span>
          minRecordTime: <span class="hljs-number">1</span>, <span class="hljs-comment">// 最小录音时长，默认1s</span>
          business: <span class="hljs-string">'apm-h5'</span>, <span class="hljs-comment">// 业务标识</span>
        }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
            alert(<span class="hljs-string">'startAudioRecord: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
            localId = result.identifier;
        });
      });

      btnStop.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        alert(<span class="hljs-string">'停止录音'</span>);
        AlipayJSBridge.call(<span class="hljs-string">'stopAudioRecord'</span>, {
        }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
          alert(<span class="hljs-string">'stopAudioRecord: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
          AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
            <span class="hljs-attr">subtitle</span>: <span class="hljs-string">''</span>
          });
        });
      });

      btnPlay.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        <span class="hljs-keyword">if</span>(!localId){
          alert(<span class="hljs-string">'先录一段吧'</span>);
          <span class="hljs-keyword">return</span>;
        }
        alert(<span class="hljs-string">'播放录音'</span>);
        AlipayJSBridge.call(<span class="hljs-string">'startPlayAudio'</span>, {
          <span class="hljs-attr">identifier</span>: localId, <span class="hljs-comment">//  音频文件id，可以是cloudid 或者 本地id</span>
          business: <span class="hljs-string">'apm-h5'</span>, <span class="hljs-comment">// 业务标识</span>
        }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
          alert(<span class="hljs-string">'startPlayAudio: '</span>+<span class="hljs-built_in">JSON</span>.stringify(result));
        });
      });


    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/multimedia/start-audio-record-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/multimedia/start-audio-record-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'startAudioRecord'</span>, {
  <span class="hljs-attr">maxRecordTime</span>: <span class="hljs-number">60</span>, <span class="hljs-comment">//  最大录音时长，默认60s</span>
  minRecordTime: <span class="hljs-number">1</span>, <span class="hljs-comment">// 最小录音时长，默认1s</span>
  business: <span class="hljs-string">'apm-h5'</span>, <span class="hljs-comment">// 业务标识</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>maxRecordTime</td><td>number</td><td>最大录音时长 单位s</td><td>N</td><td>60</td><td>10.0.3</td></tr><tr><td>minRecordTime</td><td>number</td><td>最小录音时长 单位s</td><td>N</td><td>1</td><td>10.0.3</td></tr><tr><td>business</td><td>string</td><td>业务标识</td><td>Y</td><td></td><td>10.0.3</td></tr><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数会在stopAudioRecord接口调用后执行</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>identifier</td><td>string</td><td>录音多媒体唯一标记 localId</td></tr><tr><td>tempFilePath</td><td>string</td><td>临时文件路径</td></tr><tr><td>duration</td><td>number</td><td>录制时长</td></tr><tr><td>errorMessage</td><td>string</td><td>错误描述</td></tr><tr><td>error</td><td>string</td><td>错误码</td></tr></tbody></table></div><h3 id="错误" class="title-entry">错误</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>errorCode</th><th>描述</th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./start-audio-record.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.9.0</span></div><h1 id="beehiveOptionsPicker" class="title-entry">beehiveOptionsPicker</h1><p>类似于safari原生select的组件，但是功能更加强大 一般用来替代select，或者2级数据的选择，注意<strong>不支持2级数据之间的联动</strong>。</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">// 单列选项</span>
AlipayJSBridge.call(<span class="hljs-string">'beehiveOptionsPicker'</span>, {
    <span class="hljs-attr">title</span>:<span class="hljs-string">"hello"</span>,
    <span class="hljs-attr">optionsOne</span>:[<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>]
  }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result);
});

<span class="hljs-comment">//双列选项</span>
AlipayJSBridge.call(<span class="hljs-string">'beehiveOptionsPicker'</span>,{
    <span class="hljs-attr">title</span>:<span class="hljs-string">"hello"</span>,
    <span class="hljs-attr">optionsOne</span>:[<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>],
    <span class="hljs-attr">optionsTwo</span>:[<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>]
  },<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
    <span class="hljs-built_in">console</span>.log(result); 
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="单列选择功能" class="title-entry">单列选择功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invoke"</span>&gt;</span>选择还款日<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.invoke'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'beehiveOptionsPicker'</span>, {
      <span class="hljs-attr">title</span>:<span class="hljs-string">"还款日选择"</span>,
      <span class="hljs-attr">optionsOne</span>:[<span class="hljs-string">"每周一"</span>,<span class="hljs-string">"每周二"</span>,<span class="hljs-string">"每周三"</span>,<span class="hljs-string">"每周四"</span>,<span class="hljs-string">"每周五"</span>,<span class="hljs-string">"每周六"</span>,<span class="hljs-string">"每周日"</span>],
      <span class="hljs-attr">selectedOneIndex</span>: <span class="hljs-number">2</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  })
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/beehive-options-picker-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/beehive-options-picker-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="双列选择功能" class="title-entry">双列选择功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invoke"</span>&gt;</span>选择出生年月<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.invoke'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{  
    AlipayJSBridge.call(<span class="hljs-string">'beehiveOptionsPicker'</span>, {
      <span class="hljs-attr">title</span>:<span class="hljs-string">"出生年月选择"</span>,
      <span class="hljs-attr">optionsOne</span>:[<span class="hljs-string">"2014年"</span>,<span class="hljs-string">"2013年"</span>,<span class="hljs-string">"2012年"</span>,<span class="hljs-string">"2011年"</span>,<span class="hljs-string">"2010年"</span>,<span class="hljs-string">"2009年"</span>,<span class="hljs-string">"2008年"</span>],
      <span class="hljs-attr">optionsTwo</span>:[<span class="hljs-string">"一月"</span>,<span class="hljs-string">'二月'</span>,<span class="hljs-string">'三月'</span>,<span class="hljs-string">'四月'</span>,<span class="hljs-string">'五月'</span>,<span class="hljs-string">'六月'</span>,<span class="hljs-string">'七月'</span>,<span class="hljs-string">'八月'</span>,<span class="hljs-string">'九月'</span>,<span class="hljs-string">'十月'</span>,<span class="hljs-string">'十一月'</span>,<span class="hljs-string">'十二月'</span>],
      <span class="hljs-attr">selectedOneIndex</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">selectedTwoIndex</span>: <span class="hljs-number">5</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
}, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/beehive-options-picker-dual.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/beehive-options-picker-dual.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code> AlipayJSBridge.call(<span class="hljs-string">'beehiveOptionsPicker'</span>, {
   title, optionsOne, optionsTwo, selectedOneIndex,
   selectedTwoIndex, positiveString, negativeString
 }, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>头部标题信息</td><td>N</td><td></td><td>9.9</td></tr><tr><td>optionsOne</td><td>Array</td><td>选项一列表</td><td>Y</td><td></td><td></td></tr><tr><td>optionsTwo</td><td>Array</td><td>选项二列表</td><td>N</td><td></td><td></td></tr><tr><td>selectedOneIndex</td><td>number</td><td>选项一默认选中</td><td>N</td><td>0</td><td></td></tr><tr><td>selectedTwoIndex</td><td>number</td><td>选项二默认选中</td><td>N</td><td>0</td><td></td></tr><tr><td>positiveString</td><td>string</td><td>确定按钮文案</td><td>N</td><td>‘确定’</td><td></td></tr><tr><td>negativeString</td><td>string</td><td>取消按钮文档</td><td>N</td><td>‘取消’</td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {selectedOneIndex, selectedOneOption, selectedTwoIndex, selectedTwoOption}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>selectedOneIndex</td><td>number</td><td>选项一选择的值</td><td></td></tr><tr><td>selectedOneOption</td><td>string</td><td>选项一选择的内容</td><td></td></tr><tr><td>selectedTwoIndex</td><td>number</td><td>选项二选择的值</td><td></td></tr><tr><td>selectedTwoOption</td><td>string</td><td>选项二选择的内容</td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./beehive-options-picker.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.3</span></div><h1 id="chooseContact" class="title-entry">chooseContact</h1><p>唤起支付宝通讯录，选择一个或者多个支付宝联系人</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'chooseContact'</span>, {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"single"</span>, <span class="hljs-comment">// "single" or "multi", default multi</span>
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"choose contacts"</span>, <span class="hljs-comment">// title show on the title bar</span>
    <span class="hljs-string">"multiMax"</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// max contact items size, default 50</span>
    <span class="hljs-string">"multiMaxText"</span>: <span class="hljs-string">"max!"</span>, <span class="hljs-comment">// message if selected more than max</span>
  },  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
    <span class="hljs-comment">// error code:</span>
    <span class="hljs-comment">//  10: no permission</span>
    <span class="hljs-comment">//  11: user canceled</span>
    <span class="hljs-built_in">console</span>.log(result.error);

    <span class="hljs-comment">// contacts as JSON array, for each item contains the following  fields:</span>
    <span class="hljs-comment">//  "name": "dawsondong",</span>
    <span class="hljs-comment">//  "mobile": 18666666666,</span>
    <span class="hljs-comment">//  "email": h5@alipay.com,</span>
    <span class="hljs-comment">//  "userId": "10280023927349823798",</span>
    <span class="hljs-comment">//  "headImageUrl": "head.alipay.com/xx.png",</span>
    <span class="hljs-comment">//  "from": "account" // "account","contact", "input"</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(result.contacts));
  }
);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击选择多个联系人<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"contact"</span>&gt;</span>打开手机通信录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.contact'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'chooseContact'</span>, {
      <span class="hljs-string">"title"</span>: <span class="hljs-string">"choose contacts"</span>, <span class="hljs-comment">// title show on the title bar</span>
      <span class="hljs-string">"multiMax"</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// max contact items size, default 50</span>
      <span class="hljs-string">"multiMaxText"</span>: <span class="hljs-string">"max!"</span>, <span class="hljs-comment">// message if selected more than max</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/choose-contact-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/choose-contact-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'chooseContact'</span>, {
  title, type, multiMax, multiMaxText
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>显示在联系人选择页面的标题</td><td>N</td><td>跟随系统默认</td><td></td></tr><tr><td>type</td><td>string</td><td>选择模式，多选(multi)或者单选(single)</td><td>N</td><td>multi</td><td></td></tr><tr><td>multiMax</td><td>int</td><td>单次最多选择联系人数（0或-1，表示无限制选择）</td><td>N</td><td>50</td><td></td></tr><tr><td>multiMaxText</td><td>string</td><td>用户选择数超过上限的文案</td><td>N</td><td>跟随系统默认</td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {contacts: {email, mobile, headImageUrl, name, userId, from}}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>email</td><td>string</td><td>账号的邮箱</td></tr><tr><td>mobile</td><td>string</td><td>账号对应的手机号码</td></tr><tr><td>headImageUrl</td><td>string</td><td>账号的头像</td></tr><tr><td>name</td><td>string</td><td>账号的真实姓名</td></tr><tr><td>from</td><td>string</td><td>账号来源</td></tr></tbody></table></div><h3 id="错误" class="title-entry">错误</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>操作无权限;</td></tr><tr><td>11</td><td>用户取消操作</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./choose-contact.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="contact" class="title-entry">contact</h1><p>选择本地系统通信录中某个人的一个联系电话</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">"contact"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result.name, result.mobile);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击调出本地通讯录<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>请注意要在界面中选择2级<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"contact"</span>&gt;</span>打开通信录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.contact'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"contact"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result))
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/contact-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/contact-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code> AlipayJSBridge.call(<span class="hljs-string">'contact'</span>, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {name, mobile}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>选中的联系人姓名</td><td></td></tr><tr><td>mobile</td><td>string</td><td>选中的联系人手机号</td></tr></tbody></table></div><h3 id="错误" class="title-entry">错误</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>error</th><th>描述</th></tr></thead><tbody><tr><td>10</td><td>没有权限;</td></tr><tr><td>11</td><td>用户取消操作（或设备未授权使用通讯录）;</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./contact.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="datePicker" class="title-entry">datePicker</h1><p>日期选择或者时间选择</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>,{
  <span class="hljs-attr">beginDate</span>: <span class="hljs-string">'2016-10-10'</span>,
  <span class="hljs-attr">minDate</span>: <span class="hljs-string">'2016-10-9'</span>,
  <span class="hljs-attr">maxDate</span>: <span class="hljs-string">'2017-10-9'</span>,
  <span class="hljs-attr">mode</span>:<span class="hljs-number">1</span>,
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(e))
})


 AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>,{
  <span class="hljs-attr">minDate</span>: <span class="hljs-string">'2015-1-1 0:0:0'</span>,
  <span class="hljs-attr">maxDate</span>: <span class="hljs-string">'2050-1-1 0:0:0'</span>,
  <span class="hljs-attr">mode</span>: <span class="hljs-number">2</span>
},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-built_in">console</span>.log(e);
  });
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="不同模式下的日期/时间选择" class="title-entry">不同模式下的日期/时间选择</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮查看各个模式下日期选择<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default date"</span>&gt;</span>选择日期<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default time"</span>&gt;</span>选择时间<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default datetime"</span>&gt;</span>选择日期+时间<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.date'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>,{
      <span class="hljs-attr">beginDate</span>: <span class="hljs-string">'2016-10-10'</span>,
      <span class="hljs-attr">minDate</span>: <span class="hljs-string">'2016-10-9'</span>,
      <span class="hljs-attr">maxDate</span>: <span class="hljs-string">'2017-10-9'</span>,
      <span class="hljs-attr">mode</span>:<span class="hljs-number">1</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(e))
    })
  });
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.time'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>,{
      <span class="hljs-attr">mode</span>:<span class="hljs-number">0</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(e))
    })
  });
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.datetime'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>,{
      <span class="hljs-attr">minDate</span>: <span class="hljs-string">'2016-10-9'</span>,
      <span class="hljs-attr">maxDate</span>: <span class="hljs-string">'2017-10-9'</span>,
      <span class="hljs-attr">beginDate</span>: <span class="hljs-string">'2016-10-9'</span>,
      <span class="hljs-attr">mode</span>:<span class="hljs-number">2</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(e))
    })
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/date-picker-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/date-picker-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="身份证日期选择" class="title-entry">身份证日期选择</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮选择身份证有效期<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default date"</span>&gt;</span>选择日期<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.date'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>,{
      <span class="hljs-attr">beginDate</span>: <span class="hljs-string">'2015-10-12'</span>,
      <span class="hljs-attr">minDate</span>: <span class="hljs-string">'2015-10-09'</span>,
      <span class="hljs-attr">maxDate</span>: <span class="hljs-string">'2016-10-09'</span>,
      <span class="hljs-attr">mode</span>:<span class="hljs-number">1</span>,
      <span class="hljs-attr">isIDCard</span>: <span class="hljs-literal">true</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(e))
    })
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/date-picker-identity.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/date-picker-identity.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'datePicker'</span>, {
  mode, beginDate, minDate, maxDate, isIDCard
}, fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>mode</td><td>number</td><td>0: HH:mm:ss, 1: yyyy-MM-dd, 2: yyyy-MM-dd HH:mm:ss</td><td>N</td><td>1</td><td></td></tr><tr><td>beginDate</td><td>string</td><td>默认选择的日期/时间，不设置默认为当前系统时间</td><td>N</td><td>‘’</td><td></td></tr><tr><td>minDate</td><td>string</td><td>最小日期/时间，必须小于beginDate</td><td>N</td><td>‘’</td><td></td></tr><tr><td>maxDate</td><td>string</td><td>最大日期/时间，必须大于beginDate</td><td>N</td><td>‘’</td><td></td></tr><tr><td>isIDCard</td><td>bool</td><td>是否是身份证模式</td><td>N</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td>不限</td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {error, date}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>error</td><td>int</td><td>错误码（11：用户取消））</td><td></td></tr><tr><td>date</td><td>string</td><td>选择的日期/时间字符串</td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>mode虽然以日期格式字符串表示，但是并不是说返回的格式是这样的，返回的格式是根据系统格式决定的，比如返回日期可能是2016-10-10。也就是说，它的作用是决定选择什么。</li><li>如果要通过代码隐藏日期选择，请使用<code>AlipayJSBridge.call(&#39;hideDatePicker&#39;)</code>;</li><li><code>minDate</code>, <code>maxDate</code>, <code>beginDate</code>并不只是日期，还可以是时间。</li><li><code>isIDCard</code>的作用是让我们可以选择<strong>长期</strong>，英文系统下是**Long Term，公民在46周岁后领取身份证，有效期是长期。</li><li>特别注意，安卓下传入参数的时候，必须做到<code>beginDate &gt;= minDate</code>以及<code>beginDate &lt;= maxDate</code>，否则会报参数错误。</li></ul><a class="my-pdf-link" target="blank" href="./date-picker.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="getCities" class="title-entry">getCities</h1><p>getCities用来呼出城市选择列表</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getCities'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本使用演示" class="title-entry">基本使用演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击打开选择城市<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>打开城市列表<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getCities'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/get-cities-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/get-cities-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="城市选择并开启定位功能" class="title-entry">城市选择并开启定位功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击打开选择城市<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>打开城市列表<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// 需要同时传入城市名称和adcode才能开启定位功能</span>
    AlipayJSBridge.call(<span class="hljs-string">'getCities'</span>, {
      <span class="hljs-attr">currentCity</span>: <span class="hljs-string">'杭州市'</span>, <span class="hljs-comment">// 当前选择的城市，一般传入上次选择的就可以</span>
      adcode:<span class="hljs-string">'310100'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/get-cities-gps.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/get-cities-gps.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="自定义城市列表，并且不显示热门城市" class="title-entry">自定义城市列表，并且不显示热门城市</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击打开选择城市<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>打开城市列表<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      AlipayJSBridge.call(<span class="hljs-string">'getCities'</span>, {
        <span class="hljs-attr">needHotCity</span>:<span class="hljs-literal">false</span>,
        <span class="hljs-attr">customCities</span>:[{<span class="hljs-attr">name</span>:<span class="hljs-string">"杭州"</span>,<span class="hljs-attr">adcode</span>:<span class="hljs-string">"xxxx"</span>,<span class="hljs-attr">pinyin</span>:<span class="hljs-string">"hangzhou"</span>},{<span class="hljs-attr">name</span>:<span class="hljs-string">"杭州"</span>,<span class="hljs-attr">adcode</span>:<span class="hljs-string">"xxxx"</span>,<span class="hljs-attr">pinyin</span>:<span class="hljs-string">"hangzhou"</span>}]
      }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
        alert(<span class="hljs-built_in">JSON</span>.stringify(result));
      });
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/get-cities-customize.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/get-cities-customize.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getCities'</span>,{
  currentCity,
  adcode,
  needHotCity,
  customCities
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>currentCity</td><td>string</td><td>传入当前使用中的城市名</td><td>N</td><td></td><td>8.2</td></tr><tr><td>adcode</td><td>string</td><td>传入当前使用中的城市的adcode（如果没有用到adcode，可以传入空字符串）</td><td>N</td><td></td><td>8.2</td></tr><tr><td>customCities</td><td>array</td><td>自定义城市列表（格式：{name:”杭州”,adcode:”xxxx”,pinyin:”hangzhou”}）</td><td>N</td><td></td><td>8.4</td></tr><tr><td>customHotCities</td><td>array</td><td>自定义热门城市列表</td><td>N</td><td></td><td>8.4</td></tr><tr><td>needHotCity</td><td>bool</td><td>是否需要现实热门城市</td><td>N</td><td>true</td><td>8.4</td></tr><tr><td>fn</td><td>function</td><td>当选择了城市之后的回调</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {city, adcode}</p></blockquote><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>getCities</code>如果要开启定位，那么需要同时传入<code>currentCity</code>和<code>adcode</code></li></ul><a class="my-pdf-link" target="blank" href="./get-cities.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="getLocation" class="title-entry">getLocation</h1><p>getLocation用来获取用户当前的地理位置信息</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getLocation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(result));
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="获取用户详细地理位置信息" class="title-entry">获取用户详细地理位置信息</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击获取详细地理位置信息<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>一般情况下还会返回周围兴趣点<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>点击获取定位信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getLocation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      <span class="hljs-keyword">if</span> (result.error) {
        alert(result.errorMessage);
        <span class="hljs-keyword">return</span>;
      }

      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
      <span class="hljs-built_in">console</span>.log(result.province, result.city, result.latitude, result.longitude, result.citycode, result.adcode, result.streetNumber, result.pois);
      <span class="hljs-comment">// 四个直辖市（北京，上海，重庆，天津）返回的city为空字符串，可以通过result.province来获取，所以建议result.city?result.city:result.province这样来获取city</span>
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/get-location-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/get-location-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="获取用户地址经纬度" class="title-entry">获取用户地址经纬度</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击获取用户所在地经纬度<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>点击获取定位信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getLocation'</span>, {<span class="hljs-attr">requestType</span>: <span class="hljs-number">2</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      <span class="hljs-keyword">if</span> (result.error) {
        alert(result.errorMessage);
        <span class="hljs-keyword">return</span>;
      }

      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/get-location-latitude.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/get-location-latitude.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getLocation'</span>, {
  cacheTimeout, requestType, reGeocodeServiceType, timeout, horizontalAccuracy
}, fn)
</code></pre></div><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>cacheTimeout</td><td>float</td><td>钱包经纬度定位缓存过期时间，单位秒，例如：钱包上一次定位时间是10:00:00，当前调用cacheTimeout=5，当前时间是10:00:06，则判断缓存过期不可用，会重新定位</td><td>N</td><td>30</td><td>9.0</td></tr><tr><td>requestType</td><td>int</td><td>0：详细逆地理编码，带周边信息（当使用MobileLBS服务时，当遇到流量巨大时可能会做降级处理，届时可能没有poi周边信息）<br>1：逆地理编码到城市<br>2：仅获取经纬度</td><td>N</td><td>0</td><td>9.0.1</td></tr><tr><td>timeout</td><td>float</td><td>定位超时失败回调时间，单位秒，默认是10s</td><td>N</td><td>10</td><td>9.0.1</td></tr><tr><td>horizontalAccuracy</td><td>float</td><td>定位精度，默认是不限制精度。当超过误差精度时，会继续等待位置更新，直到超时，超时处理使用最后一次定位的经纬度。</td><td>N</td><td></td><td>9.0.1</td></tr><tr><td>fn</td><td>function</td><td>定位完成后被调用的回调函数</td><td>N</td><td></td><td>9.0.1</td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {error, extError, latitude, longitude, country, countryCode, city, province, citycode, adcode, streetNumber, pois}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>error</td><td>int</td><td>错误码（12：GPS打开，但定位失败；13：获取地理位置信息失败；14：定位超时；15： 网络错误；16:GPS未打卡或未授权）</td><td>8.6</td></tr><tr><td>extError</td><td>int</td><td>扩展错误码（android上由高德SDK导出）</td><td>8.6</td></tr><tr><td>latitude</td><td>double</td><td>纬度</td><td>8.1</td></tr><tr><td>longitude</td><td>double</td><td>经度</td><td>8.1</td></tr><tr><td>country</td><td>string</td><td>国家(requestType为0，1时生效)</td><td>9.6.6</td></tr><tr><td>countryCode</td><td>string</td><td>国家编号(requestType为0，1时生效)</td><td>9.6.6</td></tr><tr><td>city</td><td>string</td><td>城市，建议result.city?result.city:result.province这样来获取city）</td><td>8.1</td></tr><tr><td>province</td><td>string</td><td>省份</td><td>8.1</td></tr><tr><td>citycode</td><td>string</td><td>城市编码</td><td>8.2</td></tr><tr><td>adcode</td><td>string</td><td>区域编码</td><td>8.2</td></tr><tr><td>streetNumber</td><td>object</td><td>门牌信息，结构是：{street, number}</td><td>8.2</td></tr><tr><td>pois</td><td>array</td><td>周边兴趣点</td><td>8.2</td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>getLocation</code>不能获取provinceCode。</li><li><code>getLocation</code>不能获取district信息，比如 中国浙江省杭州市西湖区万塘路18号 这个地址，<code>getLocation</code>不会返回<strong>西湖区</strong>这个信息。</li></ul><a class="my-pdf-link" target="blank" href="./get-location.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="getNetworkType" class="title-entry">getNetworkType</h1><p>获取网络状态: 网络是否可用以及什么网络类型</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getNetworkType'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result.networkType);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能演示" class="title-entry">基本功能演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击获取网络信息，可以修改网络后再点击看看<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default J_demo"</span>&gt;</span>查看网络信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'a'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getNetworkType'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/get-network-type-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/get-network-type-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getNetworkType'</span>, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>fn</td><td>function</td><td>回调函数</td><td></td><td>8.0</td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result，以networkInfo返回值为准</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>networkInfo</td><td>string</td><td>网络类型值：UNKNOWN/NOTREACHABLE/WIFI/3G/2G/4G/WWAN</td><td>9.6</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./get-network-type.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.6</span></div><h1 id="imageViewer" class="title-entry">imageViewer</h1><p>imageViewer是一个native实现的图片查看组件</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'imageViewer'</span>, {
  <span class="hljs-attr">images</span>: [{
    <span class="hljs-attr">u</span>: <span class="hljs-string">'http://a.hiphotos.baidu.com/image/pic/item/1b4c510fd9f9d72a80f8481ad62a2834349bbb1d.jpg'</span>,
    <span class="hljs-attr">t</span>: <span class="hljs-string">'http://a.hiphotos.baidu.com/image/pic/item/1b4c510fd9f9d72a80f8481ad62a2834349bbb1d.jpg'</span>
  }],
  <span class="hljs-attr">init</span>: <span class="hljs-number">0</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击查看图片预览效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>开始预览<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'imageViewer'</span>,
    {
      <span class="hljs-attr">images</span>: [
        {<span class="hljs-attr">u</span>: <span class="hljs-string">'http://a.hiphotos.baidu.com/image/pic/item/1b4c510fd9f9d72a80f8481ad62a2834349bbb1d.jpg'</span>, <span class="hljs-attr">t</span>: <span class="hljs-string">''</span>},
        {<span class="hljs-attr">u</span>: <span class="hljs-string">'http://a.hiphotos.baidu.com/image/pic/item/1b4c510fd9f9d72a80f8481ad62a2834349bbb1d.jpg'</span>, <span class="hljs-attr">t</span>: <span class="hljs-string">''</span>}
      ],
      <span class="hljs-attr">init</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
      <span class="hljs-built_in">console</span>.log(result);
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/image-viewer-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/image-viewer-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'imageViewer'</span>, {
  <span class="hljs-attr">images</span>: {u, t}, init
}, fn);
</code></pre></div><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>images</td><td>array</td><td>图片数组</td><td>Y</td><td></td><td></td></tr><tr><td>u</td><td>string</td><td>图片url</td><td>N</td><td>‘’</td><td></td></tr><tr><td>t</td><td>string</td><td>缩略图url</td><td>N</td><td></td><td></td></tr><tr><td>init</td><td>int</td><td>默认显示第几张</td><td>N</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>API调用结果的回调</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {error, success}</p></blockquote><a class="my-pdf-link" target="blank" href="./image-viewer.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="photo" class="title-entry">photo</h1><p>拍照/选择照片</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'photo'</span>, {
  <span class="hljs-attr">dataType</span>: <span class="hljs-string">'dataURL'</span>,
  <span class="hljs-attr">imageFormat</span>: <span class="hljs-string">'jpg'</span>,
  <span class="hljs-attr">quality</span>: <span class="hljs-number">75</span>,
  <span class="hljs-attr">maxWidth</span>: <span class="hljs-number">500</span>,
  <span class="hljs-attr">maxHeight</span>: <span class="hljs-number">500</span>,
  <span class="hljs-attr">allowEdit</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">multimediaConfig</span>: { <span class="hljs-comment">// 可选，仅当该项被配置时，图片被传输至 APMultimedia</span>
    compress: <span class="hljs-number">2</span>, <span class="hljs-comment">// 可选，默认为4。 0-低质量，1-中质量，2-高质量，3-不压缩，4-根据网络情况自动选择</span>
    business: <span class="hljs-string">"multiMedia"</span> <span class="hljs-comment">// 可选，默认为“NebulaBiz”</span>
  }
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(result))
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击查看选择一幅图片<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>调用图片选择<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myImage"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'photo'</span>, {
      <span class="hljs-attr">dataType</span>: <span class="hljs-string">'dataURL'</span>,
      <span class="hljs-attr">imageFormat</span>: <span class="hljs-string">'jpg'</span>,
      <span class="hljs-attr">quality</span>: <span class="hljs-number">75</span>,
      <span class="hljs-attr">maxWidth</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">maxHeight</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">allowEdit</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">multimediaConfig</span>: { <span class="hljs-comment">// 可选，仅当该项被配置时，图片被传输至 APMultimedia</span>
        compress: <span class="hljs-number">2</span>, <span class="hljs-comment">// 可选，默认为4。 0-低质量，1-中质量，2-高质量，3-不压缩，4-根据网络情况自动选择</span>
        business: <span class="hljs-string">"multiMedia"</span> <span class="hljs-comment">// 可选，默认为“NebulaBiz”</span>
      }
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      <span class="hljs-keyword">var</span> image = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'myImage'</span>);
      image.src = <span class="hljs-string">"data:image/jpeg;base64,"</span> + result.dataURL;
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/photo-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/photo-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'photo'</span>, {
  dataType,
  imageFormat,
  quality,
  maxWidth,
  maxHeight,
  allowEdit,
  <span class="hljs-attr">multimediaConfig</span>: { <span class="hljs-comment">// 可选，仅当该项被配置时，图片被传输至 APMultimedia</span>
    compress, <span class="hljs-comment">// 可选，默认为4。 0-低质量，1-中质量，2-高质量，3-不压缩，4-根据网络情况自动选择</span>
    business <span class="hljs-comment">// 可选，默认为“NebulaBiz”</span>
  }
}, fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>dataType</td><td>string</td><td>结果数据格式:<br>dataURL: base64编码的图片数据<br>fileURL: 图片在文件系统中的url<br>图片存放于临时目录中，钱包退出时被清除</td><td>Y</td><td>‘dataURL’</td><td></td></tr><tr><td>imageFormat</td><td>string</td><td>jpg / png</td><td>N</td><td>‘jpg’</td><td></td></tr><tr><td>quality</td><td>int</td><td>jpg的图片质量, 取值1到100</td><td>N</td><td>75</td><td></td></tr><tr><td>beautyLevel</td><td>float</td><td>是否返回美颜后的图片，取值0~1的浮点值，代表美颜效果的程度</td><td>N</td><td>0</td><td>9.6</td></tr><tr><td>maxWidth</td><td>int</td><td>图片的最大宽度. 过大将被等比缩小</td><td>N</td><td>不限</td><td></td></tr><tr><td>maxHeight</td><td>int</td><td>图片的最大高度. 过大将被等比缩小</td><td>N</td><td>不限</td><td></td></tr><tr><td>allowEdit</td><td>bool</td><td>是否允许编辑(框选). 为true时，拍照时会有一个方形的选框</td><td>N</td><td>false</td><td></td></tr><tr><td>useFrontCamera</td><td>bool</td><td>为false表示后置摄像头，为true表示前置摄像头，如果设备不支持前置摄像头，则为后置摄像头。</td><td>N</td><td>false</td><td>9.0（only iOS）</td></tr><tr><td>multimediaConfig</td><td>dictionary</td><td>当multimediaConfig结点存在时，选择 APMultimedia 作为上传存储位置，忽略upload和uploadTo结点<br>可配置的键值：<br>business 该项业务存储标识，默认为“NebulaBiz”<br>compress 压缩等级，默认为4。 0-低质量，1-中质量，2-高质量，3-不压缩，4-根据网络情况自动选择</td><td>N</td><td></td><td>9.9</td></tr><tr><td>storeOriginal</td><td>bool</td><td>图片拾取上传时，可以选择是否返回“未经quality/maxWidth/maxHeight/compress等入参导致的有损变换”的”用户选择（或编辑）后的原始图片”的物理暂存路径。</td><td>N</td><td>false</td><td>9.9</td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {error, dataURL, fileURL, originalFileURL, useFrontCamera, scene, multimediaID}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>error</td><td>int</td><td>错误码（10：用户取消；11：操作失败（权限不够））</td><td></td></tr><tr><td>dataURL</td><td>string</td><td>base64编码的图片数据</td><td></td></tr><tr><td>fileURL</td><td>string</td><td>图片文件URL</td><td></td></tr><tr><td>originalFileURL</td><td>string</td><td>相册或拍摄（编辑后）的原图的物理暂存路径</td><td></td></tr><tr><td>useFrontCamera</td><td>bool</td><td>标识拍照时用户是否选择了前置摄像头，为true表示前置摄像头，为false表示后置摄像头</td><td>9.6</td></tr><tr><td>scene</td><td>string</td><td>标识用户获取照片的渠道，值为camera或assets，camera代表拍照，assets代表从相册选择</td><td>9.6</td></tr><tr><td>multimediaID</td><td>string</td><td>标识上传图片在APMultimedia中的identifier</td><td>9.9</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./photo.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="selectAddress" class="title-entry">selectAddress</h1><p>获取用户收货地址</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>am.selectAddress(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(data));
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击获取收货地址<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>获取地址<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!--必须首先引入该js库--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://publicexprod.alipay.com/deliveraddress/selectAddress.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  am.selectAddress(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
    alert(<span class="hljs-built_in">JSON</span>.stringify(data));
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/select-address-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/select-address-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>am.selectAddress(fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {address, city, area, addressId, addressCode, post, mobilePhone, prov, fullname}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>address</td><td>string</td><td>街道地址</td></tr><tr><td>city</td><td>string</td><td>城市</td></tr><tr><td>area</td><td>string</td><td>地区（比如西湖区）</td></tr><tr><td>addressCode</td><td>string</td><td>地址码</td></tr><tr><td>addressId</td><td>string</td><td>地址id</td></tr><tr><td>mobilePhone</td><td>string</td><td>手机电话</td></tr><tr><td>prov</td><td>string</td><td>省份</td></tr><tr><td>fullname</td><td>string</td><td>用户全名</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./select-address.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.6</span></div><h1 id="startShare" class="title-entry">startShare</h1><p>唤起分享面板进行分享。<br>分享的默认内容为服务端根据一定的规则自动抓取的当前页面内容而生成。<br>可通过JSAPI入参传入onlySelectChannel的方式进行分享内容自定义，或通过meta标签进行自定义。</p><h2 id="注意:" class="title-entry">注意:</h2><ol><li>无法直接控制显示的分享渠道列表，只能通过bizType入参来控制分享渠道列表的内容和排序。可向分享组件的@亦德 申请bizType。</li><li>唤起的分享面板第一栏才是分享渠道列表，第二栏为工具栏。如需自定义第二栏工具栏的内容，需要调用<code>setToolbarMenu</code>接口进行自定义。</li></ol><h2 id="分享渠道名称列表" class="title-entry">分享渠道名称列表</h2><p>目前已支持的分享渠道名分别为：</p><pre><code>&quot;ALPContact&quot; : 支付宝好友
&quot;ALPTimeLine&quot; : 支付宝我的生活
&quot;ALPCommunity&quot; : 支付宝生活圈
&quot;Weibo&quot; : 新浪微博
&quot;DingTalkSession&quot; : 钉钉
&quot;SMS&quot; : 短信
&quot;Weixin&quot; : 微信
&quot;WeixinTimeLine&quot; : 微信朋友圈
&quot;QQ&quot; : QQ
&quot;QQZone&quot; : QQ空间
&quot;OpenInSafari&quot; : 在浏览器中打开 (不支持onlySelectChannel)
&quot;Favorite&quot; : 收藏 (不支持onlySelectChannel)
</code></pre><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">"startShare"</span>,{
  <span class="hljs-string">'bizType'</span>:<span class="hljs-string">'testShareBizType'</span>, <span class="hljs-comment">//业务标识，为空时将会显示默认的分享渠道列表。如需自定义分享渠道，需要向分享组件的@亦德 申请业务标识</span>
  <span class="hljs-string">'onlySelectChannel'</span>:[<span class="hljs-string">"ALPContact"</span>,<span class="hljs-string">"Weixin"</span>]  <span class="hljs-comment">//当用户选择该数组内指定的分享渠道时，仅返回渠道名，而不是真正开始分享  </span>
},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
    <span class="hljs-built_in">console</span>.log(data)
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="从meta读取分享信息" class="title-entry">从meta读取分享信息</h3><div class="demo-wrap"><pre class="hljs"><code>
<span class="hljs-comment">&lt;!--
//钱包9.0开始支持 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Alipay:title"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"我是标题"</span>/&gt;</span>
<span class="hljs-comment">&lt;!--
自定义图片
//钱包8.6开始支持--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Alipay:imgUrl"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"http://xxx/url/xxx.png"</span>/&gt;</span>
<span class="hljs-comment">&lt;!--
自定义摘要
//钱包8.6开始支持--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Alipay:desc"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"我是摘要信息"</span>/&gt;</span>
<span class="hljs-comment">&lt;!--
自定义链接
//钱包10.0.0开始支持--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Alipay:link"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"http://www.alipay.com"</span>/&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击右上角。。。，然后分享到相关渠道<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/start-share-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/start-share-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><blockquote><p>这种方法无法根据分享的渠道动态更换内容</p></blockquote><h3 id="根据渠道进行自定义分享" class="title-entry">根据渠道进行自定义分享</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击按钮进行测试不同渠道分享<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>开始分享<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    AlipayJSBridge.call(<span class="hljs-string">"startShare"</span>, {
      <span class="hljs-comment">//当用户选择该数组内指定的分享渠道时，仅返回渠道名，而不是真正开始自动分享</span>
      <span class="hljs-string">'onlySelectChannel'</span>: [<span class="hljs-string">"Weibo"</span>, <span class="hljs-string">"ALPContact"</span>, <span class="hljs-string">"ALPTimeLine"</span>, <span class="hljs-string">"SMS"</span>, <span class="hljs-string">"Weixin"</span>, <span class="hljs-string">"WeixinTimeLine"</span>, <span class="hljs-string">"QQ"</span>, <span class="hljs-string">"QQZone"</span>,<span class="hljs-string">"DingTalkSession"</span>, <span class="hljs-string">"OpenInSafari"</span>, <span class="hljs-string">"Favorite"</span>]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"当前用户点击的分享渠道名为："</span>+data.channelName);
      <span class="hljs-comment">//通过onlySelectChannel屏蔽掉自动分享功能后，自行调用shareToChannel接口进行单独分享</span>
      AlipayJSBridge.call(<span class="hljs-string">"shareToChannel"</span>, {
        <span class="hljs-attr">name</span>: data.channelName,
        <span class="hljs-attr">param</span>: {
          <span class="hljs-attr">contentType</span>: <span class="hljs-string">'url'</span>,    <span class="hljs-comment">//选填，目前支持支持"auto",text","image","url"格式（android分享组件不支持auto）</span>
          title: <span class="hljs-string">'自定义分享的标题'</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-string">'自定义分享的内容'</span>,
          <span class="hljs-attr">iconUrl</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/CKajyImsyyUtTEkzEqcM.png'</span>,
          <span class="hljs-attr">imageUrl</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/CKajyImsyyUtTEkzEqcM.png'</span>,
          <span class="hljs-attr">captureScreen</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//是否分享当前页面的截图</span>
          url: <span class="hljs-string">'https://m.taobao.com'</span>,
          <span class="hljs-attr">otherParams</span>: {} <span class="hljs-comment">//特定分享渠道的扩展参数</span>
        }
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
        <span class="hljs-built_in">console</span>.log(result)
      });
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/start-share-customize.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/start-share-customize.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'startShare'</span>, {
  bizType, onlySelectChannel
}, fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>bizType</td><td>string</td><td>业务标识，为空时将会显示默认的分享渠道列表。如需自定义分享渠道，需要向分享组件的@亦德 申请业务标识</td><td>N</td><td>200000067</td><td></td></tr><tr><td>onlySelectChannel</td><td>array</td><td>当用户选择该数组内指定的分享渠道时，仅返回渠道名，而不是真正开始分享</td><td>N</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>选择渠道后的回调</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {channelName, shareResult}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>channelName</td><td>string</td><td>用户选择的渠道名称</td><td>9.6</td></tr><tr><td>shareResult</td><td>bool</td><td>分享的结果</td><td>9.6</td></tr></tbody></table></div><h2 id="参考使用" class="title-entry">参考使用</h2><ul><li><a href="../../fe/share.html">支付宝分享接口开发实践</a></li></ul><a class="my-pdf-link" target="blank" href="./start-share.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><p></p><p>开发者在h5页面唤起支付请使用开放平台 <a href="https://doc.open.alipay.com/docs/api.htm?spm=a219a.7629065.0.0.yjpXrR&amp;apiId=1046&amp;docType=4">alipay.trade.create</a> 接口生成交易号</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">//调用此jsapi的时候，不要在当前页面有监听resume事件并在resume事件中强制刷新页面。</span>
<span class="hljs-comment">//调用方式1:通过传入交易号唤起快捷调用方式</span>
AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
  <span class="hljs-attr">tradeNO</span>: <span class="hljs-string">"201209071234123221"</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
});
<span class="hljs-comment">//调用方式2:通过传入传入交易的字符串唤起快捷调用方式,只需要这一个参数</span>
AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
  <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxx"</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="交易号唤起收银台" class="title-entry">交易号唤起收银台</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮唤起收银台支付<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradeno"</span>&gt;</span>交易号唤起<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradeno'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
      <span class="hljs-attr">tradeNO</span>: <span class="hljs-string">"201209071234123221"</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="唤起支付密码校验（不发起支付，只做身份确认）" class="title-entry">唤起支付密码校验（不发起支付，只做身份确认）</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮唤起密码校验<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradestr"</span>&gt;</span>唤起密码校验<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradestr'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
      <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"uuid=95a76812-0b4c-46a6-b4ae-cc48c97b5fc5"</span>+ <span class="hljs-comment">// uuid每次唯一</span>
      <span class="hljs-string">"&amp;extern_token=GZ00UIvFe6xfGj9aslXhWkUeUJoXyGmobilegwGZ00"</span>+ <span class="hljs-comment">// extern_token登入sessionId</span>
      <span class="hljs-string">"&amp;app_name=alipay"</span>+
      <span class="hljs-string">"&amp;biz_type=openservice"</span>+
      <span class="hljs-string">"&amp;apiname=com.alipay.paypwd.validate"</span>+
      <span class="hljs-string">"&amp;apiservice=com.alipay.loan.agreement.sign"</span>+
      <span class="hljs-string">"&amp;tip=需要在密码框上显示的文案"</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-identity.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-identity.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="唤起支付渠道选择列表" class="title-entry">唤起支付渠道选择列表</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮唤起支付渠道选择<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradestr"</span>&gt;</span>支付渠道<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradestr'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getUserInfo'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">info</span>)</span>{
      <span class="hljs-keyword">var</span> userId= info.userId;

      AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
        <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"uuid=95a76812-0b4c-46a6-b4ae-cc48c97b5fc5"</span>+ <span class="hljs-comment">// uuid每次唯一</span>
        <span class="hljs-string">"&amp;extern_token=GZ00cSiae3xXJ9sXjuV2NhnyfWOOPb98mobilegwGZ00"</span>+<span class="hljs-comment">// extern_token登入sessionId</span>
        <span class="hljs-string">"&amp;app_name=alipay"</span>+
        <span class="hljs-string">"&amp;biz_identity=userassets10002"</span>+
        <span class="hljs-string">"&amp;trade_from=ALIPAY"</span>+
        <span class="hljs-string">"&amp;biz_type=switch_channel"</span>
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
        alert(<span class="hljs-built_in">JSON</span>.stringify(result));
      });
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-channel.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-channel.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="唤起添加银行卡" class="title-entry">唤起添加银行卡</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮唤起添加银行卡<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradestr"</span>&gt;</span>添加银行卡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradestr'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
      <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"uuid=95a76812-0b4c-46a6-b4ae-cc48c97b5fc5"</span>+ <span class="hljs-comment">// uuid每次唯一</span>
      <span class="hljs-string">"&amp;extern_token=GZ00UIvFe6xfGj9aslXhWkUeUJoXyGmobilegwGZ00"</span>+ <span class="hljs-comment">// extern_token登入sessionId</span>
      <span class="hljs-string">"&amp;app_name=alipay"</span>+
      <span class="hljs-string">"&amp;biz_type=new_card"</span>+
      <span class="hljs-string">"&amp;trade_from=ALIPAY"</span>+
      <span class="hljs-string">"&amp;forbid_channel=credit"</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-card.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-card.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'tradePay'</span>, {
  tradeNO, partnerID, bizType, bizSubType, displayPayResult, bizContext, orderStr
}, fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>tradeNO</td><td>string</td><td>交易号。多个用”;”分隔</td><td>N</td><td></td><td>8.0</td></tr><tr><td>partnerID</td><td>string</td><td>商户id</td><td>N</td><td>‘’</td><td>8.0</td></tr><tr><td>bizType</td><td>string</td><td>交易类型</td><td>N</td><td>‘trade’</td><td>8.0</td></tr><tr><td>bizSubType</td><td>string</td><td>交易子类型</td><td>N</td><td>‘’</td><td>8.0</td></tr><tr><td>displayPayResult</td><td>bool</td><td>是否显示支付结果页</td><td>N</td><td>true</td><td>8.0</td></tr><tr><td>bizContext</td><td>string</td><td>支付额外的参数，格式为JSON字符串</td><td>N</td><td>‘’</td><td>8.2</td></tr><tr><td>orderStr</td><td>string</td><td>完整的一个支付字符串</td><td>N</td><td>‘’</td><td>8.2</td></tr><tr><td>fn</td><td>function</td><td>收营台关闭之后的结果回调</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {resultCode, callbackUrl, memo, result}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>resultCode</td><td>string</td><td>支付结果<br>‘9000’: 订单支付成功;<br>‘8000’: 正在处理中;<br>‘4000’: 订单支付失败;<br>‘6001’: 用户中途取消;<br>‘6002’: 网络连接出错<br>‘99’: 用户点击忘记密码快捷界面退出(only iOS since 9.5)</td><td>8.0</td></tr><tr><td>callbackUrl</td><td>bool</td><td>交易成功后应跳转到的url；一般为空, 除非交易有特殊配置</td><td>8.0</td></tr><tr><td>memo</td><td>bool</td><td>收银台服务端返回的memo字符串</td><td>iOS 8.0, android 8.4</td></tr><tr><td>result</td><td>bool</td><td>收银台服务端返回的result字符串</td><td>iOS 8.0, android 8.4</td></tr></tbody></table></div><h3 id="orderStr各个子参数" class="title-entry">orderStr各个子参数</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>uuid</td><td>string</td><td>随机字符串，可自行生成或服务端接口</td></tr><tr><td>extern_token</td><td>string</td><td>钱包信任登录token，即为sessionId，通过服务端接口获取</td></tr><tr><td>app_name</td><td>string</td><td>调用方app标识，alipay代表支付宝钱包</td></tr><tr><td>biz_type</td><td>string</td><td>调用业务类型，openservice代表开放基础服务</td></tr><tr><td>apiname</td><td>string</td><td>调用开放服务api名称，com.alipay.paypwd.validate代表独立密码校验服务</td></tr><tr><td>apiservice</td><td>string</td><td>调用开放服务api业务方，com.alipay.loan.agreement.sign代表小贷签约</td></tr><tr><td>biz_identity</td><td>string</td><td>某个业务类型对应的具体业务参数</td></tr><tr><td>user_id</td><td>string</td><td>某些业务需要的用户id</td></tr><tr><td>tip</td><td>string</td><td>需要在密码框上展示的提示文案</td></tr></tbody></table></div><p></p><a class="my-pdf-link" target="blank" href="./trade-pay.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="vibrate" class="title-entry">vibrate</h1><p>调用震动</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'vibrate'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本使用" class="title-entry">基本使用</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮手机会震动<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>手机震动<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'vibrate'</span>);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/vibrate-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/vibrate-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'vibrate'</span>);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><p>无参数</p><a class="my-pdf-link" target="blank" href="./vibrate.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="watchShake" class="title-entry">watchShake</h1><p>摇一摇功能</p><blockquote><p>每次调用API，在摇一摇手机后触发回调事件，然后需要再次调用这个API。</p></blockquote><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">"watchShake"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
  alert(<span class="hljs-built_in">JSON</span>.stringify(data));
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="摇一摇基本功能" class="title-entry">摇一摇基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击按钮注册摇一摇事件，然后摇动手机<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这个API调用后，摇一摇才会被感知。同时一旦摇一摇完成，这个事件就结束了，需要再次调用API<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default read"</span>&gt;</span>注册摇一摇<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.read'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"watchShake"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(data));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/watch-shake-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/watch-shake-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'watchShake'</span>, fn);
</code></pre></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {success}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>success</td><td>bool</td><td>是否摇一摇成功</td><td>8.6</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./watch-shake.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="actionSheet" class="title-entry">actionSheet</h1><p>提供一种供选择选项的列表，它会dock在屏幕的下边沿</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'actionSheet'</span>,{
  <span class="hljs-string">'title'</span>: <span class="hljs-string">'标题'</span>,
  <span class="hljs-string">'btns'</span>: [<span class="hljs-string">'第一个按钮'</span>, <span class="hljs-string">'第二个按钮'</span>, <span class="hljs-string">'第三个按钮'</span>],
  <span class="hljs-string">'cancelBtn'</span>: <span class="hljs-string">'取消'</span>,
  <span class="hljs-string">'destructiveBtnIndex'</span>: <span class="hljs-number">2</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
  <span class="hljs-keyword">switch</span> (data.index) {   <span class="hljs-comment">// index标示用户点击的按钮，在actionSheet中的位置，从0开始</span>
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
      alert(<span class="hljs-string">'第一个按钮'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      alert(<span class="hljs-string">'第二个按钮'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
      alert(<span class="hljs-string">'第三个按钮'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
      alert(<span class="hljs-string">'取消按钮'</span>);
      <span class="hljs-keyword">break</span>;
  }
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击按钮调出actionSheet<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"actionSheet"</span>&gt;</span>打开actionSheet<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>


<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.actionSheet'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'actionSheet'</span>,{
      <span class="hljs-string">'title'</span>: <span class="hljs-string">'标题'</span>,
      <span class="hljs-string">'btns'</span>: [<span class="hljs-string">'第一个按钮'</span>, <span class="hljs-string">'第二个按钮'</span>, <span class="hljs-string">'第三个按钮'</span>],
      <span class="hljs-string">'cancelBtn'</span>: <span class="hljs-string">'取消'</span>,
      <span class="hljs-string">'destructiveBtnIndex'</span>: <span class="hljs-number">2</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
      <span class="hljs-keyword">switch</span> (data.index) {   <span class="hljs-comment">// index标示用户点击的按钮，在actionSheet中的位置，从0开始</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
          alert(<span class="hljs-string">'第一个按钮'</span>);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          alert(<span class="hljs-string">'第二个按钮'</span>);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          alert(<span class="hljs-string">'第三个按钮'</span>);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          alert(<span class="hljs-string">'取消按钮'</span>);
          <span class="hljs-keyword">break</span>;
      }
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/action-sheet-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/action-sheet-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'actionSheet'</span>,{
  title, btns, cancelBtn, destructiveBtnIndex
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>标题</td><td>N</td><td></td><td></td></tr><tr><td>btns</td><td>array</td><td>一组按钮，item类型是string</td><td>Y</td><td></td><td></td></tr><tr><td>cancelBtn</td><td>string</td><td>设置取消按钮及文字</td><td>N</td><td></td><td></td></tr><tr><td>destructiveBtnIndex</td><td>int</td><td>（IOS特殊处理）指定按钮的索引号，从0开始，使用场景：需要删除或清除数据等类似场景，默认红色</td><td>N</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>不是API调用后被回调，而是用户选择选项之后的回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>格式是 {data: {index: 0}}</p><p>这个index是用户点击的按钮在actionSheet中的位置，从0开始</p></blockquote><a class="my-pdf-link" target="blank" href="./action-sheet.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="alert" class="title-entry">alert</h1><p>alert对话框的native实现</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'alert'</span>, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">'你好'</span>,
  <span class="hljs-attr">button</span>: <span class="hljs-string">'确定'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="alert和confirm" class="title-entry">alert和confirm</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert"</span>&gt;</span>点击Alert<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"confirm"</span>&gt;</span>点击Confirm<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.alert'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'alert'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'你好'</span>,
      <span class="hljs-attr">button</span>: <span class="hljs-string">'确定'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.confirm'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'confirm'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'确定要退出吗？'</span>,
      <span class="hljs-attr">okButton</span>: <span class="hljs-string">'是'</span>,
      <span class="hljs-attr">cancelButton</span>: <span class="hljs-string">'否'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/alert-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/alert-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'alert'</span>,{
  title, message, button
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>alert框标题</td><td>N</td><td>‘’</td><td></td></tr><tr><td>message</td><td>string</td><td>alert框文本</td><td>N</td><td></td><td></td></tr><tr><td>button</td><td>string</td><td>按钮文字</td><td>N</td><td>‘确定’</td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数，当点击button后被调用</td><td>N</td><td></td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>alert</code>这个api不像window.alert，它不是阻塞式的，也就是说先后弹2个的话，最后看到的是后弹的那个。</li></ul><a class="my-pdf-link" target="blank" href="./alert.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="confirm" class="title-entry">confirm</h1><p>confirm确认框的native实现</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'confirm'</span>, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">'确定要退出吗？'</span>,
  <span class="hljs-attr">okButton</span>: <span class="hljs-string">'是'</span>,
  <span class="hljs-attr">cancelButton</span>: <span class="hljs-string">'否'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="alert和confirm" class="title-entry">alert和confirm</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert"</span>&gt;</span>点击Alert<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"confirm"</span>&gt;</span>点击Confirm<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.alert'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'alert'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'你好'</span>,
      <span class="hljs-attr">button</span>: <span class="hljs-string">'确定'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.confirm'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'confirm'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'确定要退出吗？'</span>,
      <span class="hljs-attr">okButton</span>: <span class="hljs-string">'是'</span>,
      <span class="hljs-attr">cancelButton</span>: <span class="hljs-string">'否'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/confirm-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/confirm-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'alert'</span>,{
  title, message, okButton, cancelButton
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>alert框标题</td><td>N</td><td>‘’</td><td></td></tr><tr><td>message</td><td>string</td><td>alert框文本</td><td>N</td><td></td><td></td></tr><tr><td>okButton</td><td>string</td><td>确定按钮文字</td><td>N</td><td>‘确定’</td><td></td></tr><tr><td>cancelButton</td><td>string</td><td>取消按钮文字</td><td>N</td><td>‘取消’</td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数，当点击button后被调用</td><td>N</td><td></td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>confirm</code>这个api和<code>alert</code>一样，它也不是阻塞式的，也就是说先后弹2个的话，最后看到的是后弹的那个。</li></ul><a class="my-pdf-link" target="blank" href="./confirm.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.6</span></div><h1 id="自定义键盘" class="title-entry">自定义键盘</h1><p>自定义键盘使用：Android和ios方案不一样，Android支持直接通过原生的input输入框唤起，ios通过jsapi唤起</p><h3 id="iOS" class="title-entry">iOS</h3><ul><li>前端DOM结构</li></ul><div class="code-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt; <span class="hljs-attr">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"h5numInput"</span> <span class="hljs-attr">kb-type</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-paste</span>=<span class="hljs-string">"false"</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">"8"</span> <span class="hljs-attr">data-placeholder</span>=<span class="hljs-string">"这里调用数字键盘"</span> /&gt;</span>
- type： 支持 type="password"
- class="h5numInput" 标识页面初始化加载就调用自定义键盘;
- kb-type：(9.9.1之后开始支持别名data-kb-type)需要调用的键盘类型，`0`为数字键盘，`1`为身份证键盘，`2`为不带小数点的键盘，不写该属性默认为数字键盘；键盘类型随时可扩展；
- data-paste: 若为 false 则不能进行粘贴，默认为 true;
- data-placeholder：需要显示的提示信息，不能只写placeholder；
- maxlength:最大长度
- 居左、中、右对齐：添加 css的 text-align，支持 left，center，right，justify，默认为 left
</code></pre></div><ul><li>ios数字键盘相关 API（只有ios有，android不支持）</li></ul><p>numInput：用于手动调用自定义键盘</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'numInput'</span>);
</code></pre></div><p>inputFocus：用于当前端校验某input 有问题， focus 到 input 输入框</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'inputFocus'</span>, {
  <span class="hljs-attr">index</span>: index <span class="hljs-comment">//用于 focus 的某 input，从0开始（带有class含h5numInput的输入框）</span>
});
</code></pre></div><p>inputBackFill：用于当前端去除无用值，返回正确的值给 native（since 9.0）</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'inputBackFill'</span>, {
  <span class="hljs-attr">index</span>: index, <span class="hljs-comment">//用于回填的某 input，从0开始（带有class含h5numInput的输入框）</span>
  value: <span class="hljs-number">111</span>
});
</code></pre></div><p>numInputReset：用于重新渲染某输入框的位置（since 9.0）</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'numInputReset'</span>, {
  <span class="hljs-attr">index</span>: index <span class="hljs-comment">//用于重新渲染 input位置，从0开始（带有class含h5numInput的输入框）</span>
});
</code></pre></div><p>inputBlur：手动blur（since 9.5）</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'inputBlur'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// do something</span>
});
</code></pre></div><h3 id="回调事件" class="title-entry">回调事件</h3><div class="code-wrap"><pre class="hljs"><code><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'inputEvent'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"index:"</span> + event.data.index);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"number:"</span> + event.data.value);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"eventType:"</span> + event.data.eventType);

  <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"blur"</span>) {
    <span class="hljs-comment">// do blur</span>
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"focus"</span>) {
    <span class="hljs-comment">// do focus</span>
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"keyup"</span>) {
    <span class="hljs-comment">// do keyup</span>
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"keydown"</span>) {
    <span class="hljs-comment">// do keydown</span>
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"change"</span>) {
    <span class="hljs-comment">// do change</span>
  }
}, <span class="hljs-literal">false</span>);
</code></pre></div><h2 id="使用方法" class="title-entry">使用方法</h2><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本功能" class="title-entry">基本功能</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
* {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}
<span class="hljs-selector-tag">input</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
  <span class="hljs-attribute">-webkit-box-sizing</span>: border-box;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> auto;
}
<span class="hljs-selector-id">#J_inputLog</span> {
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.2</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
  <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">"h5numInput"</span>
  <span class="hljs-attr">data-kb-type</span>=<span class="hljs-string">"0"</span>
  <span class="hljs-attr">kb-type</span>=<span class="hljs-string">"0"</span>
  <span class="hljs-attr">data-paste</span>=<span class="hljs-string">"false"</span>
  <span class="hljs-attr">maxlength</span>=<span class="hljs-string">"6"</span>
  <span class="hljs-attr">data-placeholder</span>=<span class="hljs-string">"iOS kb-type=0"</span>
  <span class="hljs-attr">id</span>=<span class="hljs-string">"J_input1"</span>
/&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
  <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">"h5numInput"</span>
  <span class="hljs-attr">data-kb-type</span>=<span class="hljs-string">"1"</span>
  <span class="hljs-attr">kb-type</span>=<span class="hljs-string">"1"</span>
  <span class="hljs-attr">data-paste</span>=<span class="hljs-string">"false"</span>
  <span class="hljs-attr">maxlength</span>=<span class="hljs-string">"6"</span>
  <span class="hljs-attr">data-placeholder</span>=<span class="hljs-string">"iOS kb-type=1"</span>
  <span class="hljs-attr">id</span>=<span class="hljs-string">"J_input2"</span>
/&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
  <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">"h5numInput"</span>
  <span class="hljs-attr">data-kb-type</span>=<span class="hljs-string">"2"</span>
  <span class="hljs-attr">kb-type</span>=<span class="hljs-string">"2"</span>
  <span class="hljs-attr">data-paste</span>=<span class="hljs-string">"false"</span>
  <span class="hljs-attr">maxlength</span>=<span class="hljs-string">"6"</span>
  <span class="hljs-attr">data-placeholder</span>=<span class="hljs-string">"iOS kb-type=2"</span>
  <span class="hljs-attr">id</span>=<span class="hljs-string">"J_input3"</span>
/&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
  <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"system/Android"</span>
  <span class="hljs-attr">id</span>=<span class="hljs-string">"J_input4"</span>
/&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>键盘事件日志<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_inputLog"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doLog</span>(<span class="hljs-params">logStr</span>) </span>{
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'J_inputLog'</span>).innerHTML += logStr + <span class="hljs-string">'&lt;br&gt;'</span>;
  }

  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'inputEvent'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
    doLog(<span class="hljs-string">"index:"</span> + event.data.index);
    doLog(<span class="hljs-string">"number:"</span> + event.data.value);
    doLog(<span class="hljs-string">"eventType:"</span> + event.data.eventType);

    <span class="hljs-built_in">console</span>.log(event);

    <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"blur"</span>) {
      <span class="hljs-comment">// do blur</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"focus"</span>) {
      <span class="hljs-comment">// do focus</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"keyup"</span>) {
      <span class="hljs-comment">// do keyup</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"keydown"</span>) {
      <span class="hljs-comment">// do keydown</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.data.eventType == <span class="hljs-string">"change"</span>) {
      <span class="hljs-comment">// do change</span>
    }
  }, <span class="hljs-literal">false</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/custom-keyboard-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/custom-keyboard-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="Android" class="title-entry">Android</h3><p>安卓自定义键盘直接识别type=’number’，’tel’或者其他以正则表达式约束的input输入框，’tel‘支持input的其他扩展项，如maxLength等。 如果当前页面存在其他输入框，可在数字类型输入框的onfocus调用’hideKeyboard’接口，以隐藏显示的系统键盘之后再唤起自定义键盘。 &lt; input type=”number” data-placeholder=”这里调用数字键盘” /&gt;</p><p>hideAllKeyboard：隐藏所有键盘（包括自定义键盘）（since 10.0.15）</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'hideAllKeyboard'</span>);
</code></pre></div><h3 id="Android数字键盘demo" class="title-entry">Android数字键盘demo</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Android自定义数字键盘<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">”number”</span> <span class="hljs-attr">data-placeholder</span>=<span class="hljs-string">”这里调用数字键盘”/</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/custom-keyboard-antbridge-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/custom-keyboard-antbridge-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./custom-keyboard.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="hideLoading" class="title-entry">hideLoading</h1><p>隐藏全局大菊花</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'hideLoading'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="显示/隐藏全局loading框" class="title-entry">显示/隐藏全局loading框</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>注意安卓下显示loading后，会覆盖整个界面，所以请使用系统回退键关闭loading<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"show"</span>&gt;</span>显示loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hide"</span>&gt;</span>隐藏loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delay"</span>&gt;</span>延迟2秒显示loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"notext"</span>&gt;</span>无文字菊花<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.show'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
      <span class="hljs-attr">text</span>: <span class="hljs-string">'加载中'</span>,
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.hide'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'hideLoading'</span>);
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.delay'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
      <span class="hljs-attr">text</span>: <span class="hljs-string">'加载中'</span>,
      <span class="hljs-attr">delay</span>: <span class="hljs-number">2000</span>,
    });
  });

   <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.notext'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/hide-loading-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/hide-loading-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./hide-loading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="hideOptionMenu" class="title-entry">hideOptionMenu</h1><p>隐藏标题栏右边的按钮属性</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'hideOptionMenu'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><p>请参考<a href="./set-option-menu.html">setOptionMenu</a></p><a class="my-pdf-link" target="blank" href="./hide-option-menu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.6</span></div><h1 id="hideTitleLoading" class="title-entry">hideTitleLoading</h1><p>隐藏标题栏loading</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'hideTitleLoading'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="显示/隐藏全局loading框" class="title-entry">显示/隐藏全局loading框</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"show"</span>&gt;</span>显示loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hide"</span>&gt;</span>隐藏loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.show'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showTitleLoading'</span>);
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.hide'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'hideTitleLoading'</span>);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/hide-title-loading-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/hide-title-loading-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./hide-title-loading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="prompt" class="title-entry">prompt</h1><p>prompt输入框弹窗的native实现</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'prompt'</span>, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">'确定要这么干吗？'</span>,
  <span class="hljs-attr">placeholder</span>:<span class="hljs-string">'提示文案'</span>,
  <span class="hljs-attr">okButton</span>: <span class="hljs-string">'是'</span>,
  <span class="hljs-attr">cancelButton</span>: <span class="hljs-string">'否'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
  <span class="hljs-comment">// result.ok     bool型  用户是否点击确定</span>
  <span class="hljs-comment">// result.inputValue     用户输入的内容</span>
  <span class="hljs-built_in">console</span>.log(result.ok,result.inputValue);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="prompt" class="title-entry">prompt</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"prompt"</span>&gt;</span>点击prompt<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"result"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.prompt'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'prompt'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'亲'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'确定要这么干吧'</span>,
      <span class="hljs-attr">okButton</span>: <span class="hljs-string">'确定'</span>,
      <span class="hljs-attr">cancelButton</span>: <span class="hljs-string">'算了'</span>,
      <span class="hljs-attr">placeholder</span>:<span class="hljs-string">'placeholder'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      <span class="hljs-comment">// result.ok     bool型  用户是否点击确定</span>
      <span class="hljs-comment">// result.inputValue     用户输入的内容</span>
      <span class="hljs-keyword">if</span> (result.ok) {
        <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.result'</span>).textContent = result.inputValue;
      }      
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/prompt-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/prompt-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'prompt'</span>,{
  title, message, okButton, cancelButton,placeholder
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>prompt框标题</td><td>N</td><td>‘’</td><td></td></tr><tr><td>message</td><td>string</td><td>prompt框文本</td><td>N</td><td></td><td></td></tr><tr><td>okButton</td><td>string</td><td>确定按钮文字</td><td>N</td><td>‘确定’</td><td></td></tr><tr><td>cancelButton</td><td>string</td><td>取消按钮文字</td><td>N</td><td>‘取消’</td><td></td></tr><tr><td>placeholder</td><td>string</td><td>输入框内的提示文案</td><td>N</td><td>‘’</td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数，当点击button后被调用</td><td>N</td><td></td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>prompt</code>这个api和<code>alert</code>一样，它也不是阻塞式的，也就是说先后弹2个的话，最后看到的是后弹的那个。</li></ul><a class="my-pdf-link" target="blank" href="./prompt.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="setBarBottomLineColor" class="title-entry">setBarBottomLineColor</h1><p>可通过该接口自定义导航栏底部细线的颜色，当颜色与导航栏相同时可达到隐藏的效果</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">"setBarBottomLineColor"</span>, {
  <span class="hljs-attr">color</span>: <span class="hljs-number">16711688</span>
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding-top:80px;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>设置导航栏底部细线颜色<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.title'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"setBarBottomLineColor"</span>, {
      <span class="hljs-attr">color</span>: <span class="hljs-number">16711688</span>
    });
  },<span class="hljs-literal">false</span>);
},<span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/set-bar-bottomline-color-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/set-bar-bottomline-color-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setBarBottomLineColor'</span>,{
  color
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>color</td><td>int</td><td>色值，十进制</td><td>Y</td><td></td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./set-bar-bottomline-color.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="setOptionMenu" class="title-entry">setOptionMenu</h1><p>设置标题栏右边的按钮属性。<br>该接口仅负责设置，需要额外调用showOptionMenu保证该按钮的显示。</p><p><strong>注意：由于苹果的ATS限制，icon URL必须为https链接或base64，http链接会被忽略</strong></p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
  <span class="hljs-attr">title</span> : <span class="hljs-string">'按钮'</span>,  <span class="hljs-comment">// 与icon、icontype三选一</span>
  redDot : <span class="hljs-string">'-1'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
  color : <span class="hljs-string">'#ff00ff00'</span>, <span class="hljs-comment">// 必须以＃开始ARGB颜色值</span>
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="设置各种类型的右按钮" class="title-entry">设置各种类型的右按钮</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span>&gt;</span>单按钮<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon"</span>&gt;</span>单图标<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu"</span>&gt;</span>下拉菜单(9.9.3)<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"reset"</span>&gt;</span>重置<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hide"</span>&gt;</span>隐藏<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"show"</span>&gt;</span>显示<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.button'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
      <span class="hljs-attr">title</span> : <span class="hljs-string">'按钮'</span>,
      <span class="hljs-attr">redDot</span> : <span class="hljs-string">'5'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
      color : <span class="hljs-string">'#ff00ff00'</span>, <span class="hljs-comment">// 必须以＃开始ARGB颜色值</span>
    });
    AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.icon'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
      <span class="hljs-attr">icon</span> : <span class="hljs-string">'http://pic.alipayobjects.com/e/201212/1ntOVeWwtg.png'</span>,
      <span class="hljs-attr">redDot</span> : <span class="hljs-string">'-1'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
    });
     AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.menu'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
      <span class="hljs-comment">// 显示的时候是从后往前显示的</span>
      menus: [{
        <span class="hljs-attr">icontype</span>: <span class="hljs-string">'scan'</span>,
        <span class="hljs-attr">redDot</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
      }, {
        <span class="hljs-attr">icontype</span>: <span class="hljs-string">'user'</span>,
        <span class="hljs-attr">redDot</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-comment">// -1表示不显示，0表示显示红点，1-99表示在红点上显示的数字</span>
      }],
      <span class="hljs-attr">override</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">//在需要设置多个option的情况下，是否保留默认的optionMenu</span>
    });

    <span class="hljs-comment">// 必须强制调用一把刷新界面</span>
    AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
  });  

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.reset'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
      <span class="hljs-attr">reset</span>: <span class="hljs-literal">true</span>,
    });
    AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
  });  

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.show'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
  });  

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.hide'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'hideOptionMenu'</span>);
  });  

  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'optionMenu'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
   alert(<span class="hljs-built_in">JSON</span>.stringify(e));
  }, <span class="hljs-literal">false</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/set-option-menu-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/set-option-menu-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><p>要注意的是有几个属性是优先级的：reset &gt; title &gt; icontype &gt; icon， 这4个属性只需要有一个即可。</p><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>,{
  title, icon, redDot, reset, color, override, menus, icontype
})
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>右按钮文字</td><td>Y</td><td></td><td></td></tr><tr><td>icon</td><td>string</td><td>右按钮图标url、base64（since 9.0）<br>8.3及以前：iOS 40x40（周边不留白）, Android 50x50（四边各透明留白5px）<br>8.4及以后：两个平台统一使用40x40（周边不留白）</td><td>Y</td><td></td><td></td></tr><tr><td>redDot</td><td>string</td><td>红点数值</td><td>N</td><td></td><td>8.6</td></tr><tr><td>reset</td><td>bool</td><td>重置到系统默认，当reset=true时，忽略其他参数</td><td>Y</td><td>false</td><td>8.6</td></tr><tr><td>color</td><td>string</td><td>文字颜色值</td><td>N</td><td>#ffffffff</td><td>9.0</td></tr><tr><td>override</td><td>bool</td><td>在需要设置多个option的情况下，是否保留默认的optionMenu</td><td>N</td><td>false</td><td>9.9</td></tr><tr><td>menus</td><td>array</td><td>设置多个按钮</td><td>N</td><td>[]</td><td>9.9</td></tr><tr><td>preventDefault</td><td>bool</td><td>是否阻止默认的分享功能（默认是弹分享框）preventDefault=true会阻止默认的分享</td><td>N</td><td>[]</td><td>9.9</td></tr><tr><td>icontype</td><td>string</td><td>根据图片类型加载容器预置图片,与title、icon三选一。<br>注意: 只支持单个optionMenu变色。<br>具体类型包含: user (账户)、filter (筛选器)、search (查找)、add (添加)、settings (设置)、scan (扫一扫)、info (信息)、help (帮助)、locate (定位)、more(更多)、mail(邮箱 10.0.8及以上)</td><td>N</td><td></td><td>9.9.3</td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>setOptionMenu</code>后如果效果不对，请调用一把<code>showOptionMenu</code></li></ul><a class="my-pdf-link" target="blank" href="./set-option-menu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="setTitleColor" class="title-entry">setTitleColor</h1><p>可通过启动参数和接口调用，改变TitleBar的颜色</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">"setTitleColor"</span>, {
  <span class="hljs-attr">color</span>: <span class="hljs-number">16775138</span>,
  <span class="hljs-attr">reset</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">//(可选,默认为false)  是否重置title颜色为默认颜色。</span>
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding-top:80px;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>设置标题颜色<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"reset"</span>&gt;</span>重置标题颜色<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pushWindow"</span>&gt;</span>新开查看透明标题重置效果<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resetTransparent"</span>&gt;</span>重置透明标题颜色<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.title'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"setTitleColor"</span>, {
      <span class="hljs-attr">color</span>: <span class="hljs-number">16775138</span>,
      <span class="hljs-attr">reset</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">//(可选,默认为false)  是否重置title颜色为默认颜色。</span>
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.reset'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"setTitleColor"</span>,{
      <span class="hljs-attr">color</span>: <span class="hljs-number">16775138</span>,
      <span class="hljs-attr">reset</span>: <span class="hljs-literal">true</span>
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.pushWindow'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"pushWindow"</span>, {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'./set-title-color-demo.html?__webview_options__=transparentTitle%3Dalways'</span>
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.resetTransparent'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"setTitleColor"</span>,{
      <span class="hljs-attr">color</span>: <span class="hljs-number">16775138</span>,
      <span class="hljs-attr">resetTransparent</span>: <span class="hljs-literal">true</span>
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/set-title-color-demo.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/set-title-color-demo.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setTitleColor'</span>,{
  <span class="hljs-attr">color</span>: <span class="hljs-number">16775138</span>,
  <span class="hljs-attr">reset</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">resetTransparent</span>: <span class="hljs-literal">false</span>
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>color</td><td>int</td><td>色值，十进制</td><td>Y</td><td></td><td></td></tr><tr><td>reset</td><td>bool</td><td>是否重置为支付宝默认颜色</td><td>N</td><td>false</td><td></td></tr><tr><td>resetTransparent</td><td>bool</td><td>如果当前是透明的导航头，重置为默认的白色</td><td>N</td><td>false</td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./set-title-color.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="setTitle" class="title-entry">setTitle</h1><p>设置页面的标题栏，包括主标题，副标题以及标题菜单项</p><p><strong>注意：由于苹果的ATS限制，image URL必须为https链接或base64，http链接会被忽略</strong></p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'标题'</span>,
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="设置各种类型的标题栏" class="title-entry">设置各种类型的标题栏</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>只设置标题<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subTitle"</span>&gt;</span>标题+副标题<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"clear"</span>&gt;</span>清空标题<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.title'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'标题'</span>,
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.subTitle'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'标题'</span>,
      <span class="hljs-attr">subtitle</span>: <span class="hljs-string">'副标题'</span>,
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.clear'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">' '</span>, <span class="hljs-comment">//不是真的清空，只是设置为空格，如果注册了title事件，还是会触发</span>
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/set-title-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/set-title-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setTitle'</span>,{
  title, subtitle, image
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>主标题文案</td><td>N</td><td></td><td></td></tr><tr><td>subtitle</td><td>string</td><td>副标题文案</td><td>N</td><td></td><td></td></tr><tr><td>image</td><td>string</td><td>支持url或者base64，请使用一张3X图，如果设置了image，则前两个参数失效，并且不从webview的回调中读取title</td><td>N</td><td></td><td>9.9.5</td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./set-title.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.2</span></div><h1 id="setToolbarMenu" class="title-entry">setToolbarMenu</h1><p>自定义分享面板第二栏的工具栏内容。</p><p><strong>注意：由于苹果的ATS限制，icon URL必须为https链接或base64，http链接会被忽略</strong></p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setToolbarMenu'</span>, {
  <span class="hljs-attr">menus</span>:[
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">"字体"</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">"H5MenuActionOfFont"</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">"https://os.alipayobjects.com/rmsportal/SuHlTsUNSyJvRzn.png"</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">"菜单项2"</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">"cm2"</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">"菜单项3"</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">"cm3"</span>
    }
  ],
  <span class="hljs-attr">override</span>: <span class="hljs-literal">false</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// do something</span>
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="设置工具栏菜单项列表" class="title-entry">设置工具栏菜单项列表</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_setOverrideValue"</span>&gt;</span>override(false)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"J_setResetValue"</span>&gt;</span>reset(false)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">var</span> options = {
    <span class="hljs-attr">menus</span>:[
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"字体"</span>,
        <span class="hljs-attr">tag</span>: <span class="hljs-string">"H5MenuActionOfFont"</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">"https://os.alipayobjects.com/rmsportal/SuHlTsUNSyJvRzn.png"</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"菜单项2"</span>,
        <span class="hljs-attr">tag</span>: <span class="hljs-string">"cm2"</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"菜单项3"</span>,
        <span class="hljs-attr">tag</span>: <span class="hljs-string">"cm3"</span>
      }
    ],
    <span class="hljs-attr">override</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">reset</span>: <span class="hljs-literal">false</span>
  };

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_setOverrideValue'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    options.override = !options.override;
    e.target.innerText = <span class="hljs-string">'override('</span> + options.override.toString() + <span class="hljs-string">')'</span>;
    updateOptions();
  }, <span class="hljs-literal">false</span>);

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#J_setResetValue'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    options.reset = !options.reset;
    e.target.innerText = <span class="hljs-string">'reset('</span> + options.reset.toString() + <span class="hljs-string">')'</span>;
    updateOptions();
  }, <span class="hljs-literal">false</span>);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateOptions</span>(<span class="hljs-params"></span>) </span>{
    AlipayJSBridge.call(<span class="hljs-string">'setToolbarMenu'</span>, options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  }

  updateOptions();

  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'toolbarMenuClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    alert(<span class="hljs-built_in">JSON</span>.stringify(e));
  }, <span class="hljs-literal">false</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/set-toolbar-menu-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/set-toolbar-menu-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setToolbarMenu'</span>,{
  <span class="hljs-attr">menus</span>: {
    name, tag, icon
  }, override, reset
})
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>menus</td><td>array</td><td>菜单列表，默认显示于容器默认菜单项的右上角,icon使用容器默认icon（五角星）。<br>name:表示菜单项显示内容，必须控制在4个字符（含）以内，否则容器会截断4个字显示（必须填写）；<br>tag:表示菜单项的唯一标签（必须填写）；<br>icon:可自定义icon，传入图片url（非必填）；<br>当菜单被点击后，传入的值都会被返回；<br>当override为false时，用户自定义菜单个数必须小于5个。</td><td>Y</td><td></td><td></td></tr><tr><td>override</td><td>bool</td><td>是否覆盖容器自带的菜单列表</td><td>N</td><td>false</td><td></td></tr><tr><td>reset</td><td>bool</td><td>是否重置菜单到系统默认，当reset=true时，忽略其他参数</td><td>N</td><td>false</td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {result}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>result.status</td><td>string</td><td>“Success”:添加菜单项成功</td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./set-toolbar-menu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="showLoading" class="title-entry">showLoading</h1><p>显示全局大菊花</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
  <span class="hljs-attr">text</span>: <span class="hljs-string">'加载中'</span>,
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="显示/隐藏全局loading框" class="title-entry">显示/隐藏全局loading框</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>注意安卓下显示loading后，会覆盖整个界面，所以请使用系统回退键关闭loading<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"show"</span>&gt;</span>显示loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hide"</span>&gt;</span>隐藏loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delay"</span>&gt;</span>延迟2秒显示loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"notext"</span>&gt;</span>无文字菊花<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.show'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
      <span class="hljs-attr">text</span>: <span class="hljs-string">'加载中'</span>,
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.hide'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'hideLoading'</span>);
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.delay'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
      <span class="hljs-attr">text</span>: <span class="hljs-string">'加载中'</span>,
      <span class="hljs-attr">delay</span>: <span class="hljs-number">2000</span>,
    });
  });

   <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.notext'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>, {
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/show-loading-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/show-loading-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showLoading'</span>,{
  text, delay
})
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>text</td><td>string</td><td>文本内容；若不指定，则显示为中间大菊花；如果指定，显示为小菊花右侧带文字</td><td>N</td><td>‘’</td><td></td></tr><tr><td>delay</td><td>int</td><td>延迟多少毫秒后显示；如果在此时间之前调用了hideLoading, 则不会再显示</td><td>N</td><td>0</td><td></td></tr><tr><td>autoHide</td><td>bool</td><td>默认情况下容器会在pageFinish的后会主动隐藏菊花，默认true, 传入false，关掉自动隐藏(only android)</td><td>N</td><td>true</td><td>10.0.15</td></tr><tr><td>cancelable</td><td>bool</td><td>安卓返回键是否消掉菊花，默认物理返回键会消掉菊花(only android)</td><td>N</td><td>true</td><td>10.0.18</td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>注意安卓下显示loading后，会覆盖整个界面，所以请使用系统回退键关闭loading;</li><li>ios下的情况是，当没有设置text值的时候，只有标题栏和工具栏可以被点击， 有文字的时候不能覆盖任何内容。9.9.5以后已修复</li></ul><a class="my-pdf-link" target="blank" href="./show-loading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="showOptionMenu" class="title-entry">showOptionMenu</h1><p>显示标题栏右边的按钮属性</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><p>请参考<a href="./set-option-menu.html">setOptionMenu</a></p><a class="my-pdf-link" target="blank" href="./show-option-menu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.9</span></div><h1 id="showPopMenu" class="title-entry">showPopMenu</h1><p>右上角显示弹出的下拉菜单,如果设置了icon那么每一个菜单项都要求有icon,要不都没有icon。<br>特别注意，请右上角为默认三个点的时候不要调用本接口，右上角为自定义图片或者文字的时候可以调用。<br>注意：tag是必选项 该API在9.9版本之后可以使用</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showPopMenu'</span>,{
  <span class="hljs-attr">menus</span>:[
    {<span class="hljs-attr">name</span>:<span class="hljs-string">"字体"</span>, <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>, <span class="hljs-attr">redDot</span>:<span class="hljs-string">"101"</span>},
    {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项2"</span>,  <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>, <span class="hljs-attr">redDot</span>:<span class="hljs-string">"0"</span>},
    {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项3"</span>,  <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>}
  ]
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="设置弹出菜单栏" class="title-entry">设置弹出菜单栏</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>请点击右上角弹出的菜单<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  AlipayJSBridge.call(<span class="hljs-string">'setOptionMenu'</span>, {
    <span class="hljs-attr">title</span> : <span class="hljs-string">'点我'</span>,
    <span class="hljs-attr">redDot</span> : <span class="hljs-string">'-1'</span>
  });
  AlipayJSBridge.call(<span class="hljs-string">'showOptionMenu'</span>);

  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'optionMenu'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    AlipayJSBridge.call(<span class="hljs-string">'showPopMenu'</span>, {
      <span class="hljs-attr">menus</span>:[
        {<span class="hljs-attr">name</span>:<span class="hljs-string">"字体"</span>, <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag1"</span>,<span class="hljs-attr">redDot</span>:<span class="hljs-string">"101"</span>},
        {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项2"</span>,  <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag2"</span>,<span class="hljs-attr">redDot</span>:<span class="hljs-string">"0"</span>},
        {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项3"</span>,  <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag3"</span>},
        {<span class="hljs-attr">name</span>:<span class="hljs-string">"菜单项4"</span>, <span class="hljs-attr">tag</span>:<span class="hljs-string">"tag4"</span>,<span class="hljs-attr">redDot</span>:<span class="hljs-string">"66"</span>}
      ]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
      <span class="hljs-built_in">console</span>.log(e);
    });
  }, <span class="hljs-literal">false</span>);

  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'popMenuClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    alert(<span class="hljs-built_in">JSON</span>.stringify(e));
  }, <span class="hljs-literal">false</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/show-pop-menu-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/show-pop-menu-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showPopMenu'</span>,{
  <span class="hljs-attr">menus</span>: [{name, tag, icon,redDot}]
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>menus</td><td>array</td><td>菜单列表，显示于容器默认菜单项的右上角。<br>name:表示菜单项显示内容，建议在4个字符以内;<br>icon:可自定义icon，传入图片url（非必填）图片大小iOS中需要为42*42大小的图片；<br>当菜单被点击后，点击的的name会返回会通过popMenuClick事件返回；</td><td>Y</td><td></td><td></td></tr><tr><td>icon</td><td>string</td><td>右按钮图标url</td><td>N</td><td></td><td></td></tr><tr><td>name</td><td>string</td><td>菜单显示的内容</td><td>Y</td><td></td><td></td></tr><tr><td>tag</td><td>string</td><td>tag用于区分选项</td><td>Y</td><td></td><td></td></tr><tr><td>redDot</td><td>string</td><td>是否显示小红点</td><td>N</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>api调用后的回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./show-pop-menu.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.6</span></div><h1 id="showTitleLoading" class="title-entry">showTitleLoading</h1><p>在标题栏显示loading</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showTitleLoading'</span>);
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="显示/隐藏全局loading框" class="title-entry">显示/隐藏全局loading框</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"show"</span>&gt;</span>显示loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hide"</span>&gt;</span>隐藏loading<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.show'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showTitleLoading'</span>);
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.hide'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'hideTitleLoading'</span>);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/show-title-loading-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/show-title-loading-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><a class="my-pdf-link" target="blank" href="./show-title-loading.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">10.0.18</span></div><h1 id="showUCFailDialog" class="title-entry">showUCFailDialog</h1><p>uc初始化异常提醒框 showUCFailDialog</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showUCFailDialog'</span>, {
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="showUCFailDialog" class="title-entry">showUCFailDialog</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"showUCFailDialog"</span>&gt;</span>点击showUCFailDialog<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.showUCFailDialog'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'showUCFailDialog'</span>, {

    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-string">'回调结果：'</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
    });
  });

});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/showUCFailDialog-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/showUCFailDialog-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'showUCFailDialog'</span>,{
}, fn)
</code></pre></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li>通过ua判断当前webview是不是uc内核：</li></ul><p>if(ua.indexOf(“UCBS”) !=-1) { “UC 内核”; }</p><p>附：<br>U4内核的useragent：</p><p>Mozilla/5.0 (Linux; U; Android 4.4; zh-CN; Nexus 5 Build/KRT16M) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/40.0.2214.89 UCBrowser/ UCBS/2.9.5.1 Mobile Safari/537.36 AlipayDefined(nt:WIFI,ws:360|592|3.0) AliApp(AP/10.0.15) AlipayClient/10.0.15 Language/zh-Hans ProductType/dev</p><a class="my-pdf-link" target="blank" href="./showUCFailDialog.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><h1 id="tabBar" class="title-entry">tabBar</h1><p>底部tabBar控件</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'tabBar'</span>, {
  <span class="hljs-attr">action</span>: <span class="hljs-string">'create'</span>, <span class="hljs-comment">// 创建 Tab Bar，必选</span>
  textColor: <span class="hljs-number">16776960</span>,    <span class="hljs-comment">//ffff00 黄，必选</span>
  selectedColor:<span class="hljs-number">16711680</span>, <span class="hljs-comment">//ff0000 红，必选</span>
  selectedIndex:<span class="hljs-number">1</span>, <span class="hljs-comment">// 必选</span>
  items: [ <span class="hljs-comment">// 所有 TabItems，必选</span>
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'tab1'</span>, <span class="hljs-comment">// 标题，必选</span>
      tag: <span class="hljs-string">'tab11'</span>, <span class="hljs-comment">// tab项id，必选</span>
      icon: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/IOwBUWsFOQyNYhhAxDgb.png'</span>, <span class="hljs-comment">// 正常状态图片 URL，支持 base64 编码 URL，必选</span>
      activeIcon: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/KdyZNLUKgFfAAHreQzoj.png'</span>, <span class="hljs-comment">//选中状态图片 URL，支持 base64 编码 URL，必选</span>
      redDot: <span class="hljs-number">-1</span>, <span class="hljs-comment">// 选填, '0' 表示红点，null、'-1' 表示不显示，其他值展示出来</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'tab2'</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab22'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/dMHfRGFxWiRidgHSLLvS.png'</span>, <span class="hljs-comment">// 灰色</span>
      activeIcon: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/tNPTHyWzgEQNlZLxHVRL.png'</span>, <span class="hljs-comment">// 选中状态图片 URL，支持 base64 编码 URL，必选</span>
      redDot: <span class="hljs-string">'99+'</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'tab3'</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab33'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/neFZyipaNvaZiMgNZrBf.png'</span>,
      <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/ZralOspCWaHCcCoWxZZk.png'</span>,
      <span class="hljs-attr">redDot</span>: <span class="hljs-string">'中文'</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'tab4'</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab44'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/xBaOvobgYpocSlwanZVM.png'</span>,
      <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/MTikkHhrAneFXlrfARGD.png'</span>,
      <span class="hljs-attr">redDot</span>: <span class="hljs-string">'😜'</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'tab5'</span>,
      <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab55'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/AukzoUbVCWPJqSjEbFLu.png'</span>,
      <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/RcumdvGStyfBEDaCuqCt.png'</span>,
      <span class="hljs-attr">redDot</span>: <span class="hljs-string">'1234567890'</span>
    }
  ]
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="基本使用" class="title-entry">基本使用</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>tabBar<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> base64 = {
    <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'iVBORw0KGgoAAAANSUhEUgAAADQAAAAvCAQAAAAGYCE4AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfeBAoWAhU5ncjwAAACMElEQVRYw72XT0gUURzHP2/bbDV1q1Na9geC8LJSGkSXhMJrQR28RafOYtBRunct1Dpq0CGyDh7skEVkGRQUgWwhFJGLh421ZbWd3X0dGsd947DNa+c33x8M8x3m9/vMb+bNezNgq3N8QvOT2+y3zrVQmnm0G5Ok5ECnKXigIoPhExOWoON0ePu7OSsHakMZ2ND5tqBWw3WxSwp01HAqfKIdqIUjhs/jyIAO02f4HBUZ0Hl6DP8tfKoNKM2w4SssWV1maF1iw3tZNZoVeiUw+3hhYDSPww9uG41SNTBVrkpgzvDD1897uqLHHOSlD+NwLXpMN098GM0s7VFjDjCzDaOZtgX9a7bq51bgqvOb1zxjiZxxNLGtXoIqq3ym3AiS4grLAd1sRYWSEeuBsco9ehSwkzQ73OLrrLlX0s8oFyN7U6YUp7hOL0n3wBrTjONwghkORQQBKMFb3+34xRAw6Jtumo4EAz52O8cATS3CfqAWNHvrSBF/tWC7lP+fPnIj2XyVhirygafcJysNyjLCIth/BdnqJHfJxAGCDBfiAUF3XKBqPKAa7wCkR12ZBzyUBuW4wxsWKUiD2sgzt2kkn1EnY1vf6rKDoYO98YDqJAv6yvfNXanBUGSF50zyRRr0iJss1y+hUrfuMsPmSi0FamXI/IMPAln8azeQ4+9owXdCgSygmu71FRv1NskIY2S8skXGmQdKZEmh6GQPLb4SFco41ACFcrfKc6DIM8eEmfQH27n1x37W3T4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDktMTdUMTU6MTk6NTErMDg6MDA6DCD0AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTA0LTEwVDIyOjAyOjIxKzA4OjAwnWo3LwAAAE10RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNy4wLjEtNiBRMTYgeDg2XzY0IDIwMTYtMDktMTcgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfd2aVOAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGXRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxMDAyPHMfCgAAABh0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxMTAyKPipJAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxMzk3MTM4NTQxzpipagAAABJ0RVh0VGh1bWI6OlNpemUAMTkuNEtCujeYBQAAAF90RVh0VGh1bWI6OlVSSQBmaWxlOi8vL2hvbWUvd3d3cm9vdC9zaXRlL3d3dy5lYXN5aWNvbi5uZXQvY2RuLWltZy5lYXN5aWNvbi5jbi9zcmMvMTE0MzgvMTE0MzgyMS5wbmf20jDHAAAAAElFTkSuQmCC'</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'iVBORw0KGgoAAAANSUhEUgAAADEAAAAwCAYAAAC4wJK5AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH3gQdFRYXNrWv9gAABL9JREFUaN7V2XmIlGUcB/DP6HpEeVeaFpllOR1GB51UFiVG2EWRFUEnkhUdCxpCdJBEpagdllBRERUREWRpZkJgUVaUZViYWoFWdmuax+5Of/yecd8dd93ZddfZ+cLLvjPMPu/v+/7O5/vkVAiFfG3x9lLch2PwKx7FbNRBbsWMVteqqTCBU5PBB2ITBuN+/Ic55a7XrRIkEmowKRGYh3F4Anvj3kQwS7hLkhiM07AZ07EEU/EG9sdk9C5noUqSGJaM/QWr0ncb8Qj+xBgc3SVJZMLjYOyDtcnoIpZhKfrjpC5JIiGHsen+CxFSRWzR6JlRXY5Exgt5nC+q0LwWSEJDlyKRIZDD9SInluAjmvSD3jg03a/oUiQyGIsbhBeeFP0hS3Ikjhd5srTLkMgYOALTRNK+ivnN/Pwi7IfP8F2XIJEhMASzcIJI5gexreTnQzEBBbysacLveRKFfG0pgZkYL0rqZKxmp9loAo7CV1hQ7rP2RDiNwrPJwHW4GYuyZBNGYGK6f0YMg5UbADOGDcfzOBk/4ja81cy/9EAtDhcV65W2PK8zPdEddycCy3FFlkDJG74E14mx4yH80cxvWkSHeyLjhTG4Mhk2FZ+0QKA/bsdeYi/xbjNrNUEpuc7aT/TAjegr8uGdlgwQM1Qe6/GSiI4ezaxZj+2l5HIrZnQsiczip4ux4i88lwxoKTz+1bghekrMTqXICY+uxOf4QBQJhXxtx5HIEOgu4rsfXpDCaBfx/YPoCXeJ/UU5WIYZeA1ba8rZObWGEgPH4WJsEJWpvpV/r8cDYoYaJhpds4/BkTgbx4oyfBAezhXytTUYLep5uZ7ZkB66vuT74XhddOXHcSfqd1Vl2vESh+JW3CHEhJtq0ofJYl4pFw1YjGtFByaqzPRE4GOxQ2vNC2WX0QzZdbhHhOskTMwV8rW/YyC+xD8aZ/kW1xNuHyk29vNFFRqPq0RTuxoftsXIcpEhc67oOw25Qr62kIy/AJ+KxNwVtqc3MDt9btDYNNeJ0WHHRqejSWSIHIf3MaCYAwVR2raVuc72jNErhfe2JWJ7ggAcgj74LZvIuXIeXJKIb4t5qJvwyNY9RGCQyMcavLe7faIua3hnEsign9gRjhfVcW6HNLtONroUm0QDvVBEQK6S4ll7USeq4gLsizOrikTG49vxc7rPVxWJEhRt31gRab89KKmKA8WoBN9UDYmEHAZgiph412BxtZE4QpTXs8RcNgfLqy0nVotZrQ5/YyGVPZ9oD7ZhrhDfBon9RfWQKCmvRWWwb1WRyFSn/jhAhNRPVUOipLyegsPE3LSKCh0BtxM9xYnqFCHpLBIltjo8kdALtwhPrBXzUx2774kGdhazOgkb8SYux/f4uvi83fXEaKF2Dyl+0RES0C7QM/1tcpaX3Z7WtcGI4iJnpGuhEMzWtWGNtqK70JzgWxmlsEiip1Cv+2g9T+pF+ydcvAbnCLVvrkYtqpAhW3oK2qCpSFaws8rSLV3d03UeLtPMiWuNOBs7EY8pQydKKAq+M8UsM1uE1RjRjIoGFjJXFi19zhLJpatIpJeIlllC5diRfzVCOJuWPNFTedgilL6n05uvFargNUKi72hsFnLSi0IabbKv/x9eolhQ3qHKMQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wOS0xN1QxNToyMDoyOCswODowMMCmIfUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMDQtMjlUMjE6MjI6MjMrMDg6MDBhsqZTAAAATXRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA3LjAuMS02IFExNiB4ODZfNjQgMjAxNi0wOS0xNyBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ93ZpU4AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADc2MC1GcAQAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANzgyzjps+wAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxMzk4Nzc3NzQzruA5SgAAABJ0RVh0VGh1bWI6OlNpemUAMjAuNEtCMbOI2gAAAF90RVh0VGh1bWI6OlVSSQBmaWxlOi8vL2hvbWUvd3d3cm9vdC9zaXRlL3d3dy5lYXN5aWNvbi5uZXQvY2RuLWltZy5lYXN5aWNvbi5jbi9zcmMvMTE1NjkvMTE1Njk4NS5wbme768jyAAAAAElFTkSuQmCC'</span>
  };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'tabBar'</span>, {
      <span class="hljs-attr">action</span>: <span class="hljs-string">'create'</span>, <span class="hljs-comment">// 创建 Tab Bar，必选</span>
      textColor: <span class="hljs-number">16776960</span>,    <span class="hljs-comment">//ffff00 黄，必选</span>
      selectedColor:<span class="hljs-number">16711680</span>, <span class="hljs-comment">//ff0000 红，必选</span>
      selectedIndex:<span class="hljs-number">1</span>, <span class="hljs-comment">// 必选</span>
      items: [ <span class="hljs-comment">// 所有 TabItems，必选</span>
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'tab1'</span>, <span class="hljs-comment">// 标题，必选</span>
          tag: <span class="hljs-string">'tab11'</span>, <span class="hljs-comment">// tab项id，必选</span>
          icon: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/IOwBUWsFOQyNYhhAxDgb.png'</span>, <span class="hljs-comment">// 正常状态图片 URL，支持 base64 编码 URL，必选</span>
          activeIcon: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/KdyZNLUKgFfAAHreQzoj.png'</span>, <span class="hljs-comment">//选中状态图片 URL，支持 base64 编码 URL，必选</span>
          redDot: <span class="hljs-number">-1</span>, <span class="hljs-comment">// 选填, '0' 表示红点，null、'-1' 表示不显示，其他值展示出来</span>
        },
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'tab2'</span>,
          <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab22'</span>,
          <span class="hljs-attr">icon</span>: base64.icon, <span class="hljs-comment">//'https://zos.alipayobjects.com/rmsportal/dMHfRGFxWiRidgHSLLvS.png', // 灰色</span>
          activeIcon: base64.activeIcon, <span class="hljs-comment">//https://zos.alipayobjects.com/rmsportal/tNPTHyWzgEQNlZLxHVRL.png', // 选中状态图片 URL，支持 base64 编码 URL，必选</span>
          redDot: <span class="hljs-string">'99+'</span>
        },
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'tab3'</span>,
          <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab33'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/neFZyipaNvaZiMgNZrBf.png'</span>,
          <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/ZralOspCWaHCcCoWxZZk.png'</span>,
          <span class="hljs-attr">redDot</span>: <span class="hljs-string">'中文'</span>
        },
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'tab4'</span>,
          <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab44'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/xBaOvobgYpocSlwanZVM.png'</span>,
          <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/MTikkHhrAneFXlrfARGD.png'</span>,
          <span class="hljs-attr">redDot</span>: <span class="hljs-string">'😜'</span>
        },
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'tab5'</span>,
          <span class="hljs-attr">tag</span>: <span class="hljs-string">'tab55'</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/AukzoUbVCWPJqSjEbFLu.png'</span>,
          <span class="hljs-attr">activeIcon</span>: <span class="hljs-string">'https://zos.alipayobjects.com/rmsportal/RcumdvGStyfBEDaCuqCt.png'</span>,
          <span class="hljs-attr">redDot</span>: <span class="hljs-string">'1234567890'</span>
        }
      ]
    });

    <span class="hljs-comment">// 修改某个下标的badge</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'tabClick'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'tab clicked! - '</span> + e.data.tag); <span class="hljs-comment">// data就是tag的值，请前端自己处理</span>
      <span class="hljs-built_in">console</span>.log(e);
       AlipayJSBridge.call(<span class="hljs-string">'tabBar'</span>, {
        <span class="hljs-attr">action</span>: <span class="hljs-string">'redDot'</span>,
        <span class="hljs-attr">tag</span>: e.data.tag,
        <span class="hljs-attr">redDot</span>: <span class="hljs-string">'12'</span> <span class="hljs-comment">// -1、0、或者 null 表示取消</span>
      });
    });
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/tab-bar-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/tab-bar-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'tabBar'</span>, {
  <span class="hljs-attr">action</span>: , <span class="hljs-comment">// 创建 Tab Bar，必选</span>
  textColor: ,    <span class="hljs-comment">//ffff00 黄，必选</span>
  selectedColor: , <span class="hljs-comment">//ff0000 红，必选</span>
  selectedIndex: , <span class="hljs-comment">// 必选</span>
  items: [ <span class="hljs-comment">// 所有 TabItems，必选</span>
  {
    <span class="hljs-attr">name</span>: , <span class="hljs-comment">// 标题，必选</span>
    tag: , <span class="hljs-comment">// tab项id，必选</span>
    icon: , <span class="hljs-comment">// 正常状态图片 URL，支持 base64 编码 URL，必选</span>
    activeIcon: , <span class="hljs-comment">//选中状态图片 URL，支持 base64 编码 URL，必选</span>
    redDot: <span class="hljs-comment">// 选填, '0' 表示红点，null、'-1' 表示不显示，其他值展示出来</span>
  }]
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>action</td><td>string</td><td>操作类型，目前支持’create’和’redDot’，’create’创建tabBar，’redDot’修改红点展示</td><td>Y</td><td></td><td>10.0.0</td><td></td></tr><tr><td>textColor</td><td>number</td><td>默认tab项标题颜色</td><td>N</td><td></td><td>10.0.0</td><td></td></tr><tr><td>selectedColor</td><td>number</td><td>tab项标题选中颜色</td><td>N</td><td></td><td>10.0.0</td></tr><tr><td>selectedIndex</td><td>number</td><td>默认选中tab项索引</td><td>N</td><td></td><td>10.0.0</td></tr><tr><td>items</td><td>array</td><td>tab项</td><td>Y</td><td></td><td>10.0.0</td></tr><tr><td>name</td><td>string</td><td>tab项标题</td><td>Y</td><td></td><td>10.0.0</td></tr><tr><td>tag</td><td>string</td><td>tab项id</td><td>Y</td><td></td><td>10.0.0</td></tr><tr><td>icon</td><td>string</td><td>tab项图标，支持base64</td><td>Y</td><td></td><td>10.0.0</td></tr><tr><td>activeIcon</td><td>string</td><td>tab项选中时图标，支持base64，但不要加前面的数据格式头「data:image/png;base64,」</td><td>Y</td><td></td><td>10.0.0</td></tr><tr><td>redDot</td><td>string</td><td>‘0’ 表示红点，’-1’ 表示不显示，其他值展示出来</td><td>N</td><td></td><td>10.0.0</td></tr><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./tab-bar.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><h1 id="toast" class="title-entry">toast</h1><p>显示一个弱提示，可选择多少秒之后消失 <strong>安卓需要注意，如果用户关闭系统通知，则此弹框不会出现</strong></p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'toast'</span>, {
  <span class="hljs-attr">content</span>: <span class="hljs-string">'操作成功'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>,
  <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  alert(<span class="hljs-string">"toast消失后执行"</span>);
});

<span class="hljs-comment">// 可以通过hideToast接口隐藏已经弹出的toast</span>

AlipayJSBridge.call(<span class="hljs-string">'hideToast'</span>, {
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="各种类型演示" class="title-entry">各种类型演示</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮看不同效果<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"success"</span>&gt;</span>显示成功信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fail"</span>&gt;</span>显示失败信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"exception"</span>&gt;</span>显示异常信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"none"</span>&gt;</span>只显示信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"duration"</span>&gt;</span>3.5s信息显示<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toast</span>(<span class="hljs-params">config, callback</span>)</span>{
  AlipayJSBridge.call(<span class="hljs-string">'toast'</span>,config, callback);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.success'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    toast({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'操作成功'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.fail'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    toast({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'网络繁忙，请稍后再试'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'fail'</span>
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.exception'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    toast({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'发生异常，请注意'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'exception'</span>
    });
  });

   <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.none'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    toast({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'欢迎光临'</span>,
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.duration'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    toast({
      <span class="hljs-attr">content</span>: <span class="hljs-string">'请稍等'</span>,
      <span class="hljs-attr">duration</span>: <span class="hljs-number">3500</span>,
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
      alert(<span class="hljs-string">'toast消失回调'</span>);
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/ui/toast-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/ui/toast-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'toast'</span>,{
  content, type, duration
}, fn)
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>content</td><td>string</td><td>文字内容，如果使用antbridge版本，请用text属性替代</td><td>Y</td><td>‘’</td><td>8.0</td></tr><tr><td>type</td><td>string</td><td>none / success / fail / exception。 excption类型必须传文案</td><td>N</td><td>‘none’</td><td>8.1</td></tr><tr><td>duration</td><td>int</td><td>显示时长，单位为毫秒。android实际只支持2000/3500两种，小于或等于2000的相当于2000, 大于2000的相当于3500</td><td>N</td><td>2000</td><td>8.1</td></tr><tr><td>fn</td><td>function</td><td>回调函数，当toast消失后被调用</td><td>N</td><td></td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>toast</code>虽然会自动关闭，但是也可以通过<code>hideLoading</code>来关闭，这种使用方式不常见，但是要防止被hideLoading关闭。</li><li>安卓需要注意，如果系统通知关闭，则此弹框不会出现。</li><li>特别注意antbridge版本的toast，要求传入的是<code>text</code>属性，而不是<code>content</code>属性。</li></ul><a class="my-pdf-link" target="blank" href="./toast.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">9.9</span></div><h1 id="getServerTime(获取服务器时间)" class="title-entry">getServerTime(获取服务器时间)</h1><p>通过APTimeUtilGetServerTimeWithStrictMode方法来获取当前服务器时间的毫秒数，如果离线情况那么为-1</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getServerTime'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
  <span class="hljs-built_in">console</span>.log(data.time)
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  AlipayJSBridge.call(<span class="hljs-string">'getServerTime'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
    alert(data.time)
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/util/get-server-time-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/util/get-server-time-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><p>getServerTime</p><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><p>回调函数带入的参数result: {time: string}</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>result.time</td><td>string</td><td>毫秒数</td><td></td></tr></tbody></table></div><a class="my-pdf-link" target="blank" href="./get-server-time.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="setSessionData" class="title-entry">setSessionData</h1><p>会话数据读取</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'getSessionData'</span>, {
  <span class="hljs-attr">keys</span>: [<span class="hljs-string">'name'</span>]
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
  <span class="hljs-built_in">console</span>.log(result.data.name);
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="session数据读写" class="title-entry">session数据读写</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>点击下面按钮来查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"set"</span>&gt;</span>设置session数据<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"get"</span>&gt;</span>读取session数据<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>


<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.set'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setSessionData'</span>, {
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'Liu Hunan'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-string">'15'</span>
      }
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.get'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getSessionData'</span>, {
      <span class="hljs-attr">keys</span>: [<span class="hljs-string">'name'</span>]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/util/get-session-data-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/util/get-session-data-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>keys</td><td>array</td><td>要读取的数据的key</td><td>Y</td><td></td><td></td></tr><tr><td>fn</td><td>function</td><td>回调函数</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {data}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>object</td><td>keys对应的字段数据</td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>sessionData</code>是以每个app为单位的，因此可以实现app内的数据共享。</li><li>当app退出之后，数据自动清除。</li><li>没有办法去remove <code>sesionData</code>的key，只有通过设置一个空值来清除。</li><li>假如用户账号在其他设备登入导致logout，那么并不会清除数据，这个时候如果这个设备登入另一个账号，是可以看到这个数据的。</li></ul><a class="my-pdf-link" target="blank" href="./get-session-data.html.pdf">查看PDF版本</a></div></div><div class="content-wrap" style="padding-left:0"><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.1</span></div><h1 id="setSessionData" class="title-entry">setSessionData</h1><p>会话数据写入</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'setSessionData'</span>, {
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Liu Hunan'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-string">'15'</span>
  }
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="session数据读写" class="title-entry">session数据读写</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>点击下面按钮来查看效果<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"set"</span>&gt;</span>设置session数据<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"get"</span>&gt;</span>读取session数据<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>


<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.set'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'setSessionData'</span>, {
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'Liu Hunan'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-string">'15'</span>
      }
    });
  });

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.get'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getSessionData'</span>, {
      <span class="hljs-attr">keys</span>: [<span class="hljs-string">'name'</span>]
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/util/set-session-data-all.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/util/set-session-data-all.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>data</td><td>dictionary</td><td>要写入的数据，每个key/value pair为一个数据项。value只支持字符串</td><td>Y</td><td></td><td></td></tr></tbody></table></div><h2 id="使用注意" class="title-entry">使用注意</h2><ul><li><code>sessionData</code>是以每个app为单位的，因此可以实现app内的数据共享。</li><li>当app退出之后，数据自动清除。</li><li>没有办法去remove <code>sesionData</code>的key，只有通过设置一个空值来清除。</li><li>如果你需要在app之间共享数据，或者需要做持久化，那么可以使用<code>sharedData</code>。</li><li>假如用户账号在其他设备登入导致logout，那么并不会清除数据，这个时候如果这个设备登入另一个账号，是可以看到这个数据的。</li><li>特别注意的是，在安卓下，你存进去的内容，取出来之后类型并不能保证不变。比如，存进去一个number: 200，getSessionData获取的值会变成”200”。</li></ul><a class="my-pdf-link" target="blank" href="./set-session-data.html.pdf">查看PDF版本</a></div></div></div><div class="container-fluid"><div class="copyright">Copyright @ 2017 杭州蚂蚁金服 ｜ ICP证浙B2-20160559</div></div></body></html>