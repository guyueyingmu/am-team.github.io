<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>支付宝H5开放文档</title><link rel="icon" href="https://i.alipayobjects.com/common/favicon/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="https://i.alipayobjects.com/common/favicon/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://os.alipayobjects.com/s_dev/prod/open-nebula/global-8f849f8bf543eb0d5e73a659f8f3134b.css"><link rel="stylesheet" href="https://os.alipayobjects.com/rmsportal/ijMlnBQKFrkzTED.css"><!--[if lt IE 9]>
  <script src="https://os.alipayobjects.com/rmsportal/??WxrBMYXmCAjTlqrCedpg.js,zWgsjIehCrgIoGKHhGru.js"></script>
  <![endif]--></head><body><nav class="navbar navbar-default my-main-nav" role="navigation"><div class="container-fluid"><div class="navbar-header"><h1 class="navbar-brand"><a href="/nebula/index.html"><span class="sr-only">蚂蚁金服</span>支付宝H5开放文档</a></h1></div><button aria-label="菜单切换" class="navbar-toggle visible-xs-block js-toggle"><span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span></button><div class="navbar-collapse"><div class="search-bar"><input class="global-search search-box form-control" id="J_searchbox" placeholder="搜索文档"><div class="search-list" role="listbox"></div></div><ul class="nav navbar-nav navbar-right"><li><a href="/nebula/index.html">首页</a></li><li><a href="/nebula/alipayjsapi/index.html">AlipayJSAPI</a></li><li><a href="/nebula/fe/preset-assets.html">前端开发</a></li><li class="active"><a href="/nebula/jsapi/index.html">JSAPI</a></li><li><a href="/nebula/alipay-jsapi-manual.pdf" target="_blank">PDF版本</a></li></ul></div></div></nav><div class="container-fluid main"><div class="my-sidebar"><h2 class="my-nav-title">JSAPI</h2><ul class="list-group"><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/index.html"><a href="/nebula/jsapi/index.html">使用前必读</a></li><li class="list-group-item"><label class="my-nav-group">事件扩展</label><ul class="list-group"><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/alipay-js-bridge-ready.html"><a href="/nebula/jsapi/events/alipay-js-bridge-ready.html">AlipayJSBridgeReady</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/title-click.html"><a href="/nebula/jsapi/events/title-click.html">标题栏点击 titleClick</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/subtitle-click.html"><a href="/nebula/jsapi/events/subtitle-click.html">副标题栏点击 subtitleClick</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/pause.html"><a href="/nebula/jsapi/events/pause.html">页面压后台 pause</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/resume.html"><a href="/nebula/jsapi/events/resume.html">页面恢复运行 resume</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/option-menu.html"><a href="/nebula/jsapi/events/option-menu.html">右上角按钮点击 optionMenu</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/pop-menu-click.html"><a href="/nebula/jsapi/events/pop-menu-click.html">右上角菜单项点击 popMenuClick</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/events/h5-network-changed.html"><a href="/nebula/jsapi/events/h5-network-changed.html">网络环境变化 h5NetworkChange</a></li></ul></li></ul><li class="list-group-item"><label class="my-nav-group">页面上下文</label><ul class="list-group"><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/context/push-window.html"><a href="/nebula/jsapi/context/push-window.html">打开新页面 pushWindow</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/context/pop-window.html"><a href="/nebula/jsapi/context/pop-window.html">关闭当前页面 popWindow</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/context/pop-to.html"><a href="/nebula/jsapi/context/pop-to.html">回退多个页面 popTo</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/context/exit-app.html"><a href="/nebula/jsapi/context/exit-app.html">退出当前应用 exitApp</a></li></ul></li><li class="list-group-item"><label class="my-nav-group">Native功能</label><ul class="list-group"><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/photo.html"><a href="/nebula/jsapi/native/photo.html">选照片 photo</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/date-picker.html"><a href="/nebula/jsapi/native/date-picker.html">日期时间选择 datePicker</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/image-viewer.html"><a href="/nebula/jsapi/native/image-viewer.html">图片预览 imageViewer</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/vibrate.html"><a href="/nebula/jsapi/native/vibrate.html">震动 vibrate</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/watch-shake.html"><a href="/nebula/jsapi/native/watch-shake.html">摇一摇 watchShake</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/get-location.html"><a href="/nebula/jsapi/native/get-location.html">地理位置 getLocation</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/get-cities.html"><a href="/nebula/jsapi/native/get-cities.html">城市选择列表 getCities</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/start-share.html"><a href="/nebula/jsapi/native/start-share.html">发起分享 startShare</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/contact.html"><a href="/nebula/jsapi/native/contact.html">选择联系人 contact</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/choose-contact.html"><a href="/nebula/jsapi/native/choose-contact.html">选择联系人 chooseContact</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/get-network-type.html"><a href="/nebula/jsapi/native/get-network-type.html">网络类型 getNetworkType</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/beehive-options-picker.html"><a href="/nebula/jsapi/native/beehive-options-picker.html">选择组件 beehiveOptionsPicker</a></li><li class="list-group-item active" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/trade-pay.html"><a href="/nebula/jsapi/native/trade-pay.html">快捷支付 tradePay</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/native/select-address.html"><a href="/nebula/jsapi/native/select-address.html">用户收货地址 selectAddress</a></li></ul></li><li class="list-group-item"><label class="my-nav-group">界面</label><ul class="list-group"><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/showUCFailDialog.html"><a href="/nebula/jsapi/ui/showUCFailDialog.html">uc初始化异常提醒框 showUCFailDialog</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/alert.html"><a href="/nebula/jsapi/ui/alert.html">警告框 alert</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/confirm.html"><a href="/nebula/jsapi/ui/confirm.html">确认框 confirm</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/prompt.html"><a href="/nebula/jsapi/ui/prompt.html">输入框弹窗 prompt</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/toast.html"><a href="/nebula/jsapi/ui/toast.html">弱提示 toast</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/action-sheet.html"><a href="/nebula/jsapi/ui/action-sheet.html">选择列表 actionSheet</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/set-title.html"><a href="/nebula/jsapi/ui/set-title.html">设置标题 setTitle</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/set-title-color.html"><a href="/nebula/jsapi/ui/set-title-color.html">设置标题颜色 setTitleColor</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/set-bar-bottomline-color.html"><a href="/nebula/jsapi/ui/set-bar-bottomline-color.html">设置导航栏底部细线颜色 setBarBottomLineColor</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/set-option-menu.html"><a href="/nebula/jsapi/ui/set-option-menu.html">设置右上角按钮 setOptionMenu</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/set-toolbar-menu.html"><a href="/nebula/jsapi/ui/set-toolbar-menu.html">设置菜单项 setToolbarMenu</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/show-option-menu.html"><a href="/nebula/jsapi/ui/show-option-menu.html">显示右上角按钮 showOptionMenu</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/hide-option-menu.html"><a href="/nebula/jsapi/ui/hide-option-menu.html">隐藏右上角按钮 hideOptionMenu</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/show-pop-menu.html"><a href="/nebula/jsapi/ui/show-pop-menu.html">显示弹出菜单 showPopMenu</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/show-loading.html"><a href="/nebula/jsapi/ui/show-loading.html">显示加载中 showLoading</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/hide-loading.html"><a href="/nebula/jsapi/ui/hide-loading.html">隐藏加载中 hideLoading</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/show-title-loading.html"><a href="/nebula/jsapi/ui/show-title-loading.html">显示标题栏加载中 showTitleLoading</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/tab-bar.html"><a href="/nebula/jsapi/ui/tab-bar.html">tabBar控件 tabBar</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/hide-title-loading.html"><a href="/nebula/jsapi/ui/hide-title-loading.html">隐藏标题栏加载中 hideTitleLoading</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/ui/custom-keyboard.html"><a href="/nebula/jsapi/ui/custom-keyboard.html">自定义键盘</a></li></ul></li><li class="list-group-item"><label class="my-nav-group">工具类</label><ul class="list-group"><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/util/set-session-data.html"><a href="/nebula/jsapi/util/set-session-data.html">设置会话数据 setSessionData</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/util/get-server-time.html"><a href="/nebula/jsapi/util/get-server-time.html">获取服务器时间 getServerTime</a></li><li class="list-group-item" data-path="jsapi/native/trade-pay.md" menu-path="jsapi/util/get-session-data.html"><a href="/nebula/jsapi/util/get-session-data.html">获取会话数据 getSessionData</a></li></ul></li><li class="list-group-item"><label class="my-nav-group">多媒体</label><ul class="list-group"></ul></li></div><div class="content-wrap"><div class="directory"><ul class="directory-list"><li class="directory-item level2 active"><a href="#使用方法">使用方法</a></li><li class="directory-item level2"><a href="#代码演示">代码演示</a></li><li class="directory-item level3"><a href="#交易号唤起收银台">交易号唤起收银台</a></li><li class="directory-item level3"><a href="#唤起支付密码校验（不发起支付，只做身份确认）">唤起支付密码校验（不发起支付，只做身份确认）</a></li><li class="directory-item level3"><a href="#唤起支付渠道选择列表">唤起支付渠道选择列表</a></li><li class="directory-item level3"><a href="#唤起添加银行卡">唤起添加银行卡</a></li><li class="directory-item level2"><a href="#API">API</a></li><li class="directory-item level3"><a href="#入参">入参</a></li><li class="directory-item level3"><a href="#出参">出参</a></li><li class="directory-item level3"><a href="#orderStr各个子参数">orderStr各个子参数</a></li></ul></div><div class="my-content" id="J_myContent"><div class="my-api-status"><span>Since </span><span class="my-since-version">8.0</span></div><p></p><p>开发者在h5页面唤起支付请使用开放平台 <a href="https://doc.open.alipay.com/docs/api.htm?spm=a219a.7629065.0.0.yjpXrR&amp;apiId=1046&amp;docType=4">alipay.trade.create</a> 接口生成交易号</p><h2 id="使用方法" class="title-entry">使用方法</h2><div class="code-wrap"><pre class="hljs"><code><span class="hljs-comment">//调用此jsapi的时候，不要在当前页面有监听resume事件并在resume事件中强制刷新页面。</span>
<span class="hljs-comment">//调用方式1:通过传入交易号唤起快捷调用方式</span>
AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
  <span class="hljs-attr">tradeNO</span>: <span class="hljs-string">"201209071234123221"</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
});
<span class="hljs-comment">//调用方式2:通过传入传入交易的字符串唤起快捷调用方式,只需要这一个参数</span>
AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
  <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxx"</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
});
</code></pre></div><h2 id="代码演示" class="title-entry">代码演示</h2><h3 id="交易号唤起收银台" class="title-entry">交易号唤起收银台</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击以下按钮唤起收银台支付<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradeno"</span>&gt;</span>交易号唤起<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradeno'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
      <span class="hljs-attr">tradeNO</span>: <span class="hljs-string">"201209071234123221"</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-basic.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-basic.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="唤起支付密码校验（不发起支付，只做身份确认）" class="title-entry">唤起支付密码校验（不发起支付，只做身份确认）</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮唤起密码校验<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradestr"</span>&gt;</span>唤起密码校验<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradestr'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
      <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"uuid=95a76812-0b4c-46a6-b4ae-cc48c97b5fc5"</span>+ <span class="hljs-comment">// uuid每次唯一</span>
      <span class="hljs-string">"&amp;extern_token=GZ00UIvFe6xfGj9aslXhWkUeUJoXyGmobilegwGZ00"</span>+ <span class="hljs-comment">// extern_token登入sessionId</span>
      <span class="hljs-string">"&amp;app_name=alipay"</span>+
      <span class="hljs-string">"&amp;biz_type=openservice"</span>+
      <span class="hljs-string">"&amp;apiname=com.alipay.paypwd.validate"</span>+
      <span class="hljs-string">"&amp;apiservice=com.alipay.loan.agreement.sign"</span>+
      <span class="hljs-string">"&amp;tip=需要在密码框上显示的文案"</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-identity.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-identity.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="唤起支付渠道选择列表" class="title-entry">唤起支付渠道选择列表</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮唤起支付渠道选择<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradestr"</span>&gt;</span>支付渠道<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradestr'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">'getUserInfo'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">info</span>)</span>{
      <span class="hljs-keyword">var</span> userId= info.userId;

      AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
        <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"uuid=95a76812-0b4c-46a6-b4ae-cc48c97b5fc5"</span>+ <span class="hljs-comment">// uuid每次唯一</span>
        <span class="hljs-string">"&amp;extern_token=GZ00cSiae3xXJ9sXjuV2NhnyfWOOPb98mobilegwGZ00"</span>+<span class="hljs-comment">// extern_token登入sessionId</span>
        <span class="hljs-string">"&amp;app_name=alipay"</span>+
        <span class="hljs-string">"&amp;biz_identity=userassets10002"</span>+
        <span class="hljs-string">"&amp;trade_from=ALIPAY"</span>+
        <span class="hljs-string">"&amp;biz_type=switch_channel"</span>
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
        alert(<span class="hljs-built_in">JSON</span>.stringify(result));
      });
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-channel.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-channel.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h3 id="唤起添加银行卡" class="title-entry">唤起添加银行卡</h3><div class="demo-wrap"><pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>点击下面按钮唤起添加银行卡<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tradestr"</span>&gt;</span>添加银行卡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ready</span>(<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// 如果jsbridge已经注入则直接调用</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.AlipayJSBridge) {
    callback &amp;&amp; callback();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 如果没有注入则监听注入的事件</span>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'AlipayJSBridgeReady'</span>, callback, <span class="hljs-literal">false</span>);
  }
}
ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.tradestr'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    AlipayJSBridge.call(<span class="hljs-string">"tradePay"</span>,{
      <span class="hljs-attr">orderStr</span>: <span class="hljs-string">"uuid=95a76812-0b4c-46a6-b4ae-cc48c97b5fc5"</span>+ <span class="hljs-comment">// uuid每次唯一</span>
      <span class="hljs-string">"&amp;extern_token=GZ00UIvFe6xfGj9aslXhWkUeUJoXyGmobilegwGZ00"</span>+ <span class="hljs-comment">// extern_token登入sessionId</span>
      <span class="hljs-string">"&amp;app_name=alipay"</span>+
      <span class="hljs-string">"&amp;biz_type=new_card"</span>+
      <span class="hljs-string">"&amp;trade_from=ALIPAY"</span>+
      <span class="hljs-string">"&amp;forbid_channel=credit"</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
      alert(<span class="hljs-built_in">JSON</span>.stringify(result));
    });
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><div class="demo-actions"><a class="btn btn-primary visible-xs js-demo" href="/nebula/jsapi/native/trade-pay-card.html">查看演示</a></div><div class="qrcode-handle"><div class="qrcode-toggle"><span class="glyphicon glyphicon-qrcode"></span><span> 扫码查看</span></div><div class="qrcode-wrap"><a href="/nebula/jsapi/native/trade-pay-card.html" target="_blank" class="J_qrcode">用支付宝扫码运行</a><div class="qrcode"></div></div></div></div><h2 id="API" class="title-entry">API</h2><div class="code-wrap"><pre class="hljs"><code>AlipayJSBridge.call(<span class="hljs-string">'tradePay'</span>, {
  tradeNO, partnerID, bizType, bizSubType, displayPayResult, bizContext, orderStr
}, fn);
</code></pre></div><h3 id="入参" class="title-entry">入参</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>必选</th><th>默认值</th><th>版本</th></tr></thead><tbody><tr><td>tradeNO</td><td>string</td><td>交易号。多个用”;”分隔</td><td>N</td><td></td><td>8.0</td></tr><tr><td>partnerID</td><td>string</td><td>商户id</td><td>N</td><td>‘’</td><td>8.0</td></tr><tr><td>bizType</td><td>string</td><td>交易类型</td><td>N</td><td>‘trade’</td><td>8.0</td></tr><tr><td>bizSubType</td><td>string</td><td>交易子类型</td><td>N</td><td>‘’</td><td>8.0</td></tr><tr><td>displayPayResult</td><td>bool</td><td>是否显示支付结果页</td><td>N</td><td>true</td><td>8.0</td></tr><tr><td>bizContext</td><td>string</td><td>支付额外的参数，格式为JSON字符串</td><td>N</td><td>‘’</td><td>8.2</td></tr><tr><td>orderStr</td><td>string</td><td>完整的一个支付字符串</td><td>N</td><td>‘’</td><td>8.2</td></tr><tr><td>fn</td><td>function</td><td>收营台关闭之后的结果回调</td><td>N</td><td></td><td></td></tr></tbody></table></div><h3 id="出参" class="title-entry">出参</h3><blockquote><p>回调函数带入的参数result: {resultCode, callbackUrl, memo, result}</p></blockquote><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>版本</th></tr></thead><tbody><tr><td>resultCode</td><td>string</td><td>支付结果<br>‘9000’: 订单支付成功;<br>‘8000’: 正在处理中;<br>‘4000’: 订单支付失败;<br>‘6001’: 用户中途取消;<br>‘6002’: 网络连接出错<br>‘99’: 用户点击忘记密码快捷界面退出(only iOS since 9.5)</td><td>8.0</td></tr><tr><td>callbackUrl</td><td>bool</td><td>交易成功后应跳转到的url；一般为空, 除非交易有特殊配置</td><td>8.0</td></tr><tr><td>memo</td><td>bool</td><td>收银台服务端返回的memo字符串</td><td>iOS 8.0, android 8.4</td></tr><tr><td>result</td><td>bool</td><td>收银台服务端返回的result字符串</td><td>iOS 8.0, android 8.4</td></tr></tbody></table></div><h3 id="orderStr各个子参数" class="title-entry">orderStr各个子参数</h3><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>uuid</td><td>string</td><td>随机字符串，可自行生成或服务端接口</td></tr><tr><td>extern_token</td><td>string</td><td>钱包信任登录token，即为sessionId，通过服务端接口获取</td></tr><tr><td>app_name</td><td>string</td><td>调用方app标识，alipay代表支付宝钱包</td></tr><tr><td>biz_type</td><td>string</td><td>调用业务类型，openservice代表开放基础服务</td></tr><tr><td>apiname</td><td>string</td><td>调用开放服务api名称，com.alipay.paypwd.validate代表独立密码校验服务</td></tr><tr><td>apiservice</td><td>string</td><td>调用开放服务api业务方，com.alipay.loan.agreement.sign代表小贷签约</td></tr><tr><td>biz_identity</td><td>string</td><td>某个业务类型对应的具体业务参数</td></tr><tr><td>user_id</td><td>string</td><td>某些业务需要的用户id</td></tr><tr><td>tip</td><td>string</td><td>需要在密码框上展示的提示文案</td></tr></tbody></table></div><p></p><a class="my-pdf-link" target="blank" href="./trade-pay.html.pdf">查看PDF版本</a></div></div><button aria-label="边栏切换" class="sidebar-toggle visible-xs-block js-sidebar-toggle"><span class="glyphicon glyphicon-th-large" aria-hidden="true"></span></button><div class="dimmer" role="presentation"></div></div><div class="container-fluid"><div class="copyright">Copyright @ 2017 杭州蚂蚁金服 ｜ ICP证浙B2-20160559</div></div><input type="hidden" value="/nebula/" id="js-root"><script src="https://os.alipayobjects.com/rmsportal/??fBwppBoXIKidETe.js,zpGDQEkJIvsvKIiMHRdj.js,hKQWxzKJYJLVXfH.js,JIMmGyRgrhqytqElKZRW.js,HPiRBqzDoYVDumq.js"></script><script src="https://a.alipayobjects.com/static/fastclick/1.0.6/fastclick.min.js"></script><script src="https://os.alipayobjects.com/s_dev/prod/open-nebula/app-8fe2020e404041f1f673fb043222198e.js"></script><style>#J_cnzz~a{display:none}</style><script src="https://s11.cnzz.com/z_stat.php?id=1261676206&web_id=1261676206" language="JavaScript" id="J_cnzz"></script></body></html>